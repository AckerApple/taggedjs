{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack:///./src/array.test.ts","webpack:///./src/child.test.ts","webpack:///./src/content.test.ts","webpack:///./src/counters.test.ts","webpack:///./src/elmSelectors.ts","webpack:///./src/expect.html.ts","webpack:///./src/expect.ts","webpack:///./src/funInProps.test.ts","webpack:///./src/mirror.test.ts","webpack:///./src/oneRender.test.ts","webpack:///./src/props.test.ts","webpack:///./src/providers.test.ts","webpack:///./src/tagSwitch.test.ts","webpack:///./src/todos.test.ts","webpack:///./src/watch.test.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///../dist/js/tag/ValueTypes.enum.js","webpack:///../dist/js/isInstance.js","webpack:///../dist/js/subject/combineLatest.function.js","webpack:///../dist/js/subject/subject.utils.js","webpack:///../dist/js/subject/Subject.class.js","webpack:///../dist/js/subject/ValueSubject.js","webpack:///../dist/js/tag/getSupportInCycle.function.js","webpack:///../dist/js/state/setUse.function.js","webpack:///../dist/js/errors.js","webpack:///../dist/js/state/state.utils.js","webpack:///../dist/js/state/syncStates.function.js","webpack:///../dist/js/state/state.function.js","webpack:///../dist/js/state/watch.function.js","webpack:///../dist/js/state/subject.function.js","webpack:///../dist/js/state/letState.function.js","webpack:///../dist/js/deepFunctions.js","webpack:///../dist/js/state/providers.js","webpack:///../dist/js/tag/isLikeTags.function.js","webpack:///../dist/js/tag/tagRunner.js","webpack:///../dist/js/tag/render/renderTagOnly.function.js","webpack:///../dist/js/tag/Tag.class.js","webpack:///../dist/js/tag/destroyTag.function.js","webpack:///../dist/js/insertAfter.function.js","webpack:///../dist/js/tag/checkDestroyPrevious.function.js","webpack:///../dist/js/tag/getValueType.function.js","webpack:///../dist/js/tag/cloneValueArray.function.js","webpack:///../dist/js/tag/destroy.support.js","webpack:///../dist/js/tag/TemplaterResult.class.js","webpack:///../dist/js/tag/kidsToTagArraySubject.function.js","webpack:///../dist/js/tag/update/processNewValue.function.js","webpack:///../dist/js/tag/setTagPlaceholder.function.js","webpack:///../dist/js/interpolations/specialAttribute.js","webpack:///../dist/js/tag/hasPropChanges.function.js","webpack:///../dist/js/tag/update/processTagResult.function.js","webpack:///../dist/js/tag/update/processSubjectComponent.function.js","webpack:///../dist/js/tag/render/renderSubjectComponent.function.js","webpack:///../dist/js/alterProp.function.js","webpack:///../dist/js/tag/update/updateExistingTagComponent.function.js","webpack:///../dist/js/tag/hasTagSupportChanged.function.js","webpack:///../dist/js/interpolations/bindSubjectCallback.function.js","webpack:///../dist/js/interpolations/processAttribute.function.js","webpack:///../dist/js/interpolations/interpolateAttributes.js","webpack:///../dist/js/interpolations/interpolations.js","webpack:///../dist/js/tag/update/processTag.function.js","webpack:///../dist/js/tag/update/processTagArray.js","webpack:///../dist/js/updateBeforeTemplate.function.js","webpack:///../dist/js/tag/update/processRegularValue.function.js","webpack:///../dist/js/tag/update/processFirstSubjectValue.function.js","webpack:///../dist/js/tag/update/oneRenderToTagSupport.function.js","webpack:///../dist/js/interpolations/scanTextAreaValue.function.js","webpack:///../dist/js/tag/update/updateExistingValue.function.js","webpack:///../dist/js/interpolations/interpolateTemplate.js","webpack:///../dist/js/interpolations/elementInitCheck.js","webpack:///../dist/js/interpolations/interpolateContentTemplates.js","webpack:///../dist/js/interpolations/interpolateElement.js","webpack:///../dist/js/interpolations/afterInterpolateElement.function.js","webpack:///../dist/js/render.js","webpack:///../dist/js/tag/TagSupport.class.js","webpack:///../dist/js/tag/update/updateContextItem.function.js","webpack:///../dist/js/tag/elementDestroyCheck.function.js","webpack:///../dist/js/tag/render/softDestroySupport.function.js","webpack:///../dist/js/tag/render/destroyUnlikeTags.function.js","webpack:///../dist/js/tag/render/renderWithSupport.function.js","webpack:///../dist/js/state/handleProviderChanges.function.js","webpack:///../dist/js/tag/render/renderExistingTag.function.js","webpack:///../dist/js/state/providersChangeCheck.function.js","webpack:///../dist/js/tag/render/renderTagSupport.function.js","webpack:///../dist/js/state/callbackStateUpdate.function.js","webpack:///../dist/js/state/callbackMaker.function.js","webpack:///../dist/js/state/onInit.js","webpack:///../dist/js/state/onDestroy.js","webpack:///../dist/js/state/children.js","webpack:///../dist/js/tag/tag.utils.js","webpack:///../dist/js/tag/html.js","webpack:///../dist/js/tag/tag.js","webpack:///../dist/js/tag/getTagWrap.function.js","webpack:///../dist/js/tag/tagElement.js","webpack:///../dist/js/index.js","webpack:///./src/attributeDebug.component.ts","webpack:///./src/ContentDebug.component.ts","webpack:///../dist/js/subject/will.functions.js","webpack:///./src/tableDebug.component.ts","webpack:///./src/intervalDebug.ts","webpack:///./node_modules/taggedjs-animate-css/js/createFx.function.js","webpack:///./node_modules/taggedjs-animate-css/js/index.js","webpack:///./src/tagJsDebug.ts","webpack:///./src/renderCount.component.ts","webpack:///./src/tagSwitchDebug.component.ts","webpack:///./src/mirroring.tag.ts","webpack:///./src/innerHtmlTests.ts","webpack:///./src/childTests.ts","webpack:///./src/mouseover.tag.ts","webpack:///./src/countersDebug.ts","webpack:///./src/providerDebug.ts","webpack:///./src/watchTesting.tag.ts","webpack:///./src/oneRender.tag.ts","webpack:///./src/funInProps.tag.ts","webpack:///./src/todo/components/input.ts","webpack:///./src/todo/constants.ts","webpack:///./src/todo/components/item.ts","webpack:///./src/todo/components/main.ts","webpack:///./src/todo/components/footer.ts","webpack:///./src/todo/reducer.ts","webpack:///./src/todo/app.ts","webpack:///./src/todo/components/header.ts","webpack:///./src/PropsDebug.tag.ts","webpack:///../dist/js/state/letProp.function.js","webpack:///./src/arrayTests.ts","webpack:///./src/app.tag.ts","webpack:///./src/tests.ts","webpack:///./src/isolatedApp.ts","webpack:///./src/isolatedApp.test.ts","webpack:///./src/app.function.ts"],"sourcesContent":["import { byId, elmCount } from \"./elmSelectors\"\nimport { describe, expect, it } from \"./expect\"\n\n\ndescribe('array testing', () => {\n  it('array basics', () => {\n    expect(elmCount('#array-test-push-item')).toBe(1)\n    const insideCount = elmCount('#score-data-0-1-inside-button')\n    expect(insideCount).toBe(0)\n    expect(elmCount('#score-data-0-1-outside-button')).toBe(0)\n    byId('array-test-push-item').click()\n    expect(elmCount('#score-data-0-1-inside-button')).toBe(1)\n    expect(elmCount('#score-data-0-1-outside-button')).toBe(1)\n    \n    const insideElm = byId('score-data-0-1-inside-button')\n    const insideDisplay = byId('score-data-0-1-inside-display')\n    let indexValue = insideDisplay.innerText\n    const outsideElm = byId('score-data-0-1-outside-button')\n    const outsideDisplay = byId('score-data-0-1-outside-display')\n    const outsideValue = outsideDisplay.innerText\n    expect(indexValue).toBe(outsideValue)\n\n    insideElm.click()\n    expect(insideDisplay.innerText).toBe(outsideDisplay.innerText)\n    expect(indexValue).toBe((Number(insideDisplay.innerText) - 1).toString())\n    expect(indexValue).toBe((Number(outsideDisplay.innerText) - 1).toString())\n\n    outsideElm.click()\n    expect(insideDisplay.innerText).toBe(outsideDisplay.innerText)\n    expect(indexValue).toBe((Number(insideDisplay.innerText) - 2).toString())\n    expect(indexValue).toBe((Number(outsideDisplay.innerText) - 2).toString())\n  })\n\n  it(' deletes', async () => {\n    expect(elmCount('#player-remove-promise-btn-0')).toBe(0)\n    expect(elmCount('#player-edit-btn-0')).toBe(1)\n\n    await (byId('player-edit-btn-0') as any).onclick()\n\n    expect(elmCount('#player-remove-promise-btn-0')).toBe(1)\n\n    await (byId('player-remove-promise-btn-0') as any).onclick()\n    await delay(1000) // animation\n\n    expect(elmCount('#player-remove-promise-btn-0')).toBe(0)\n    expect(elmCount('#player-edit-btn-0')).toBe(0)\n  })\n})\n\nfunction delay(time: number) {\n  return new Promise((res) => setTimeout(res, time))\n}\n","import { it } from \"./expect\"\nimport { testCounterElements, testDuelCounterElements } from \"./expect.html\"\n\nit('child tests', () => {\n  testCounterElements('#innerHtmlPropsTest-button', '#innerHtmlPropsTest-display')\n  testCounterElements('#innerHtmlTest-counter-button', '#innerHtmlTest-counter-display')\n  testDuelCounterElements(\n    ['#childTests-button', '#childTests-display'],\n    ['#child-as-prop-test-button', '#child-as-prop-test-display'],\n    ['#innerHtmlPropsTest-childTests-button', '#innerHtmlPropsTest-childTests-display'],\n  )\n\n  testDuelCounterElements(\n    ['#childTests-button', '#childTests-display'],\n    ['#innerHtmlTest-childTests-button', '#innerHtmlTest-childTests-display'],\n  )\n})\n","import { describe, it } from \"./expect\"\nimport { expectMatchedHtml } from \"./expect.html\"\n\ndescribe('content', () => {    \n  it('basic', () => {\n    expectMatchedHtml('#content-subject-pipe-display0', '#content-subject-pipe-display1')\n    expectMatchedHtml('#content-combineLatest-pipe-display0', '#content-combineLatest-pipe-display1')\n  })\n\n  it('html', () => {\n    expectMatchedHtml('#content-combineLatest-pipeHtml-display0', '#content-combineLatest-pipeHtml-display1')\n  })\n})\n","import { byId, click, html } from \"./elmSelectors\"\nimport { describe, expect, it } from \"./expect\"\nimport { expectElmCount, testCounterElements } from \"./expect.html\"\n\ndescribe('counters', () => {    \n  const slowCount = html('#-slowChangeCount')\n  // tests can be run multiple times. Only the first time will this expect below work\n  const firstRun = slowCount === '0'\n\n  it('basics', () => {\n    const counterInput = byId('set-main-counter-input') as HTMLInputElement\n    expect(counterInput).toBeDefined()\n    counterInput.value = '0'\n    ;(counterInput as any).onkeyup({target: counterInput})\n\n    const beforeRenderCount = Number(html('#counters_render_count'))\n    const beforeInnerRenderCount = Number(html('#inner_counters_render_count'))\n\n    expectElmCount('#conditional-counter', 0)\n\n    testCounterElements('#-increase-counter', '#-counter-display')\n\n    expect(html('#counters_render_count')).toBe( (beforeRenderCount + 2).toString() )\n    // the parent changed a value passed to child as a prop\n    expect(html('#inner_counters_render_count')).toBe( (beforeInnerRenderCount + 2).toString() )\n\n    testCounterElements('#-inner-counter', '#-inner-display')\n\n    expect(html('#counters_render_count')).toBe( (beforeRenderCount + 4).toString() )\n    // the child changed a value passed from parent as a prop\n    expect(html('#inner_counters_render_count')).toBe( (beforeInnerRenderCount + 4).toString() )\n\n    testCounterElements('#standalone-counter', '#standalone-display')\n\n    expect(html('#counters_render_count')).toBe( (beforeRenderCount + (firstRun ? 6 : 6)).toString(), 'render count check failed' )\n    // the child was not rendered again because props did not change so value should be less\n    expect(html('#inner_counters_render_count')).toBe( (beforeInnerRenderCount + 4).toString() )\n\n    expectElmCount('#conditional-counter', 1)\n    expectElmCount('#conditional-display', 1)\n    if(firstRun) {\n      expect(html('#conditional-display')).toBe('2')\n    }\n    testCounterElements('#conditional-counter', '#conditional-display')\n    \n    // test again after higher elements have had reruns\n    testCounterElements('#-inner-counter', '#-inner-display')\n\n    if(firstRun) {\n      expect(html('#-pipedSubject')).toBe('')\n      expect(html('#-pipedSubject-2')).toBe('')\n    }\n    \n    click('#-subject-increase-counter')\n\n    const pipedSubDisplay = html('#-pipedSubject')\n    const subjectCountDisplay = html('#-subject-counter-display')\n    expect(pipedSubDisplay).toBe(subjectCountDisplay, `Expected #-pipedSubject value(${pipedSubDisplay}) to match #-subject-counter-display value(${subjectCountDisplay})`)\n    expect(html('#-pipedSubject-2')).toBe(html('#-subject-counter-display') )\n  })\n})\n","\nexport function elmCount(selector: string) {\n  return document.querySelectorAll(selector).length\n}\n\nexport function query(\n  query: string\n) {\n  return document.querySelectorAll(query)\n}\n\nexport function focus(\n  q: string\n) {\n  return query(q).forEach(elm => (elm as HTMLElement).focus())\n}\n\nexport function click(\n  q: string\n) {\n  return query(q).forEach(elm => (elm as HTMLElement).click())\n}\n\nexport function clickOne(\n  q: string,\n  index = 0,\n) {\n  const element = query(q)[index] as HTMLElement\n  return element.click()\n}\n\nexport function html(\n  q: string\n) {\n  let html = ''\n  query(q).forEach(elm => html = html + elm.innerHTML)\n  return html\n}\n\nexport function byId(id: string): HTMLElement {\n  return document.getElementById(id) as HTMLElement\n}\n\nexport function htmlById(id: string): string {\n  return (document.getElementById(id) as HTMLElement).innerHTML\n}\n\nexport function lastById(id: string): Element {\n  const elms = document.querySelectorAll('#' + id)\n  return elms[elms.length - 1]\n}\n","import { expect } from \"./expect\"\n\n/* all elements in each query must have the same html */\nexport function expectMatchedHtml(\n  ...queries: string[]\n) {\n  const elements = queries.reduce((all, query) => {\n      const elements = document.querySelectorAll(query)\n      all.push(...elements)\n      return all\n    }, [] as Element[]\n  )\n\n  expect(elements.length).toBeGreaterThan(0, 'Expected elements to be present in expectMatchedHtml() query but found none')\n\n  const lastElm = elements.pop() as Element\n  const lastHtml = lastElm.innerHTML\n  elements.every(elm =>\n    expect(lastHtml).toBe(elm.innerHTML, () => `expectMatchedHtml unmatched html - queries: ${queries.join(' - ')}`)\n  )\n}\n\nexport function expectHTML(\n  query: string,\n  innerHTML: string\n) {\n  const elements = document.querySelectorAll(query)\n  elements.forEach(element =>\n    expect(element.innerHTML).toBe(innerHTML, () => `Expected element ${query} innerHTML to be -->${innerHTML}<-- but it was -->${element.innerHTML}<--`)\n  )\n}\n\nexport function expectElmCount(\n  query: string,\n  count: number,\n  message?: string\n) {\n  const elements = document.querySelectorAll(query)\n  const found = elements.length\n\n  message = message || `Expected ${count} elements to match query ${query} but found ${found}`\n\n  expect(found).toBe(count, message)\n\n  return elements\n}\n\nexport function testDuelCounterElements(\n  ... sets: [string, string][]\n  // [button0, display0]: [string, string], // button, display\n  // [button1, display1]: [string, string], // button, display\n) {\n  const [button0, display0] = sets.shift() as [string, string]\n  let query = expectElmCount(display0, 1)\n  let buttonQuery = expectElmCount(button0, 1)\n  const display0Element = query[0] as HTMLElement\n  const ip0 = display0Element.innerText\n  testCounterSelectedElements(\n    buttonQuery as any as HTMLElement[],\n    query as any as HTMLElement[],\n    {elementCountExpected: 1},\n    button0,\n    display0,\n  )\n  \n  let increase = 2\n  sets.forEach(([button1, display1]) => {    \n    query = expectElmCount(display1, 1)\n    buttonQuery = expectElmCount(button1, 1)\n    let display1Element = query[0] as HTMLElement\n    let ip1Check = display1Element.innerText\n    const value = (Number(ip0) + increase).toString()\n    expect(ip1Check).toBe(value, () => `Expected second increase provider to be increased to ${ip0} but got ${ip1Check}`)\n   \n    testCounterSelectedElements(\n      buttonQuery as any as HTMLElement[],\n      query as any as HTMLElement[],\n      {elementCountExpected: 1},\n      button0,\n      display0,\n    )\n  \n    display1Element = query[0] as HTMLElement\n    ip1Check = display1Element.innerText\n    const secondIncrease = increase + 2\n    expect(ip1Check).toBe((Number(ip0) + secondIncrease).toString(), () => `Expected ${display1} innerText to be ${Number(ip0) + secondIncrease} but instead it is ${ip1Check}`)\n\n    increase = increase + 2\n  })\n}\n\nfunction testCounterSelectedElements(\n  counterButtons: HTMLElement[],\n  counterDisplays: HTMLElement[],\n  {elementCountExpected} = {\n    elementCountExpected: 1\n  },\n  counterButtonSelect: string,\n  counterDisplaySelect: string,\n) {\n  expect(counterButtons.length).toBe(elementCountExpected, () => `Expected ${counterButtonSelect} to be ${elementCountExpected} elements but is instead ${counterButtons.length}`)\n  expect(counterDisplays.length).toBe(elementCountExpected, ()=> `Expected ${counterDisplaySelect} to be ${elementCountExpected} elements but is instead ${counterDisplays.length}`)\n\n  counterButtons.forEach((increaseCounter, index: number) => {\n    const counterDisplay = document.querySelectorAll(counterDisplaySelect)[index] as HTMLElement // counterDisplays[index]\n\n    expect(document.body.contains(counterDisplay)).toBe(true, `The selected element ${counterDisplaySelect} is no longer an element on the document body before clicking ${counterButtonSelect}`)\n\n    let counterValue = Number(counterDisplay?.innerText)\n    increaseCounter.click()\n\n    expect(counterDisplay).toBeDefined()\n    expect(document.body.contains(counterDisplay)).toBe(true, `The selected element ${counterDisplaySelect} is no longer an element on the document body after clicking ${counterButtonSelect}`)\n\n    let oldCounterValue = counterValue + 1\n    counterValue = Number(counterDisplay.innerText)\n    expect(document.body.contains(counterDisplay)).toBe(true)\n    expect(oldCounterValue).toBe(counterValue, () => `Counter test 1 of 2 expected ${counterDisplaySelect} to be value ${oldCounterValue} but it is ${counterValue}`)\n    increaseCounter.click()\n\n    counterValue = Number(counterDisplay?.innerText)\n    ++oldCounterValue\n    expect(oldCounterValue).toBe(counterValue, () => `Counter test 2 of 2 expected ${counterDisplaySelect} to increase value to ${oldCounterValue} but it is ${counterValue}`)\n  })\n\n}\n\n/** increases counter by two */\nexport function testCounterElements(\n  counterButtonSelect: string,\n  counterDisplaySelect: string,\n  {elementCountExpected} = {\n    elementCountExpected: 1\n  }\n) {\n  const increaseCounters = document.querySelectorAll(counterButtonSelect) as unknown as HTMLElement[]\n  const counterDisplays = document.querySelectorAll(counterDisplaySelect) as unknown as HTMLElement[]\n\n  return testCounterSelectedElements(\n    increaseCounters,\n    counterDisplays,\n    {elementCountExpected},\n    counterButtonSelect,\n    counterDisplaySelect,\n  )\n}\n","type Test = () => unknown\nconst onlyTests: Test[] = []\nlet tests: Test[] = []\nlet tab = 0\n\nexport function describe(label: string, run: () => any) {\n  tests.push(async () => {\n    const oldTests = tests\n    tests = []\n    \n    try {\n      console.debug('  '.repeat(tab) + ' ' + label)\n      \n      ++tab\n      await run()\n      await runTests(tests)\n      \n      --tab\n    } catch (error) {\n      --tab\n      // console.debug(' '.repeat(tab) + ' ' + label)\n      throw error\n    } finally {\n      tests = oldTests\n    }\n  })\n}\n\ndescribe.skip = (label: string, run: () => any) => {\n  console.debug(' Skipped ' + label)\n}\n\ndescribe.only = (label: string, run: () => any) => {\n  onlyTests.push(async () => {\n    const oldTests = tests\n    tests = []\n    \n    try {\n      console.debug('  '.repeat(tab) + ' ' + label)\n      \n      ++tab\n      \n      await run()\n      await runTests(tests)\n      \n      --tab\n    } catch (error) {\n      --tab\n      // console.debug(' '.repeat(tab) + ' ' + label)\n      throw error\n    } finally {\n      tests = oldTests\n    }\n  })\n}\n\nexport function it(label: string, run: () => any) {\n  tests.push(async () => {\n    try {\n      const start = Date.now()\n      await run()\n      const time = Date.now() - start\n      console.debug(' '.repeat(tab) + ` ${label} - ${time}ms`)\n    } catch (error) {\n      console.debug(' '.repeat(tab) + ' ' + label)\n      throw error\n    }\n  })\n}\n\nit.only = (label: string, run: () => any) => {\n  onlyTests.push(async () => {\n    try {\n      const start = Date.now()\n      await run()\n      const time = Date.now() - start\n      console.debug(` ${label} - ${time}ms`)\n    } catch (error) {\n      console.debug(' ' + label)\n      throw error\n    }\n  })\n}\n\nit.skip = (label: string, run: () => any) => {\n  console.debug(' Skipped ' + label)\n}\n\nfunction clearTests() {\n  onlyTests.length = 0\n  tests.length = 0\n}\n\nexport async function execute() {\n  if(onlyTests.length) {\n    return runTests(onlyTests)\n  }\n  \n  return runTests(tests)\n}\n\nasync function runTests(tests: Test[]) {\n  for (const test of tests) {\n    try {\n      await test()\n    } catch (err) {\n      console.error(`Error testing ${test.name}`)\n      clearTests()\n      throw err\n    }\n  }\n  clearTests()\n}\n\nexport function expect(expected: unknown) {\n  return {\n    toBeDefined: (customMessage?: string | Function) => {\n      if(expected !== undefined && expected !== null) {\n        return\n      }\n\n      if(customMessage instanceof Function) {\n        customMessage = customMessage()\n      }\n\n      const message = customMessage || `Expected ${JSON.stringify(expected)} to be defined`\n      console.error(message, {expected})\n      throw new Error(message as string)\n    },\n    toBe: (received: unknown, customMessage?: string | Function) => {\n      if(expected === received) {\n        return\n      }\n\n      if(customMessage instanceof Function) {\n        customMessage = customMessage()\n      }\n\n      const message = customMessage || `Expected ${typeof(expected)} ${JSON.stringify(expected)} to be ${typeof(received)} ${JSON.stringify(received)}`\n      console.error(message, {received, expected})\n      throw new Error(message as string)\n    },\n    toBeGreaterThan: (amount: number, customMessage?: string) => {\n      const expectNum = expected as number\n      if(!isNaN(expectNum) && expectNum > amount) {\n        return\n      }\n\n      const message = customMessage || `Expected ${typeof(expected)} ${JSON.stringify(expected)} to be greater than amount`\n      console.error(message, {amount, expected})\n      throw new Error(message)\n    },\n    toBeLessThan: (amount: number, customMessage?: string) => {\n      const expectNum = expected as number\n      if(!isNaN(expectNum) && expectNum < amount) {\n        return\n      }\n\n      const message = customMessage || `Expected ${typeof(expected)} ${JSON.stringify(expected)} to be less than amount`\n      console.error(message, {amount, expected})\n      throw new Error(message)\n    }\n  }\n}\n","import { click, html } from \"./elmSelectors\"\nimport { expect, it } from \"./expect\"\nimport { testCounterElements } from \"./expect.html\"\n\nit('function in props', () => {\n  testCounterElements('#fun_in_prop1', '#fun_in_prop_display')\n  testCounterElements('#fun_in_prop2', '#fun_in_prop_display')\n  testCounterElements('#fun_in_prop3', '#fun_in_prop_display')\n  \n  expect(html('#main_wrap_state')).toBe('taggjedjs-wrapped')\n\n  click('#toggle-fun-in-child')\n  click('#fun-parent-button')\n  expect(html('#main_wrap_state')).toBe('nowrap')\n  click('#toggle-fun-in-child')\n  click('#fun-parent-button')\n  expect(html('#main_wrap_state')).toBe('taggjedjs-wrapped')\n})\n","import { byId, htmlById } from \"./elmSelectors\"\nimport { expect, it } from \"./expect\"\nimport { expectElmCount, expectMatchedHtml } from \"./expect.html\"\n\nit(' mirror testing', () => {\n  expectElmCount('#mirror-counter-display', 2)\n  expectElmCount('#mirror-counter-button', 2)\n  \n  const counter = Number(htmlById('mirror-counter-display'))\n\n  byId('mirror-counter-button').click()\n\n  expect(counter + 1).toBe( Number(htmlById('mirror-counter-display')) )\n  expectElmCount('#mirror-counter-display', 2)\n  expectMatchedHtml('#mirror-counter-display')\n})","import { html } from \"./elmSelectors\"\nimport { expect, it } from \"./expect\"\nimport { testCounterElements } from \"./expect.html\"\n\nit('oneRender', () => {\n  expect(html('#oneRender_tag_ts_render_count')).toBe('1')\n\n  testCounterElements('#-counter-button', '#-counter-display')\n  testCounterElements('#-counter-button', '#-counter-display')\n  testCounterElements('#-counter-button', '#-counter-subject-display')\n\n  expect(html('#oneRender_tag_ts_render_count')).toBe('1')\n})\n","import { byId, click, html, htmlById } from \"./elmSelectors\"\nimport { describe, expect, it } from \"./expect\"\nimport { expectHTML, expectMatchedHtml, testCounterElements, testDuelCounterElements } from \"./expect.html\"\n\ndescribe('props', () => {    \n  it('test duels', () => {\n    testDuelCounterElements(\n      ['#propsDebug--0-button', '#propsDebug--0-display'],\n      ['#propsDebug--1-button', '#propsDebug--1-display'],\n    )\n  })\n\n  it('child prop communications', () => {\n    testDuelCounterElements(\n      ['#propsDebug--1-button', '#propsDebug--1-display'],\n      ['#propsOneLevelFunUpdate--button', '#propsOneLevelFunUpdate--display'],\n    )\n  })\n\n  it('letProp', () => {\n    // local and outside currently match\n    expectMatchedHtml('#propsDebug--0-display', '#propsDebug--2-display')\n    const propCounter = Number(html('#propsDebug--0-display'))\n    \n    click('#propsDebug--2-button')\n\n    // outer should not have changed\n    expect(html('#propsDebug--0-display')).toBe( propCounter.toString() )\n    expect(html('#propsDebug--2-display')).toBe( (propCounter + 1).toString() )      \n  })\n\n  it('basics', () => {\n    // the number of times the watch counted a change happens to match that increase counter\n    const funUpdateValue = byId('propsOneLevelFunUpdate--display').innerHTML\n    const changed = html('#propsDebug--change-display')\n    \n    // test that watch runs onInit\n    expect(changed).toBe( (Number(funUpdateValue) + 1).toString() )\n\n    const ownerHTML = byId('propsDebug--0-display').innerHTML\n    const parentHTML = byId('propsDebug--1-display').innerHTML\n    const childHTML = byId('propsOneLevelFunUpdate--display').innerHTML\n\n    const ownerNum = Number(ownerHTML)\n    const parentNum = Number(parentHTML)\n    const childNum = Number(childHTML)\n\n    expect(parentNum).toBe(childNum)\n    expect(ownerNum + 2).toBe(parentNum) // testing of setProp() doesn't change owner\n\n    byId('propsDebug--1-button').click()\n  })\n\n  it('props as functions', () => {\n    const syncCounter = Number( htmlById('sync-prop-number-display') )\n    // const syncCounter = Number( htmlById('sync-prop-child-display') )\n    expectMatchedHtml('#sync-prop-number-display', '#sync-prop-child-display')\n\n    byId('sync-prop-child-button').click()\n\n    expectHTML('#sync-prop-number-display', (syncCounter + 2).toString())\n    testCounterElements('#nothing-prop-counter-button', '#nothing-prop-counter-display')\n    expectHTML('#sync-prop-number-display', (syncCounter + 2).toString())\n    expectMatchedHtml('#sync-prop-counter-display', '#nothing-prop-counter-display')\n    \n  })\n})\n","import { describe, it } from \"./expect\"\nimport { testDuelCounterElements } from \"./expect.html\"\n\ndescribe('providers', () => {\n  it('basics', () => {\n    testDuelCounterElements(\n      ['#increase-provider--0-button', '#increase-provider--0-display'],\n      ['#increase-provider--1-button', '#increase-provider--1-display'],\n    )\n\n    testDuelCounterElements(\n      ['#increase-provider-upper--0-button', '#increase-provider-upper--0-display'],\n      ['#increase-provider-upper--1-button', '#increase-provider-upper--1-display'],\n    )\n\n    testDuelCounterElements(\n      ['#increase-provider--0-button', '#increase-provider--0-display'],\n      ['#increase-provider--1-button', '#increase-provider--1-display'],\n    )\n  })\n\n  it('inner outer debug', () => {\n    testDuelCounterElements(\n      ['#increase-prop--0-button', '#increase-prop--0-display'],\n      ['#increase-prop--1-button', '#increase-prop--1-display'],\n    )\n\n    // change a counter in the parent element\n    testDuelCounterElements(\n      ['#increase-provider--0-button', '#increase-provider--0-display'],\n      ['#increase-provider--1-button', '#increase-provider--1-display'],\n    )\n\n    // now ensure that this inner tag still operates correctly even though parent just rendered but i did not from that change\n    testDuelCounterElements(\n      ['#increase-prop--0-button', '#increase-prop--0-display'],\n      ['#increase-prop--1-button', '#increase-prop--1-display'],\n    )\n  })\n})  \n","import { byId, elmCount } from \"./elmSelectors\"\nimport { describe, expect, it } from \"./expect\"\nimport { expectElmCount } from \"./expect.html\"\n\ndescribe('tagSwitching', () => {\n  it('0', () => {\n    expect(elmCount('#select-tag-above')).toBe(1, 'Expected select-tag-above element to be defined')\n    expect(elmCount('#tag-switch-dropdown')).toBe(1, 'Expected one #tag-switch-dropdown')\n    expect(elmCount('#tagSwitch-1-hello')).toBe(2, 'Expected two #tagSwitch-1-hello elements')\n    expect(elmCount('#tagSwitch-2-hello')).toBe(0)\n    expect(elmCount('#tagSwitch-3-hello')).toBe(0)\n  })\n\n  it('1', () => {\n    const dropdown = byId('tag-switch-dropdown') as HTMLSelectElement\n    dropdown.value = \"1\"\n\n    ;(dropdown as any).onchange({target:dropdown})\n    expectElmCount('#tagSwitch-1-hello', 5)\n    expect(elmCount('#tagSwitch-2-hello')).toBe(0)\n    expect(elmCount('#tagSwitch-3-hello')).toBe(0)\n    expect(elmCount('#select-tag-above')).toBe(0)\n  })\n\n  it('2', () => {\n    const dropdown = byId('tag-switch-dropdown') as HTMLSelectElement\n\n    dropdown.value = \"2\"\n    ;(dropdown as any).onchange({target:dropdown})\n\n    expectElmCount('#tagSwitch-1-hello', 2)\n    expectElmCount('#tagSwitch-2-hello', 4)\n    expect(elmCount('#tagSwitch-3-hello')).toBe(0)\n    expect(elmCount('#select-tag-above')).toBe(0)\n  })\n\n  it('3', () => {\n    const dropdown = byId('tag-switch-dropdown') as HTMLSelectElement\n    dropdown.value = \"3\"\n    ;(dropdown as any).onchange({target:dropdown})\n\n    expect(elmCount('#tagSwitch-1-hello')).toBe(0,'Expected no hello 1s')\n    expect(elmCount('#tagSwitch-2-hello')).toBe(0)\n    expectElmCount('#tagSwitch-3-hello', 7)\n    expect(elmCount('#select-tag-above')).toBe(0)\n  })\n\n  it('4', () => {  \n    const dropdown = byId('tag-switch-dropdown') as HTMLSelectElement\n    dropdown.value = \"\"\n    ;(dropdown as any).onchange({target:dropdown})\n\n    expectElmCount('#select-tag-above',1)\n    expectElmCount('#tag-switch-dropdown',1)\n    expectElmCount('#tagSwitch-1-hello',2)\n    expectElmCount('#tagSwitch-2-hello',0)\n    expectElmCount('#tagSwitch-3-hello',0)\n  })\n})\n","import { byId, click, clickOne, focus, query } from \"./elmSelectors\"\nimport { describe, expect, it } from \"./expect\"\n\ndescribe('todos', () => {\n  const todoInput = byId('todo-input') as HTMLInputElement\n\n  it('add one remove one', () => {\n    expect(query('button[data-testid=\"todo-item-button\"]').length).toBe(0)\n    \n    todoInput.value = 'one'\n    ;(todoInput as any).onkeydown({key:'Enter', target: todoInput})\n    expect(query('button[data-testid=\"todo-item-button\"]').length).toBe(1)\n\n    // delete it\n    click('button[data-testid=\"todo-item-button\"]')\n    expect(query('button[data-testid=\"todo-item-button\"]').length).toBe(0)\n  })  \n  \n  it('basic', () => {\n    todoInput.value = 'one'\n    ;(todoInput as any).onkeydown({key:'Enter', target: todoInput})\n    // checkbox toggle\n    click('input[data-testid=\"todo-item-toggle\"]')\n\n    // delete it\n    click('button[data-testid=\"todo-item-button\"]')\n    expect(query('button[data-testid=\"todo-item-button\"]').length).toBe(0)\n\n    todoInput.value = 'one'\n    ;(todoInput as any).onkeydown({key:'Enter', target: todoInput})\n\n    todoInput.value = 'two'\n    ;(todoInput as any).onkeydown({key:'Enter', target: todoInput})\n    const todoToggle2 = query('input[data-testid=\"todo-item-toggle\"]')[1] as HTMLInputElement\n    todoToggle2.click()\n    expect(todoToggle2.checked).toBe(true)\n\n    todoInput.value = 'three'\n    ;(todoInput as any).onkeydown({key:'Enter', target: todoInput})\n    \n    expect(query('input[data-testid=\"todo-item-toggle\"]').length).toBe(3)\n\n    // delete 0\n    clickOne('button[data-testid=\"todo-item-button\"]')\n    expect(query('input[data-testid=\"todo-item-toggle\"]').length).toBe(2)\n\n    // delete 0\n    clickOne('button[data-testid=\"todo-item-button\"]')\n    expect(query('input[data-testid=\"todo-item-toggle\"]').length).toBe(1)\n\n    // delete 0\n    clickOne('button[data-testid=\"todo-item-button\"]')\n    expect(query('input[data-testid=\"todo-item-toggle\"]').length).toBe(0)\n  })\n\n  it('editing', () => {\n    // create todo\n    todoInput.value = 'one'\n    ;(todoInput as any).onkeydown({key:'Enter', target: todoInput})\n    \n    // prepare to make new todo become editable\n    let event = new MouseEvent('dblclick', {\n      bubbles: true,       // Event will bubble up through the DOM\n      cancelable: true,    // Event can be cancelled\n      view: window         // Default view (window)\n    });\n\n    // Dispatch the event on the specified element\n    query('label[data-testid=\"todo-item-label\"]')[0].dispatchEvent(event);\n    focus('input[data-testid=\"text-input\"]')\n\n    const editInput = query('input[data-testid=\"text-input\"]')[1] as any\n    editInput.value = 'two'\n    editInput.onkeydown({key:'Enter', target: editInput}) // cause save\n\n    expect(query('input[data-testid=\"text-input\"]').length).toBe(1)\n\n    // delete 0\n    clickOne('button[data-testid=\"todo-item-button\"]')\n    expect(query('label[data-testid=\"todo-item-label\"]').length).toBe(0)\n  })\n})\n","import { click, html, htmlById } from \"./elmSelectors\"\nimport { describe, expect, it } from \"./expect\"\nimport { expectMatchedHtml } from \"./expect.html\"\n\ndescribe(' watch tests', () => {\n  const slowCount = html('#-slowChangeCount')\n  // tests can be run multiple times. Only the first time will this expect below work\n  const firstRun = slowCount === '0'\n\n  it('basic', () => {\n    const startCount = Number(htmlById('watch-testing-num-display'))\n\n    expectMatchedHtml('#watch-testing-num-display', '#-slowChangeCount')\n    \n    // always starts at \"false\"\n    expect(html('#-truthChange')).toBe('false')\n        \n    if(firstRun) {\n      expect(html('#-watchPropNumSlow')).toBe('')\n      expect(html('#-watchTruth')).toBe('false')\n      expect(html('#-watchTruthAsSub')).toBe('undefined')\n    } else {\n      expect(html('#-watchPropNumSlow')).toBe( slowCount )\n      expect( Number(html('#-watchTruth')) ).toBeGreaterThan( Number(slowCount) )\n      expect(html('#-watchTruthAsSub')).toBe( html('#-truthSubChangeCount') )\n    }\n\n    click('#watch-testing-num-button')\n    \n    expectMatchedHtml('#watch-testing-num-display', '#-slowChangeCount')\n    expectMatchedHtml('#-watchPropNumSlow', '#-slowChangeCount')\n    \n    expect(html('#-subjectChangeCount')).toBe( (startCount + 2).toString() )\n    expectMatchedHtml('#-subjectChangeCount', '#-watchPropNumSubject')\n    \n    const truthStartCount = Number(html('#-truthChangeCount'))\n\n    click('#-truthChange-button')\n\n    let newCount = (truthStartCount + 1).toString()\n    // its been changed to \"true\", that causes a change watch count increase\n    expect(html('#-truthChange')).toBe('true')\n    expect(html('#-watchTruth')).toBe( newCount )\n    expect(html('#-truthChangeCount')).toBe( newCount )\n\n    click('#-truthChange-button')\n\n    newCount = (truthStartCount + 1).toString()\n    // its been changed to back to \"false\", that does NOT cause a change watch count increase\n    expect(html('#-truthChange')).toBe('false')\n    expect(html('#-watchTruth')).toBe(newCount)\n    expect(html('#-truthChangeCount')).toBe( newCount )\n\n    click('#-truthChange-button')\n\n    // its been changed to \"true\", that causes a change watch count increase\n    newCount = (truthStartCount + 2).toString()\n    expect(html('#-truthChange')).toBe('true')\n    expect(html('#-watchTruth')).toBe(newCount)\n    expect(html('#-truthChangeCount')).toBe( newCount )\n\n    click('#-truthChange-button') // reset so tests can pass every time\n    click('#-reset-button') // reset so tests can pass every time\n\n    expect(html('#-watchTruthAsSub')).toBe(html('#-watchTruth'))\n  })\n})\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export var ValueTypes;\n(function (ValueTypes) {\n    ValueTypes[\"unknown\"] = \"unknown\";\n    ValueTypes[\"tag\"] = \"tag\";\n    ValueTypes[\"templater\"] = \"templater\";\n    ValueTypes[\"tagComponent\"] = \"tag-component\";\n    ValueTypes[\"tagArray\"] = \"tag-array\";\n    ValueTypes[\"subject\"] = \"subject\";\n    ValueTypes[\"date\"] = \"date\";\n    ValueTypes[\"string\"] = \"string\";\n    ValueTypes[\"boolean\"] = \"boolean\";\n    ValueTypes[\"function\"] = \"function\";\n    ValueTypes[\"undefined\"] = \"undefined\";\n})(ValueTypes || (ValueTypes = {}));\n//# sourceMappingURL=ValueTypes.enum.js.map","import { ValueTypes } from './tag/ValueTypes.enum.js';\nexport function isStaticTag(value) {\n    return [\n        ValueTypes.tag,\n        ValueTypes.templater,\n    ].includes(value?.tagJsType);\n}\nexport function isTagTemplater(value) {\n    return value?.tagJsType === ValueTypes.templater;\n}\n// TODO: whats the difference between isTagClass and isTagComponent\nexport function isTagComponent(value) {\n    return value?.tagJsType === ValueTypes.tagComponent;\n}\nexport function isTagClass(value) {\n    return value?.tagJsType === ValueTypes.tag;\n}\n// isSubjectLike\nexport function isSubjectInstance(subject) {\n    return (subject?.isSubject === true || subject?.subscribe) ? true : false; // subject?.isSubject === true || \n}\nexport function isTagArray(value) {\n    return value instanceof Array && value.every(x => [\n        ValueTypes.tag, ValueTypes.templater, ValueTypes.tag, ValueTypes.tagComponent\n    ].includes(x?.tagJsType));\n}\n//# sourceMappingURL=isInstance.js.map","import { Subject } from './Subject.class.js';\nexport function combineLatest(subjects) {\n    const output = new Subject();\n    const subscribe = (callback) => {\n        const valuesSeen = [];\n        const values = [];\n        const setValue = (x, index) => {\n            valuesSeen[index] = true;\n            values[index] = x;\n            const countMatched = valuesSeen.length === subjects.length;\n            if (!countMatched) {\n                return;\n            }\n            for (let index = valuesSeen.length - 1; index >= 0; --index) {\n                if (!valuesSeen[index]) {\n                    return;\n                }\n            }\n            // everyone has reported values\n            callback(values, subscription);\n        };\n        const clones = [...subjects];\n        const firstSub = clones.shift();\n        const subscription = firstSub.subscribe(x => setValue(x, 0));\n        const subscriptions = clones.map((subject, index) => subject.subscribe(x => setValue(x, index + 1)));\n        subscription.subscriptions = subscriptions;\n        return subscription;\n    };\n    output.subscribeWith = subscribe;\n    return output;\n}\n//# sourceMappingURL=combineLatest.function.js.map","import { Subject } from './Subject.class.js';\nfunction removeSubFromArray(subscribers, callback) {\n    const index = subscribers.findIndex(sub => sub.callback === callback);\n    if (index !== -1) {\n        subscribers.splice(index, 1);\n    }\n}\nexport function getSubscription(subject, callback, subscribers) {\n    const countSubject = Subject.globalSubCount$;\n    Subject.globalSubCount$.next(countSubject._value + 1);\n    const subscription = () => {\n        subscription.unsubscribe();\n    };\n    subscription.callback = callback;\n    subscription.subscriptions = [];\n    // Return a function to unsubscribe from the BehaviorSubject\n    subscription.unsubscribe = () => {\n        removeSubFromArray(subscribers, callback); // each will be called when update comes in\n        // removeSubFromArray(Subject.globalSubs, callback) //  testing\n        Subject.globalSubCount$.next(countSubject._value - 1);\n        // any double unsubscribes will be ignored\n        subscription.unsubscribe = () => subscription;\n        // unsubscribe from any combined subjects\n        const subscriptions = subscription.subscriptions;\n        for (let index = subscriptions.length - 1; index >= 0; --index) {\n            subscriptions[index].unsubscribe();\n        }\n        return subscription;\n    };\n    subscription.add = (sub) => {\n        subscription.subscriptions.push(sub);\n        return subscription;\n    };\n    subscription.next = (value) => {\n        callback(value, subscription);\n    };\n    return subscription;\n}\nexport function runPipedMethods(value, methods, onComplete) {\n    const cloneMethods = [...methods];\n    const firstMethod = cloneMethods.shift();\n    const next = (newValue) => {\n        if (cloneMethods.length) {\n            return runPipedMethods(newValue, cloneMethods, onComplete);\n        }\n        onComplete(newValue);\n    };\n    let handler = next;\n    const setHandler = (x) => handler = x;\n    const pipeUtils = { setHandler, next };\n    const methodResponse = firstMethod(value, pipeUtils);\n    handler(methodResponse);\n}\n//# sourceMappingURL=subject.utils.js.map","import { isSubjectInstance } from '../isInstance.js';\nimport { combineLatest } from './combineLatest.function.js';\nimport { getSubscription, runPipedMethods } from './subject.utils.js';\nexport class Subject {\n    value;\n    onSubscription;\n    // private?\n    methods = [];\n    isSubject = true;\n    // private?\n    subscribers = [];\n    subscribeWith;\n    _value;\n    // this is overwritten by constructor at runtime. However having it helps editors know of its existence\n    set; // `subject.set = x` equal to `subject.next(x)`\n    constructor(value, \n    // private?\n    onSubscription) {\n        this.value = value;\n        this.onSubscription = onSubscription;\n        this._value = value;\n        defineValueOn(this);\n    }\n    subscribe(callback) {\n        const subscription = getSubscription(this, callback, this.subscribers);\n        // are we within a pipe?\n        const subscribeWith = this.subscribeWith;\n        if (subscribeWith) {\n            // are we in a pipe?\n            if (this.methods.length) {\n                const orgCallback = callback;\n                callback = (value) => {\n                    runPipedMethods(value, this.methods, lastValue => orgCallback(lastValue, subscription));\n                };\n            }\n            return subscribeWith(callback);\n        }\n        this.subscribers.push(subscription);\n        if (this.onSubscription) {\n            this.onSubscription(subscription);\n        }\n        return subscription;\n    }\n    next(value) {\n        this._value = value;\n        this.emit();\n    }\n    emit() {\n        const value = this._value;\n        // Notify all subscribers with the new value\n        const subs = [...this.subscribers]; // subs may change as we call callbacks\n        const length = subs.length;\n        for (let index = 0; index < length; ++index) {\n            const sub = subs[index];\n            sub.callback(value, sub);\n        }\n    }\n    toPromise() {\n        return new Promise(res => {\n            this.subscribe((x, subscription) => {\n                subscription.unsubscribe();\n                res(x);\n            });\n        });\n    }\n    /** like toPromise but faster */\n    toCallback(callback) {\n        const subscription = this.subscribe((x, _subscription) => {\n            subscription.unsubscribe();\n            callback(x);\n        });\n        return this;\n    }\n    pipe(...operations) {\n        const subject = new Subject(this._value);\n        subject.setMethods(operations);\n        subject.subscribeWith = (x) => this.subscribe(x);\n        subject.next = x => this.next(x);\n        return subject;\n    }\n    setMethods(operations) {\n        this.methods = operations;\n    }\n    static all(args) {\n        const switched = args.map(arg => {\n            if (isSubjectInstance(arg))\n                return arg;\n            // Call the callback immediately with the current value\n            const x = new Subject(arg, subscription => {\n                subscription.next(arg);\n                return subscription;\n            });\n            return x;\n        });\n        return combineLatest(switched);\n    }\n    static globalSubCount$ = new Subject(0); // for ease of debugging\n}\nexport function defineValueOn(subject) {\n    Object.defineProperty(subject, 'value', {\n        // supports subject.value = x\n        set(value) {\n            subject._value = value;\n            subject.emit();\n        },\n        // supports subject.value\n        get() {\n            return subject._value;\n        }\n    });\n    Object.defineProperty(subject, 'set', {\n        // supports subject.set = x\n        set: (value) => subject.next(value),\n        // supports subject.set(x)\n        get: () => (x) => subject.next(x),\n    });\n}\n//# sourceMappingURL=Subject.class.js.map","import { Subject, defineValueOn } from './Subject.class.js';\nexport class ValueSubject extends Subject {\n    value;\n    constructor(value) {\n        super(value);\n        this.value = value;\n        defineValueOn(this);\n    }\n    subscribe(callback) {\n        const subscription = super.subscribe(callback);\n        // Call the callback immediately with the current value\n        callback(this._value, subscription);\n        return subscription;\n    }\n}\n//# sourceMappingURL=ValueSubject.js.map","import { setUse } from '../state/index.js';\nexport function getSupportInCycle() {\n    return setUse.memory.stateConfig.tagSupport;\n}\n//# sourceMappingURL=getSupportInCycle.function.js.map","const tagUse = [];\nexport function setUse(use) {\n    // must provide defaults\n    const useMe = {\n        beforeRender: use.beforeRender || (() => undefined),\n        beforeRedraw: use.beforeRedraw || (() => undefined),\n        afterRender: use.afterRender || (() => undefined),\n        beforeDestroy: use.beforeDestroy || (() => undefined),\n    };\n    setUse.tagUse.push(useMe);\n}\nsetUse.tagUse = tagUse;\nsetUse.memory = {};\n//# sourceMappingURL=setUse.function.js.map","export class TagError extends Error {\n    details;\n    constructor(message, errorCode, details = {}) {\n        super(message);\n        this.name = TagError.name;\n        this.details = { ...details, errorCode };\n    }\n}\nexport class ArrayNoKeyError extends TagError {\n    constructor(message, details) {\n        super(message, 'array-no-key-error', details);\n        this.name = ArrayNoKeyError.name;\n    }\n}\nexport class StateMismatchError extends TagError {\n    constructor(message, details) {\n        super(message, 'state-mismatch-error', details);\n        this.name = StateMismatchError.name;\n    }\n}\nexport class SyncCallbackError extends TagError {\n    constructor(message, details) {\n        super(message, 'sync-callback-error', details);\n        this.name = SyncCallbackError.name;\n    }\n}\n//# sourceMappingURL=errors.js.map","import { StateMismatchError } from '../errors.js';\nimport { setUse } from './setUse.function.js';\nsetUse.memory.stateConfig = {\n    array: [], // state memory on the first render\n    // rearray: [] as State,\n};\nconst beforeRender = (tagSupport) => initState(tagSupport);\nsetUse({\n    beforeRender,\n    beforeRedraw: beforeRender,\n    afterRender: (tagSupport) => {\n        const memory = tagSupport.memory;\n        const config = setUse.memory.stateConfig;\n        const rearray = config.rearray;\n        if (rearray.length) {\n            if (rearray.length !== config.array.length) {\n                const message = `States lengths have changed ${rearray.length} !== ${config.array.length}. State tracking requires the same amount of function calls every render. Typically this errors is thrown when a state like function call occurs only for certain conditions or when a function is intended to be wrapped with a tag() call`;\n                const wrapper = tagSupport.templater?.wrapper;\n                const details = {\n                    oldStates: config.array,\n                    newStates: config.rearray,\n                    tagFunction: wrapper.parentWrap.original,\n                };\n                const error = new StateMismatchError(message, details);\n                console.warn(message, details);\n                throw error;\n            }\n        }\n        delete config.rearray; // clean up any previous runs\n        delete config.tagSupport;\n        memory.state.length = 0;\n        memory.state.push(...config.array);\n        const state = memory.state;\n        for (let index = state.length - 1; index >= 0; --index) {\n            const item = state[index];\n            item.lastValue = getStateValue(item); // set last values\n        }\n        config.array = [];\n    }\n});\nexport function getStateValue(state) {\n    const callback = state.callback;\n    if (!callback) {\n        return state.defaultValue;\n    }\n    const [value, checkValue] = getCallbackValue(callback);\n    if (checkValue !== StateEchoBack) {\n        const message = 'letState function incorrectly used. Second item in array is not setting expected value.\\n\\n' +\n            'For \"let\" state use `let name = state(default)(x => [name, name = x])`\\n\\n' +\n            'For \"const\" state use `const name = state(default)()`\\n\\n' +\n            'Problem state:\\n' + (callback ? callback.toString() : JSON.stringify(state)) + '\\n';\n        console.error(message, { state, callback, value, checkValue });\n        throw new Error(message);\n    }\n    return value;\n}\nexport class StateEchoBack {\n}\nfunction initState(tagSupport) {\n    const memory = tagSupport.memory;\n    const state = memory.state;\n    const config = setUse.memory.stateConfig;\n    config.rearray = [];\n    const stateLength = state?.length;\n    if (stateLength) {\n        for (let index = 0; index < stateLength; ++index) {\n            getStateValue(state[index]);\n        }\n        config.rearray.push(...state);\n    }\n    config.tagSupport = tagSupport;\n}\nexport function getCallbackValue(callback) {\n    const oldState = callback(StateEchoBack); // get value and set to undefined\n    const [value] = oldState;\n    const [checkValue] = callback(value); // set back to original value\n    return [value, checkValue];\n}\n//# sourceMappingURL=state.utils.js.map","export function syncStates(stateFrom, stateTo) {\n    for (let index = stateFrom.length - 1; index >= 0; --index) {\n        const state = stateFrom[index];\n        const fromValue = state.get();\n        const callback = stateTo[index].callback;\n        if (callback) {\n            callback(fromValue); // set the value\n        }\n        stateTo[index].lastValue = fromValue; // record the value\n    }\n}\n//# sourceMappingURL=syncStates.function.js.map","import { setUse } from './setUse.function.js';\nimport { getStateValue } from './state.utils.js';\nimport { syncStates } from './syncStates.function.js';\n/** Used for variables that need to remain the same variable during render passes */\nexport function state(defaultValue) {\n    const config = setUse.memory.stateConfig;\n    let getSetMethod;\n    const rearray = config.rearray;\n    const restate = rearray[config.array.length];\n    if (restate) {\n        let oldValue = getStateValue(restate);\n        getSetMethod = ((x) => [oldValue, oldValue = x]);\n        const push = {\n            get: () => getStateValue(push),\n            callback: getSetMethod,\n            lastValue: oldValue,\n            defaultValue: restate.defaultValue,\n        };\n        config.array.push(push);\n        return oldValue;\n    }\n    // State first time run\n    const defaultFn = defaultValue instanceof Function ? defaultValue : () => defaultValue;\n    let initValue = defaultFn();\n    // the state is actually intended to be a function\n    if (initValue instanceof Function) {\n        const oldState = config.array;\n        const tagSupport = config.tagSupport;\n        const original = initValue;\n        initValue = ((...args) => {\n            const global = tagSupport.global;\n            const newest = global.newest;\n            const newState = newest.memory.state;\n            syncStates(newState, oldState);\n            const result = original(...args);\n            syncStates(oldState, newState);\n            return result;\n        });\n        initValue.original = original;\n    }\n    getSetMethod = ((x) => [initValue, initValue = x]);\n    const push = {\n        get: () => getStateValue(push),\n        callback: getSetMethod,\n        lastValue: initValue,\n        defaultValue: initValue,\n    };\n    config.array.push(push);\n    return initValue;\n}\n//# sourceMappingURL=state.function.js.map","import { ValueSubject } from '../subject/index.js';\nimport { getSupportInCycle } from '../tag/getSupportInCycle.function.js';\nimport { setUse } from './setUse.function.js';\nimport { state } from './state.function.js';\nimport { syncStates } from './syncStates.function.js';\n/**\n * When an item in watch array changes, callback function will be triggered. Triggers on initial watch setup. TIP: try watch.noInit()\n * @param currentValues T[]\n * @param callback WatchCallback\n * @returns T[]\n */\nexport const watch = ((currentValues, callback) => {\n    return setupWatch(currentValues, callback);\n});\nconst defaultFinally = (x) => x;\nfunction newWatch(setup) {\n    const method = (currentValues, callback) => {\n        return setupWatch(currentValues, callback, setup);\n    };\n    method.setup = setup;\n    defineOnMethod(() => method, method);\n    return method;\n}\n/**\n * puts above functionality together\n * @param currentValues values being watched\n * @param callback (currentValue, previousValues) => resolveToValue\n * @param param2\n * @returns\n */\nconst setupWatch = (currentValues, callback, { init, before = () => true, final = defaultFinally, } = {}) => {\n    let previous = state({\n        pastResult: undefined,\n        values: undefined,\n    });\n    const previousValues = previous.values;\n    // First time running watch?\n    if (previousValues === undefined) {\n        if (!before(currentValues)) {\n            previous.values = currentValues;\n            return previous.pastResult; // do not continue\n        }\n        const castedInit = init || callback;\n        const result = castedInit(currentValues, previousValues);\n        previous.pastResult = final(result);\n        previous.values = currentValues;\n        return previous.pastResult;\n    }\n    const allExact = currentValues.every((item, index) => item === previousValues[index]);\n    if (allExact) {\n        return previous.pastResult;\n    }\n    if (!before(currentValues)) {\n        previous.values = currentValues;\n        return previous.pastResult; // do not continue\n    }\n    const result = callback(currentValues, previousValues);\n    previous.pastResult = final(result);\n    previousValues.length = 0;\n    previousValues.push(...currentValues);\n    return previous.pastResult;\n};\nfunction defineOnMethod(getWatch, attachTo) {\n    Object.defineProperty(attachTo, 'noInit', {\n        get() {\n            const watch = getWatch();\n            watch.setup.init = () => undefined;\n            return watch;\n        },\n    });\n    Object.defineProperty(attachTo, 'asSubject', {\n        get() {\n            const oldWatch = getWatch();\n            const firstSupport = state(() => getSupportInCycle());\n            const subject = state(() => new ValueSubject(undefined));\n            const method = (currentValues, callback) => {\n                setupWatch(currentValues, (currentValues, previousValues) => {\n                    const nowTagSupport = getSupportInCycle();\n                    const setTo = callback(currentValues, previousValues);\n                    if (nowTagSupport !== firstSupport) {\n                        const newestState = setUse.memory.stateConfig.array;\n                        syncStates(newestState, firstSupport.memory.state);\n                    }\n                    subject.next(setTo);\n                }, oldWatch.setup);\n                return subject;\n            };\n            method.setup = oldWatch.setup;\n            defineOnMethod(() => method, method);\n            return method;\n        },\n    });\n    Object.defineProperty(attachTo, 'truthy', {\n        get() {\n            const watch = getWatch();\n            watch.setup.before = (currentValues) => currentValues.every(x => x);\n            return watch;\n        },\n    });\n    return attachTo;\n}\ndefineOnMethod(() => newWatch({}), watch);\n//# sourceMappingURL=watch.function.js.map","import { Subject, ValueSubject } from '../subject/index.js';\nimport { getSupportInCycle } from '../tag/getSupportInCycle.function.js';\nimport { setUse } from './setUse.function.js';\nimport { state } from './state.function.js';\nimport { syncStates } from './syncStates.function.js';\n/** Create a Subject that on updates will sync state values to keep chained functions using latest variables */\nexport function subject(value, onSubscription) {\n    const oldestState = state(() => setUse.memory.stateConfig.array);\n    const nowTagSupport = getSupportInCycle();\n    return state(() => {\n        const subject = new Subject(value, onSubscription).pipe(x => {\n            syncStates(nowTagSupport.memory.state, oldestState);\n            return x;\n        });\n        return subject;\n    });\n}\nsubject._value = (value) => {\n    const oldestState = state(() => setUse.memory.stateConfig.array);\n    const nowTagSupport = getSupportInCycle();\n    return state(() => {\n        const subject = new ValueSubject(value).pipe(x => {\n            syncStates(nowTagSupport.memory.state, oldestState);\n            return x;\n        });\n        return subject;\n    });\n};\nfunction all(args) {\n    const oldestState = state(() => setUse.memory.stateConfig.array);\n    const nowTagSupport = getSupportInCycle();\n    return Subject.all(args).pipe(x => {\n        syncStates(nowTagSupport.memory.state, oldestState);\n        return x;\n    });\n}\nsubject.all = all;\n//# sourceMappingURL=subject.function.js.map","import { getStateValue } from './state.utils.js';\nimport { setUse } from './setUse.function.js';\n/** Used for variables that need to remain the same variable during render passes. If defaultValue is a function it is called only once, its return value is first state, and let value can changed */\nexport function letState(defaultValue) {\n    const config = setUse.memory.stateConfig;\n    const rearray = config.rearray;\n    let getSetMethod;\n    const restate = rearray[config.array.length];\n    if (restate) {\n        let oldValue = getStateValue(restate);\n        getSetMethod = ((x) => [oldValue, oldValue = x]);\n        const push = {\n            get: () => getStateValue(push),\n            callback: getSetMethod,\n            lastValue: oldValue,\n            defaultValue: restate.defaultValue,\n        };\n        config.array.push(push);\n        return makeStateResult(oldValue, push);\n    }\n    // State first time run\n    const defaultFn = defaultValue instanceof Function ? defaultValue : () => defaultValue;\n    let initValue = defaultFn();\n    getSetMethod = ((x) => [initValue, initValue = x]);\n    const push = {\n        get: () => getStateValue(push),\n        callback: getSetMethod,\n        lastValue: initValue,\n        defaultValue: initValue,\n    };\n    config.array.push(push);\n    return makeStateResult(initValue, push);\n}\nfunction makeStateResult(initValue, push) {\n    // return initValue\n    const result = (y) => {\n        push.callback = y || (x => [initValue, initValue = x]);\n        return initValue;\n    };\n    return result;\n}\n//# sourceMappingURL=letState.function.js.map","export function deepClone(obj) {\n    return makeDeepClone(obj, new WeakMap());\n}\nfunction makeDeepClone(obj, visited) {\n    // If obj is a primitive type or null, return it directly\n    if (obj === null || typeof obj !== 'object') {\n        return obj;\n    }\n    // If obj is already visited, return the cloned reference\n    if (visited.has(obj)) {\n        return visited.get(obj);\n    }\n    // Handle special cases like Date and RegExp\n    if (obj instanceof Date) {\n        return new Date(obj);\n    }\n    if (obj instanceof RegExp) {\n        return new RegExp(obj);\n    }\n    // Create an empty object or array with the same prototype\n    const clone = Array.isArray(obj) ? [] : Object.create(Object.getPrototypeOf(obj));\n    // Register the cloned object to avoid cyclic references\n    visited.set(obj, clone);\n    // Clone each property or element of the object or array\n    if (Array.isArray(obj)) {\n        for (let i = 0; i < obj.length; i++) {\n            clone[i] = makeDeepClone(obj[i], visited);\n        }\n    }\n    else {\n        for (const key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                clone[key] = makeDeepClone(obj[key], visited);\n            }\n        }\n    }\n    return clone;\n}\nexport function deepEqual(obj1, obj2) {\n    return isDeepEqual(obj1, obj2, new WeakMap());\n}\nfunction isDeepEqual(obj1, obj2, visited) {\n    const directEqual = obj1 === obj2;\n    if (directEqual || isSameFunctions(obj1, obj2)) {\n        return true;\n    }\n    // If obj is already visited, return the cloned reference\n    if (visited.has(obj1)) {\n        return true;\n    }\n    if (typeof obj1 === 'object' && typeof obj2 === 'object') {\n        // both are dates and were already determined not the same\n        if (obj1 instanceof Date && obj2 instanceof Date) {\n            return obj1.getTime() === obj2.getTime();\n        }\n        // Register the cloned object to avoid cyclic references\n        visited.set(obj1, 0);\n        // Check if obj1 and obj2 are both arrays\n        if (Array.isArray(obj1) && Array.isArray(obj2)) {\n            return isArrayDeepEqual(obj1, obj2, visited);\n        }\n        else if (Array.isArray(obj1) || Array.isArray(obj2)) {\n            // One is an array, and the other is not\n            return false;\n        }\n        return isObjectDeepEqual(obj1, obj2, visited);\n    }\n    return false;\n}\nfunction isObjectDeepEqual(obj1, obj2, visited) {\n    const keys1 = Object.keys(obj1);\n    const keys2 = Object.keys(obj2);\n    if (keys1.length === 0 && keys2.length === 0) {\n        return true;\n    }\n    if (keys1.length !== keys2.length) {\n        return false;\n    }\n    for (const key of keys1) {\n        const keyFound = keys2.includes(key);\n        if (!keyFound || !isDeepEqual(obj1[key], obj2[key], visited)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction isArrayDeepEqual(obj1, obj2, visited) {\n    if (obj1.length !== obj2.length) {\n        return false;\n    }\n    for (let i = 0; i < obj1.length; i++) {\n        if (!isDeepEqual(obj1[i], obj2[i], visited)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction isSameFunctions(fn0, fn1) {\n    const bothFunction = fn0 instanceof Function && fn1 instanceof Function;\n    return bothFunction && fn0.toString() === fn1.toString();\n}\n//# sourceMappingURL=deepFunctions.js.map","import { deepClone } from '../deepFunctions.js';\nimport { setUse } from './setUse.function.js';\nimport { state } from './state.function.js';\nexport const providers = {\n    create: (constructMethod) => {\n        const stateDiffMemory = state(() => ({ stateDiff: 0, provider: undefined }));\n        // mimic how many states were called the first time\n        if (stateDiffMemory.stateDiff) {\n            for (let x = stateDiffMemory.stateDiff; x > 0; --x) {\n                state(undefined);\n            }\n            const result = state(undefined);\n            return result;\n        }\n        const result = state(() => {\n            const memory = setUse.memory;\n            const stateConfig = memory.stateConfig;\n            const oldStateCount = stateConfig.array.length;\n            // Providers with provider requirements just need to use providers.create() and providers.inject()\n            const instance = 'prototype' in constructMethod ? new constructMethod() : constructMethod();\n            const tagSupport = stateConfig.tagSupport;\n            const stateDiff = stateConfig.array.length - oldStateCount;\n            const provider = {\n                constructMethod,\n                instance,\n                clone: deepClone(instance),\n                stateDiff,\n                owner: tagSupport,\n                children: [],\n            };\n            stateDiffMemory.provider = provider;\n            tagSupport.global.providers.push(provider);\n            stateDiffMemory.stateDiff = stateDiff;\n            return instance;\n        });\n        const cm = constructMethod;\n        // const compareTo = cm.compareTo = cm.compareTo || cm.toString()\n        const compareTo = cm.compareTo = cm.toString();\n        stateDiffMemory.provider.constructMethod.compareTo = compareTo;\n        return result;\n    },\n    /**\n     * @template T\n     * @param {(new (...args: any[]) => T) | () => T} constructor\n     * @returns {T}\n     */\n    inject: (constructor) => {\n        // find once, return same every time after\n        return state(() => {\n            const memory = setUse.memory;\n            const cm = constructor;\n            const compareTo = cm.compareTo = cm.compareTo || constructor.toString();\n            const tagSupport = memory.stateConfig.tagSupport;\n            const providers = [];\n            let owner = {\n                ownerTagSupport: tagSupport.ownerTagSupport\n            };\n            while (owner.ownerTagSupport) {\n                const ownerProviders = owner.ownerTagSupport.global.providers;\n                const provider = ownerProviders.find(provider => {\n                    providers.push(provider);\n                    const constructorMatch = provider.constructMethod.compareTo === compareTo;\n                    if (constructorMatch) {\n                        return true;\n                    }\n                });\n                if (provider) {\n                    provider.clone = deepClone(provider.instance); // keep a copy of the latest before any change occur\n                    const tagSupport = memory.stateConfig.tagSupport;\n                    tagSupport.global.providers.push(provider);\n                    provider.children.push(tagSupport);\n                    return provider.instance;\n                }\n                owner = owner.ownerTagSupport; // cause reloop checking next parent\n            }\n            const msg = `Could not inject provider: ${constructor.name} ${constructor}`;\n            console.warn(`${msg}. Available providers`, providers);\n            throw new Error(msg);\n        });\n    }\n};\n//# sourceMappingURL=providers.js.map","export function isLikeTags(tagSupport0, // new\ntagSupport1) {\n    const templater0 = tagSupport0.templater;\n    const templater1 = tagSupport1.templater;\n    const tag0 = templater0?.tag || tagSupport0;\n    const tag1 = templater1.tag;\n    const strings0 = tag0.strings;\n    const strings1 = tagSupport1.strings || tag1.strings;\n    if (strings0.length !== strings1.length) {\n        return false;\n    }\n    const everyStringMatched = strings0.every((string, index) => strings1[index] === string);\n    if (!everyStringMatched) {\n        return false;\n    }\n    const values0 = tagSupport0.values || tag0.values;\n    const values1 = tagSupport1.values || tag1.values;\n    return isLikeValueSets(values0, values1);\n}\nexport function isLikeValueSets(values0, values1) {\n    const valuesLengthsMatch = values0.length === values1.length;\n    if (!valuesLengthsMatch) {\n        return false;\n    }\n    const allVarsMatch = values1.every((value, index) => {\n        const compareTo = values0[index];\n        const isFunctions = value instanceof Function && compareTo instanceof Function;\n        if (isFunctions) {\n            const stringMatch = value.toString() === compareTo.toString();\n            if (stringMatch) {\n                return true;\n            }\n            return false;\n        }\n        return true; // deepEqual(value, compareTo)\n    });\n    if (allVarsMatch) {\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=isLikeTags.function.js.map","import { setUse } from '../state/index.js';\nimport { Subject } from '../subject/index.js';\nimport { getSupportInCycle } from './getSupportInCycle.function.js';\n// Emits event at the end of a tag being rendered. Use tagClosed$.toPromise() to render a tag after a current tag is done rendering\nsetUse.memory.tagClosed$ = new Subject(undefined, subscription => {\n    if (!getSupportInCycle()) {\n        subscription.next(); // we are not currently processing so process now\n    }\n});\n// Life cycle 1\nexport function runBeforeRender(tagSupport, ownerSupport) {\n    const tagUse = setUse.tagUse;\n    const length = tagUse.length;\n    for (let index = 0; index < length; ++index) {\n        tagUse[index].beforeRender(tagSupport, ownerSupport);\n    }\n}\n// Life cycle 2\nexport function runAfterRender(tagSupport, ownerTagSupport) {\n    const tagUse = setUse.tagUse;\n    const length = tagUse.length;\n    for (let index = 0; index < length; ++index) {\n        tagUse[index].afterRender(tagSupport, ownerTagSupport);\n    }\n    setUse.memory.tagClosed$.next(ownerTagSupport);\n}\n// Life cycle 3\nexport function runBeforeRedraw(tagSupport, ownerTagSupport) {\n    const tagUse = setUse.tagUse;\n    const length = tagUse.length;\n    for (let index = 0; index < length; ++index) {\n        tagUse[index].beforeRedraw(tagSupport, ownerTagSupport);\n    }\n}\n// Life cycle 4 - end of life\nexport function runBeforeDestroy(tagSupport, ownerTagSupport) {\n    const tagUse = setUse.tagUse;\n    const length = tagUse.length;\n    for (let index = 0; index < length; ++index) {\n        tagUse[index].beforeDestroy(tagSupport, ownerTagSupport);\n    }\n    tagSupport.global.deleted = true;\n    tagSupport.hasLiveElements = false;\n    // remove me from my parents\n    if (ownerTagSupport) {\n        ownerTagSupport.global.childTags = ownerTagSupport.global.childTags.filter(child => child !== tagSupport.global.oldest);\n        const global = tagSupport.global;\n        global.providers.forEach(provider => provider.children.forEach((child, index) => {\n            if (child.global === global) {\n                provider.children.splice(index, 1);\n            }\n        }));\n    }\n}\n//# sourceMappingURL=tagRunner.js.map","import { runBeforeRedraw, runBeforeRender } from '../tagRunner.js';\nimport { runAfterRender } from '../tagRunner.js';\nexport function renderTagOnly(newTagSupport, prevSupport, subject, ownerSupport) {\n    const oldRenderCount = newTagSupport.global.renderCount;\n    beforeWithRender(newTagSupport, ownerSupport, prevSupport);\n    const templater = newTagSupport.templater;\n    // NEW TAG CREATED HERE\n    const wrapper = templater.wrapper;\n    let reSupport = wrapper(newTagSupport, subject);\n    /* AFTER */\n    runAfterRender(newTagSupport, ownerSupport);\n    newTagSupport.global.newest = reSupport;\n    if (!prevSupport && ownerSupport) {\n        ownerSupport.global.childTags.push(reSupport);\n    }\n    // When we rendered, only 1 render should have taken place OTHERWISE rendering caused another render and that is the latest instead\n    if (reSupport.global.renderCount > oldRenderCount + 1) {\n        return newTagSupport.global.newest;\n    }\n    return reSupport;\n}\nfunction beforeWithRender(tagSupport, // new\nparentSupport, prevSupport) {\n    const lastOwnerSupport = prevSupport?.ownerTagSupport;\n    const runtimeOwnerSupport = lastOwnerSupport || parentSupport;\n    if (prevSupport) {\n        if (prevSupport !== tagSupport) {\n            const lastState = prevSupport.memory.state;\n            const memory = tagSupport.memory;\n            tagSupport.global = prevSupport.global;\n            memory.state.length = 0;\n            memory.state.push(...lastState);\n        }\n        return runBeforeRedraw(tagSupport, prevSupport);\n    }\n    // first time render\n    return runBeforeRender(tagSupport, runtimeOwnerSupport);\n}\n//# sourceMappingURL=renderTagOnly.function.js.map","import { ValueTypes } from './ValueTypes.enum.js';\nexport const variablePrefix = '__tagvar';\nexport const escapeVariable = '--' + variablePrefix + '--';\nexport const escapeSearch = new RegExp(escapeVariable, 'g');\nexport class Tag {\n    strings;\n    values;\n    tagJsType = ValueTypes.tag;\n    // present only when an array. Populated by Tag.key()\n    memory = {};\n    templater;\n    constructor(strings, values) {\n        this.strings = strings;\n        this.values = values;\n    }\n    /** Used for array, such as array.map(), calls aka array.map(x => html``.key(x)) */\n    key(arrayValue) {\n        this.memory.arrayValue = arrayValue;\n        return this;\n    }\n    children;\n    html(strings, ...values) {\n        this.children = { strings, values };\n        return this;\n    }\n}\n//# sourceMappingURL=Tag.class.js.map","export function destroyTagMemory(oldTagSupport) {\n    // must destroy oldest which is tag with elements on stage\n    const oldest = oldTagSupport.global.oldest;\n    oldest.destroy();\n    oldTagSupport.global.context = {};\n}\n//# sourceMappingURL=destroyTag.function.js.map","// Function to insert element after reference element\nexport function insertAfter(newNode, referenceNode) {\n    const parentNode = referenceNode.parentNode;\n    parentNode.insertBefore(newNode, referenceNode.nextSibling);\n}\n//# sourceMappingURL=insertAfter.function.js.map","import { isStaticTag } from '../isInstance.js';\nimport { isLikeTags } from './isLikeTags.function.js';\nimport { destroyTagMemory } from './destroyTag.function.js';\nimport { insertAfter } from '../insertAfter.function.js';\nimport { ValueTypes } from './ValueTypes.enum.js';\nexport function checkDestroyPrevious(subject, // existing.value is the old value\nnewValue, insertBefore, valueType) {\n    const displaySubject = subject;\n    const hasLastValue = 'lastValue' in displaySubject;\n    const lastValue = displaySubject.lastValue; // TODO: we maybe able to use displaySubject.value and remove concept of lastValue\n    // was simple value but now something bigger\n    if (hasLastValue && lastValue !== newValue) {\n        // below is faster than using getValueType\n        const newType = typeof (newValue);\n        if (isSimpleType(newType) && typeof (lastValue) === newType) {\n            return false;\n        }\n        if (newValue instanceof Function && lastValue instanceof Function) {\n            return false;\n        }\n        destroySimpleValue(insertBefore, displaySubject);\n        return 'changed-simple-value';\n    }\n    const arraySubject = subject;\n    const wasArray = arraySubject.lastArray;\n    // no longer an array\n    if (wasArray && valueType !== ValueTypes.tagArray) {\n        const placeholderElm = arraySubject.placeholder;\n        delete arraySubject.lastArray;\n        delete arraySubject.placeholder;\n        insertAfter(insertBefore, placeholderElm);\n        for (let index = wasArray.length - 1; index >= 0; --index) {\n            const { tagSupport } = wasArray[index];\n            destroyArrayTag(tagSupport, { added: 0, removed: 0 });\n        }\n        return 'array';\n    }\n    const tagSubject = subject;\n    const lastSupport = tagSubject.tagSupport;\n    // no longer tag or component?\n    if (lastSupport) {\n        const isValueTag = isStaticTag(newValue);\n        const isSubjectTag = isStaticTag(subject._value);\n        const newTag = newValue;\n        if (isSubjectTag && isValueTag) {\n            // its a different tag now\n            if (!isLikeTags(newTag, lastSupport)) {\n                // put template back down\n                restoreTagMarker(lastSupport);\n                destroyTagMemory(lastSupport);\n                // delete lastSupport.global.deleted // ???\n                return 2;\n            }\n            return false;\n        }\n        if (valueType === ValueTypes.tagComponent) {\n            return false; // its still a tag component\n        }\n        if (newValue && newValue.oneRender) {\n            return false;\n        }\n        // put template back down\n        restoreTagMarker(lastSupport);\n        // destroy old component, value is not a component\n        destroyTagMemory(lastSupport);\n        // delete lastSupport.global.deleted // ???\n        return 'different-tag';\n    }\n    return false;\n}\nexport function isSimpleType(value) {\n    return ['string', 'number', 'boolean'].includes(value);\n}\nexport function destroyArrayTag(tagSupport, counts) {\n    tagSupport.destroy({\n        stagger: counts.removed++,\n    });\n    const insertBefore = tagSupport.global.insertBefore;\n    const parentNode = insertBefore.parentNode;\n    parentNode.removeChild(insertBefore);\n}\nfunction destroySimpleValue(insertBefore, // always a template tag\nsubject) {\n    const clone = subject.clone;\n    const parent = clone.parentNode;\n    // 1 put the template back down\n    parent.insertBefore(insertBefore, clone);\n    parent.removeChild(clone);\n    delete subject.clone;\n    delete subject.lastValue;\n}\nexport function restoreTagMarker(lastSupport) {\n    const insertBefore = lastSupport.global.insertBefore;\n    const global = lastSupport.global;\n    const placeholderElm = global.placeholder;\n    if (placeholderElm) {\n        insertAfter(insertBefore, placeholderElm);\n        delete global.placeholder;\n    }\n}\n//# sourceMappingURL=checkDestroyPrevious.function.js.map","import { isSimpleType } from './checkDestroyPrevious.function.js';\nimport { ValueTypes } from './ValueTypes.enum.js';\nimport { isSubjectInstance, isTagArray } from '../isInstance.js';\nexport function getValueType(value) {\n    if (value === undefined || value === null) {\n        return ValueTypes.undefined;\n    }\n    const type = typeof (value);\n    if (value instanceof Function) {\n        return ValueTypes.function;\n    }\n    if (type === 'object') {\n        if (value instanceof Date) {\n            return ValueTypes.date;\n        }\n        if (isSimpleType(type)) {\n            return type;\n        }\n        const tagJsType = value.tagJsType;\n        if (tagJsType) {\n            const included = [\n                ValueTypes.tagComponent,\n                ValueTypes.templater,\n                ValueTypes.tag,\n            ].includes(tagJsType);\n            if (included) {\n                return tagJsType;\n            }\n        }\n        if (isTagArray(value)) {\n            return ValueTypes.tagArray;\n        }\n        if (isSubjectInstance(value)) {\n            return ValueTypes.subject;\n        }\n    }\n    return ValueTypes.unknown;\n}\n//# sourceMappingURL=getValueType.function.js.map","import { deepClone } from '../deepFunctions.js';\nimport { ValueTypes } from './ValueTypes.enum.js';\nimport { getValueType } from './getValueType.function.js';\nexport function cloneValueArray(values) {\n    return values.map((value) => {\n        const tag = value;\n        switch (getValueType(value)) {\n            case ValueTypes.tagComponent:\n                const tagComponent = value;\n                return deepClone(tagComponent.props);\n            case ValueTypes.tag:\n            case ValueTypes.templater:\n                return cloneValueArray(tag.values);\n            case ValueTypes.tagArray:\n                return cloneValueArray(tag);\n        }\n        return deepClone(value);\n    });\n}\n//# sourceMappingURL=cloneValueArray.function.js.map","export function getChildTagsToDestroy(childTags, allTags = []) {\n    for (let index = childTags.length - 1; index >= 0; --index) {\n        const cTag = childTags[index];\n        allTags.push(cTag);\n        childTags.splice(index, 1);\n        getChildTagsToDestroy(cTag.global.childTags, allTags);\n    }\n    return allTags;\n}\n//# sourceMappingURL=destroy.support.js.map","import { Tag } from './Tag.class.js';\nimport { ValueSubject } from '../subject/index.js';\nimport { kidsToTagArraySubject } from './kidsToTagArraySubject.function.js';\nexport class TemplaterResult {\n    props;\n    tagJsType = 'templater';\n    tagged;\n    wrapper;\n    madeChildIntoSubject;\n    tag;\n    children = new ValueSubject([]);\n    arrayValue; // used for tag components used in arrays\n    constructor(props) {\n        this.props = props;\n    }\n    key(arrayValue) {\n        this.arrayValue = arrayValue;\n        return this;\n    }\n    html(strings, ...values) {\n        const children = new Tag(strings, values);\n        const childSubject = kidsToTagArraySubject(children, this);\n        this.children = childSubject;\n        return this;\n    }\n}\n//# sourceMappingURL=TemplaterResult.class.js.map","import { isSubjectInstance, isTagArray } from '../isInstance.js';\nimport { ValueSubject } from '../subject/ValueSubject.js';\nexport function kidsToTagArraySubject(children, templaterResult) {\n    if (isSubjectInstance(children)) {\n        return children;\n    }\n    const kidArray = children;\n    if (isTagArray(kidArray)) {\n        templaterResult.madeChildIntoSubject = true; // was converted into a subject\n        return new ValueSubject(children);\n    }\n    const kid = children;\n    if (kid) {\n        templaterResult.madeChildIntoSubject = true; // was converted into a subject\n        kid.memory.arrayValue = 0;\n        return new ValueSubject([kid]);\n    }\n    templaterResult.madeChildIntoSubject = true; // was converted into a subject\n    return new ValueSubject([]);\n}\n//# sourceMappingURL=kidsToTagArraySubject.function.js.map","import { ValueSubject } from '../../subject/ValueSubject.js';\nimport { TemplaterResult } from '../TemplaterResult.class.js';\nimport { TagSupport } from '../TagSupport.class.js';\nimport { ValueTypes } from '../ValueTypes.enum.js';\nimport { getValueType } from '../getValueType.function.js';\nexport function processNewValue(value, ownerSupport) {\n    const valueType = getValueType(value);\n    switch (valueType) {\n        case ValueTypes.tagComponent:\n            const tagSubject = new ValueSubject(value);\n            return tagSubject;\n        case ValueTypes.templater:\n            const templater = value;\n            const tag = templater.tag;\n            return processNewTag(tag, ownerSupport);\n        case ValueTypes.tag:\n            return processNewTag(value, ownerSupport);\n        case ValueTypes.subject:\n            return value;\n    }\n    return new ValueSubject(value);\n}\nfunction processNewTag(value, ownerSupport) {\n    const tag = value;\n    let templater = tag.templater;\n    if (!templater) {\n        templater = new TemplaterResult([]);\n        templater.tag = tag;\n        tag.templater = templater;\n    }\n    const subject = new ValueSubject(templater);\n    subject.tagSupport = new TagSupport(templater, ownerSupport, subject);\n    ownerSupport.global.childTags.push(subject.tagSupport);\n    return subject;\n}\n//# sourceMappingURL=processNewValue.function.js.map","export function setTagPlaceholder(global) {\n    const insertBefore = global.insertBefore;\n    return global.placeholder = swapInsertBefore(insertBefore);\n}\nexport function swapInsertBefore(insertBefore) {\n    const placeholder = document.createTextNode('');\n    const parentNode = insertBefore.parentNode;\n    parentNode.insertBefore(placeholder, insertBefore);\n    parentNode.removeChild(insertBefore);\n    return placeholder;\n}\n//# sourceMappingURL=setTagPlaceholder.function.js.map","export function specialAttribute(name, value, element) {\n    const names = name.split('.');\n    // style.position = \"absolute\"\n    if (names[0] === 'style') {\n        element.style[names[1]] = value;\n    }\n    // Example: class.width-full = \"true\"\n    if (names[0] === 'class') {\n        names.shift();\n        if (value) {\n            for (let index = 0; index < names.length; ++index) {\n                element.classList.add(names[index]);\n            }\n        }\n        else {\n            for (let index = 0; index < names.length; ++index) {\n                element.classList.remove(names[index]);\n            }\n        }\n    }\n}\n//# sourceMappingURL=specialAttribute.js.map","import { deepEqual } from '../deepFunctions.js';\n/**\n *\n * @param props\n * @param pastCloneProps\n * @returns WHEN number then props have changed. WHEN false props have not changed\n */\nexport function hasPropChanges(props, // natural props\npastCloneProps) {\n    /*\n    const isCommonEqual = props === undefined && props === compareToProps\n    if(isCommonEqual) {\n      return false\n    }\n    */\n    let castedProps = props;\n    let castedPastProps = pastCloneProps;\n    // check all prop functions match\n    if (typeof (props) === 'object') {\n        if (!pastCloneProps) {\n            return 3;\n        }\n        // castedProps = {...props}\n        castedProps = [...props];\n        // castedPastProps = {...(pastCloneProps || {})}\n        castedPastProps = [...(pastCloneProps || [])];\n        const allFunctionsMatch = castedProps.every((value, index) => {\n            let compare = castedPastProps[index];\n            if (value && typeof (value) === 'object') {\n                const subCastedProps = { ...value };\n                const subCompareProps = { ...compare || {} };\n                const matched = Object.entries(subCastedProps).every(([key, value]) => {\n                    return compareProps(value, subCompareProps[key], () => {\n                        delete subCastedProps[key]; // its a function and not needed to be compared\n                        delete subCompareProps[key]; // its a function and not needed to be compared\n                    });\n                });\n                return matched;\n            }\n            return compareProps(value, compare, () => {\n                castedProps.splice(index, 1);\n                castedPastProps.splice(index, 1);\n            });\n        });\n        if (!allFunctionsMatch) {\n            return 6; // a change has been detected by function comparisons\n        }\n    }\n    // const isEqual = deepEqual(castedPastProps, castedProps)\n    // return isEqual ? false : 7 // if equal then no changes\n    return false;\n}\n/** returning a number means true good comparison */\nfunction compareProps(value, compare, onDelete) {\n    if (!(value instanceof Function)) {\n        return deepEqual(value, compare) ? 4 : false;\n    }\n    const compareFn = compare;\n    if (!(compareFn instanceof Function)) {\n        return false; // its a function now but was not before\n    }\n    // ensure we are comparing apples to apples as function get wrapped\n    const compareOriginal = compare?.original;\n    if (compareOriginal) {\n        compare = compareOriginal;\n    }\n    const original = value.original;\n    if (original) {\n        value = value.original;\n    }\n    const valueString = value.toString();\n    const compareString = compare.toString();\n    if (valueString === compareString) {\n        onDelete();\n        return 3; // both are function the same\n    }\n    onDelete();\n    return 5;\n}\n//# sourceMappingURL=hasPropChanges.function.js.map","/** checks if previous support exists on subject or as a last global support. If first render, calls builder. Otherwise calls tagSupport.updateBy() */\nexport function processTagResult(tagSupport, subject, // used for recording past and current value\ninsertBefore, // <template end interpolate />\n{ counts, }) {\n    // *if appears we already have seen\n    const subjectTag = subject;\n    const lastSupport = subjectTag.tagSupport;\n    const prevSupport = lastSupport?.global.oldest || undefined;\n    const justUpdate = prevSupport;\n    if (prevSupport && justUpdate) {\n        return processTagResultUpdate(tagSupport, subjectTag, prevSupport);\n    }\n    tagSupport.buildBeforeElement(insertBefore, {\n        counts,\n    });\n    return tagSupport;\n}\nfunction processTagResultUpdate(tagSupport, subject, // used for recording past and current value\nprevSupport) {\n    // components\n    if (subject instanceof Function) {\n        const newSupport = subject(prevSupport);\n        prevSupport.updateBy(newSupport);\n        subject.tagSupport = newSupport;\n        return newSupport;\n    }\n    prevSupport.updateBy(tagSupport);\n    subject.tagSupport = tagSupport;\n    return tagSupport;\n}\n//# sourceMappingURL=processTagResult.function.js.map","import { processTagResult } from './processTagResult.function.js';\nimport { TagSupport } from '../TagSupport.class.js';\nimport { renderSubjectComponent } from '../render/renderSubjectComponent.function.js';\n/** create new support, connects globals to old support if one, and  */\nexport function processSubjectComponent(templater, subject, insertBefore, ownerSupport, options) {\n    // Check if function component is wrapped in a tag() call\n    // TODO: This below check not needed in production mode\n    if (templater.tagged !== true) {\n        const wrapper = templater.wrapper;\n        const original = wrapper.parentWrap.original;\n        let name = original.name || original.constructor?.name;\n        if (name === 'Function') {\n            name = undefined;\n        }\n        const label = name || original.toString().substring(0, 120);\n        const error = new Error(`Not a tag component. Wrap your function with tag(). Example tag(props => html\\`\\`) on component:\\n\\n${label}\\n\\n`);\n        throw error;\n    }\n    const tagSupport = new TagSupport(templater, ownerSupport, subject);\n    let reSupport = subject.tagSupport;\n    const global = tagSupport.global = reSupport?.global || tagSupport.global;\n    global.insertBefore = insertBefore;\n    const isRender = !reSupport;\n    if (isRender) {\n        const support = reSupport || tagSupport;\n        reSupport = renderSubjectComponent(subject, support, ownerSupport);\n    }\n    const newSupport = processTagResult(reSupport, subject, // The element set here will be removed from document. Also result.tag will be added in here\n    insertBefore, // <template end interpolate /> (will be removed)\n    options);\n    // subject.tagSupport = newSupport\n    ownerSupport.global.childTags.push(newSupport);\n    return reSupport;\n}\n//# sourceMappingURL=processSubjectComponent.function.js.map","import { renderWithSupport } from './renderWithSupport.function.js';\nexport function renderSubjectComponent(subject, reSupport, ownerSupport) {\n    const preClones = ownerSupport.global.clones.map(clone => clone);\n    reSupport = renderWithSupport(reSupport, subject.tagSupport, // existing tag\n    subject, ownerSupport);\n    if (ownerSupport.global.clones.length > preClones.length) {\n        const myClones = ownerSupport.global.clones.filter(fClone => !preClones.find(clone => clone === fClone));\n        reSupport.global.clones.push(...myClones);\n    }\n    return reSupport;\n}\n//# sourceMappingURL=renderSubjectComponent.function.js.map","import { deepClone, deepEqual } from './deepFunctions.js';\nimport { isStaticTag } from './isInstance.js';\nimport { renderTagSupport } from './tag/render/renderTagSupport.function.js';\nimport { setUse } from './state/index.js';\nimport { getSupportInCycle } from './tag/getSupportInCycle.function.js';\nexport function castProps(props, newTagSupport, stateArray) {\n    return props.map(prop => alterProp(prop, newTagSupport.ownerTagSupport, stateArray, newTagSupport));\n}\n/* Used to rewrite props that are functions. When they are called it should cause parent rendering */\nexport function alterProp(prop, ownerSupport, stateArray, newTagSupport) {\n    if (isStaticTag(prop) || !prop) {\n        return prop;\n    }\n    if (!ownerSupport) {\n        return prop; // no one above me\n    }\n    return checkProp(prop, ownerSupport, stateArray, newTagSupport);\n}\nexport function checkProp(value, ownerSupport, stateArray, newTagSupport, index, newProp, seen = []) {\n    if (value instanceof Function) {\n        return getPropWrap(value, ownerSupport, stateArray, newTagSupport, index, newProp);\n    }\n    if (seen.includes(value)) {\n        return value;\n    }\n    seen.push(value);\n    if (typeof (value) !== 'object' || !value) {\n        return value; // no children to crawl through\n    }\n    if (value instanceof Array) {\n        for (let index = value.length - 1; index >= 0; --index) {\n            const subValue = value[index];\n            value[index] = checkProp(subValue, ownerSupport, stateArray, newTagSupport, index, value, seen);\n            if (subValue instanceof Function) {\n                if (subValue.toCall) {\n                    continue;\n                }\n                afterCheckProp(index, subValue, value, newTagSupport);\n            }\n        }\n        return value;\n    }\n    for (const name in value) {\n        const subValue = value[name];\n        const result = checkProp(subValue, ownerSupport, stateArray, newTagSupport, name, value, seen);\n        const hasSetter = Object.getOwnPropertyDescriptor(value, name)?.set;\n        if (hasSetter) {\n            continue;\n        }\n        value[name] = result;\n        if (result instanceof Function) {\n            if (subValue.toCall) {\n                continue;\n            }\n            afterCheckProp(name, subValue, value, newTagSupport);\n        }\n    }\n    return value;\n}\nfunction afterCheckProp(index, pastValue, newProp, newTagSupport) {\n    if (pastValue?.toCall) {\n        return; // already been done\n    }\n    // restore object to have original function on destroy\n    newTagSupport.global.destroy$.toCallback(() => newProp[index] = pastValue);\n}\nexport function getPropWrap(value, ownerSupport, stateArray, newTagSupport, name, newProp) {\n    const toCall = value.toCall;\n    // already previously converted by a parent?\n    if (toCall) {\n        return value;\n    }\n    const wrap = (...args) => wrap.toCall(...args); // what gets called can switch over parent state changes\n    // Currently, call self but over parent state changes, I may need to call a newer parent tag owner\n    wrap.toCall = (...args) => {\n        return callbackPropOwner(wrap.prop, args, ownerSupport, wrap.stateArray);\n    };\n    wrap.original = value;\n    wrap.prop = value;\n    wrap.stateArray = stateArray;\n    // copy data properties that maybe on source function\n    Object.assign(wrap, value);\n    return wrap;\n}\n/** Function shared by alterProps() and updateExistingTagComponent... TODO: May want to have to functions to reduce cycle checking?  */\nexport function callbackPropOwner(toCall, callWith, ownerSupport, // <-- WHEN called from alterProp its owner OTHERWISE its previous\noldState) {\n    const newest = ownerSupport.global.newest;\n    //const newState = newest.memory.state\n    const noCycle = getSupportInCycle() === undefined;\n    //const sync = noCycle && oldState.length === newState.length\n    //if(sync) {\n    //  syncStates(newState, oldState)\n    //}\n    const result = toCall(...callWith);\n    // if(sync) {\n    //   syncStates(oldState, newState)\n    // }\n    const run = () => {\n        // are we in a rendering cycle? then its being called by alterProps\n        if (noCycle === false) {\n            // appears a prop function was called sync/immediately so lets see if owner changed state\n            const allMatched = newest.memory.state.every(state => {\n                const lastValue = state.lastValue;\n                const get = state.get();\n                const equal = deepEqual(deepClone(lastValue), get);\n                return equal;\n            });\n            if (allMatched) {\n                return result; // owner did not change\n            }\n        }\n        renderTagSupport(newest, true);\n        return result;\n    };\n    if (noCycle) {\n        return run();\n    }\n    setUse.memory.tagClosed$.toCallback(run);\n    return result;\n}\n//# sourceMappingURL=alterProp.function.js.map","import { hasTagSupportChanged } from '../hasTagSupportChanged.function.js';\nimport { processSubjectComponent } from './processSubjectComponent.function.js';\nimport { destroyTagMemory } from '../destroyTag.function.js';\nimport { renderTagSupport } from '../render/renderTagSupport.function.js';\nimport { castProps } from '../../alterProp.function.js';\nimport { isLikeTags } from '../isLikeTags.function.js';\nexport function updateExistingTagComponent(ownerSupport, tagSupport, // lastest\nsubject, insertBefore, renderUp = false) {\n    let lastSupport = subject.tagSupport?.global.newest;\n    const oldWrapper = lastSupport.templater.wrapper;\n    const newWrapper = tagSupport.templater.wrapper;\n    let isSameTag = false;\n    if (oldWrapper && newWrapper) {\n        const oldFunction = oldWrapper.parentWrap.original;\n        const newFunction = newWrapper.parentWrap.original;\n        // string compare both functions\n        isSameTag = oldFunction === newFunction;\n    }\n    const templater = tagSupport.templater;\n    if (!isSameTag) {\n        const oldestSupport = lastSupport.global.oldest;\n        destroyTagMemory(oldestSupport);\n        const newSupport = processSubjectComponent(templater, subject, insertBefore, ownerSupport, {\n            counts: { added: 0, removed: 0 },\n        });\n        return newSupport;\n    }\n    else {\n        const hasChanged = hasTagSupportChanged(lastSupport, tagSupport, templater);\n        // everyhing has matched, no display needs updating.\n        if (!hasChanged) {\n            const newProps = templater.props;\n            // update function refs to use latest references\n            const castedProps = syncFunctionProps(tagSupport, lastSupport, ownerSupport, newProps);\n            // When new tagSupport actually makes call to real function, use these pre casted props\n            tagSupport.propsConfig.castProps = castedProps;\n            // update support to think it has different cloned props\n            lastSupport.propsConfig.latestCloned = tagSupport.propsConfig.latestCloned;\n            lastSupport.propsConfig.lastClonedKidValues = tagSupport.propsConfig.lastClonedKidValues;\n            return lastSupport; // its the same tag component\n        }\n    }\n    const oldest = lastSupport.global.oldest;\n    if (tagSupport.global.locked) {\n        tagSupport.global.blocked.push(tagSupport);\n        return tagSupport;\n    }\n    const previous = lastSupport.global.newest;\n    const newSupport = renderTagSupport(tagSupport, renderUp);\n    return afterTagRender(subject, oldest, templater, previous, newSupport, isSameTag);\n}\nfunction afterTagRender(subject, oldest, templater, previous, newSupport, isSameTag) {\n    let lastSupport = subject.tagSupport;\n    // const oldest = newSupport.global.oldest\n    /*\n    const hasOldest = oldest ? true : false\n    if(!hasOldest) {\n      return buildNewTag(\n        newSupport,\n        insertBefore,\n        lastSupport,\n        subject\n      )\n    }\n    */\n    if (oldest && templater.children._value.length) {\n        const oldKidsSub = oldest.templater.children;\n        oldKidsSub.next(templater.children._value);\n    }\n    // detect if both the function is the same and the return is the same\n    const isLikeTag = isSameTag && isLikeTags(previous, newSupport);\n    if (isLikeTag) {\n        const oldestTag = lastSupport.global.oldest;\n        subject.tagSupport = newSupport;\n        oldestTag.updateBy(newSupport);\n        return newSupport;\n    }\n    // Although function looked the same it returned a different html result\n    if (isSameTag && lastSupport) {\n        if (!previous.global.deleted) {\n            destroyTagMemory(previous);\n        }\n        /*\n        const insertBefore = (previous.global.insertBefore as any)\n        if(insertBefore.parentNode) {\n          insertBefore.parentNode.removeChild(insertBefore)\n        }\n        */\n        newSupport.global.context = {}; // do not share previous outputs\n        // delete newSupport.global.deleted\n    }\n    return buildNewTag(newSupport, newSupport.global.insertBefore, newSupport, subject);\n}\nfunction buildNewTag(newSupport, oldInsertBefore, oldTagSupport, subject) {\n    newSupport.buildBeforeElement(oldInsertBefore, {\n        counts: { added: 0, removed: 0 },\n    });\n    newSupport.global.oldest = newSupport;\n    newSupport.global.newest = newSupport;\n    oldTagSupport.global.oldest = newSupport;\n    oldTagSupport.global.newest = newSupport;\n    subject.tagSupport = newSupport;\n    subject.tagSupport.ownerTagSupport.global.childTags.push(newSupport);\n    return newSupport;\n}\nfunction syncFunctionProps(newSupport, lastSupport, ownerSupport, newPropsArray) {\n    const newest = lastSupport.global.newest;\n    if (!newest) {\n        // const state = ownerSupport.global.oldest.memory.state\n        const state = ownerSupport.memory.state;\n        newPropsArray.length = 0;\n        const castedProps = castProps(newPropsArray, newSupport, state);\n        newPropsArray.push(...castedProps);\n        newSupport.propsConfig.castProps = castedProps;\n        return newPropsArray;\n    }\n    lastSupport = newest || lastSupport;\n    const priorPropConfig = lastSupport.propsConfig;\n    const priorPropsArray = priorPropConfig.castProps;\n    const newArray = [];\n    for (let index = newPropsArray.length - 1; index >= 0; --index) {\n        const prop = newPropsArray[index];\n        const priorProp = priorPropsArray[index];\n        const newValue = syncPriorPropFunction(priorProp, prop, newSupport, ownerSupport);\n        newArray.push(newValue);\n    }\n    newSupport.propsConfig.castProps = newArray;\n    return newArray;\n}\nfunction syncPriorPropFunction(priorProp, prop, newSupport, ownerSupport, seen = []) {\n    if (priorProp instanceof Function) {\n        // the prop i am receiving, is already being monitored/controlled by another parent\n        if (prop.toCall) {\n            priorProp.toCall = prop.toCall;\n            return prop;\n        }\n        const ownerGlobal = ownerSupport.global;\n        const oldOwnerState = ownerGlobal.newest.memory.state;\n        priorProp.prop = prop;\n        priorProp.stateArray = oldOwnerState;\n        return priorProp;\n    }\n    // prevent infinite recursion\n    if (seen.includes(prop)) {\n        return prop;\n    }\n    seen.push(prop);\n    if (typeof (prop) !== 'object' || !prop) {\n        return prop; // no children to crawl through\n    }\n    if (prop instanceof Array) {\n        for (let index = prop.length - 1; index >= 0; --index) {\n            const x = prop[index];\n            prop[index] = syncPriorPropFunction(priorProp[index], x, newSupport, ownerSupport, seen);\n        }\n        return prop;\n    }\n    if (priorProp === undefined) {\n        return prop;\n    }\n    for (const name in prop) {\n        const subValue = prop[name];\n        const result = syncPriorPropFunction(priorProp[name], subValue, newSupport, ownerSupport, seen);\n        const hasSetter = Object.getOwnPropertyDescriptor(prop, name)?.set;\n        if (hasSetter) {\n            continue;\n        }\n        prop[name] = result;\n    }\n    return prop;\n}\nexport function moveProviders(lastSupport, newSupport) {\n    const destroy$ = lastSupport.global.destroy$;\n    lastSupport.global.providers.forEach(provider => {\n        provider.children.forEach((child, index) => {\n            const wasSameGlobals = lastSupport.global.destroy$ === child.global.destroy$;\n            if (wasSameGlobals) {\n                provider.children.splice(index, 1);\n                provider.children.push(newSupport);\n                return;\n            }\n        });\n    });\n}\n//# sourceMappingURL=updateExistingTagComponent.function.js.map","import { hasPropChanges } from './hasPropChanges.function.js';\nexport function hasTagSupportChanged(lastSupport, newTagSupport, newTemplater) {\n    const latestProps = newTemplater.props; // newTagSupport.propsConfig.latest\n    const pastCloneProps = lastSupport.propsConfig.latestCloned;\n    const propsChanged = hasPropChanges(latestProps, pastCloneProps);\n    // const propsChanged = hasPropChanges(lastSupport.templater.props, newTagSupport.templater.props)\n    // const propsChanged = hasPropChanges(lastSupport.propsConfig.latestCloned, newTagSupport.propsConfig.latestCloned)\n    // if no changes detected, no need to continue to rendering further tags\n    if (propsChanged) {\n        return propsChanged;\n    }\n    const propsChanged2 = hasPropChanges(lastSupport.propsConfig.latestCloned, newTagSupport.propsConfig.latestCloned);\n    if (propsChanged2) {\n        return propsChanged2;\n    }\n    const kidsChanged = hasKidsChanged(lastSupport, newTagSupport);\n    // we already know props didn't change and if kids didn't either, than don't render\n    return kidsChanged;\n}\nexport function hasKidsChanged(oldTagSupport, newTagSupport) {\n    const oldCloneKidValues = oldTagSupport.propsConfig.lastClonedKidValues;\n    const newClonedKidValues = newTagSupport.propsConfig.lastClonedKidValues;\n    const everySame = oldCloneKidValues.every((set, index) => {\n        const x = newClonedKidValues[index];\n        return set.every((item, index) => item === x[index]);\n    });\n    return everySame ? false : 9;\n}\n//# sourceMappingURL=hasTagSupportChanged.function.js.map","/** File largely responsible for reacting to element events, such as onclick */\nimport { setUse } from '../state/setUse.function.js';\nimport { ValueTypes } from '../tag/ValueTypes.enum.js';\nimport { renderTagSupport } from '../tag/render/renderTagSupport.function.js';\nimport { updateExistingTagComponent } from '../tag/update/updateExistingTagComponent.function.js';\nconst useLocks = true;\nexport function bindSubjectCallback(value, tagSupport) {\n    // Is this children? No override needed\n    if (value.isChildOverride) {\n        return value;\n    }\n    const state = setUse.memory.stateConfig;\n    const subjectFunction = (element, args) => runTagCallback(value, tagSupport, element, args);\n    // link back to original. Mostly used for <div oninit ondestroy> animations\n    subjectFunction.tagFunction = value;\n    return subjectFunction;\n}\nexport function runTagCallback(value, tagSupport, bindTo, args) {\n    const tag = findTagToCallback(tagSupport);\n    const method = value.bind(bindTo);\n    tag.global.locked = useLocks; // prevent another render from re-rendering this tag\n    const callbackResult = method(...args);\n    return afterTagCallback(tag, callbackResult);\n}\nfunction afterTagCallback(tag, callbackResult) {\n    delete tag.global.locked;\n    if (tag.global.blocked.length) {\n        let lastResult;\n        tag.global.blocked.forEach(blocked => {\n            const block = blocked;\n            lastResult = updateExistingTagComponent(block.ownerTagSupport, block, block.subject, block.global.insertBefore, true);\n            tag.global.newest = lastResult;\n            tag.global.blocked.splice(0, 1);\n        });\n        tag.global.blocked.length = 0;\n        // return lastResult\n        return checkAfterCallbackPromise(callbackResult, lastResult, lastResult.global);\n    }\n    const result = renderCallbackSupport(tag.global.newest, callbackResult, tag.global);\n    return result;\n}\nfunction findTagToCallback(tagSupport) {\n    // If we are NOT a component than we need to render my owner instead\n    if (tagSupport.templater.tagJsType === ValueTypes.templater) {\n        const owner = tagSupport.ownerTagSupport;\n        return findTagToCallback(owner);\n    }\n    return tagSupport;\n}\nfunction renderCallbackSupport(last, callbackResult, global) {\n    if (global.deleted) {\n        return 'no-data-ever'; // || last.global.deleted\n    }\n    renderTagSupport(last, true);\n    return checkAfterCallbackPromise(callbackResult, last, global);\n}\nfunction checkAfterCallbackPromise(callbackResult, last, global) {\n    if (callbackResult instanceof Promise) {\n        last.global.locked = useLocks;\n        return callbackResult.then(() => {\n            delete last.global.locked;\n            if (global.deleted) {\n                return 'promise-no-data-ever'; // tag was deleted during event processing\n            }\n            delete last.global.locked;\n            renderTagSupport(global.newest, true);\n            return 'promise-no-data-ever';\n        });\n    }\n    return 'no-data-ever';\n}\n//# sourceMappingURL=bindSubjectCallback.function.js.map","import { specialAttribute } from './specialAttribute.js';\nimport { isSubjectInstance } from '../isInstance.js';\nimport { bindSubjectCallback } from './bindSubjectCallback.function.js';\nconst startRegX = /^\\s*{__tagvar/;\nconst endRegX = /}\\s*$/;\nfunction isTagVar(value) {\n    return value && value.search(startRegX) >= 0 && value.search(endRegX) >= 0;\n}\nexport function processAttribute(attrName, value, // current attribute value by using .getAttribute\nchild, scope, ownerSupport, howToSet) {\n    if (isTagVar(value)) {\n        return processScopedNameValueAttr(attrName, value, child, scope, ownerSupport, howToSet);\n    }\n    if (isTagVar(attrName)) {\n        const contextValueSubject = getContextValueByVarString(scope, attrName);\n        let lastValue;\n        // the above callback gets called immediately since its a ValueSubject()\n        const sub = contextValueSubject.subscribe((value) => {\n            if (value === lastValue) {\n                return; // value did not change\n            }\n            processNameOnlyAttr(value, lastValue, child, ownerSupport, howToSet);\n            lastValue = value;\n        });\n        ownerSupport.global.subscriptions.push(sub); // this is where unsubscribe is picked up\n        child.removeAttribute(attrName);\n        return;\n    }\n    // Non dynamic\n    const isSpecial = isSpecialAttr(attrName);\n    if (isSpecial) {\n        return specialAttribute(attrName, value, child);\n    }\n}\nfunction processScopedNameValueAttr(attrName, value, // {__tagVarN}\nchild, scope, ownerSupport, howToSet) {\n    // get the code inside the brackets like \"variable0\" or \"{variable0}\"\n    const result = getContextValueByVarString(scope, value);\n    return processNameValueAttr(attrName, result, child, ownerSupport, howToSet);\n}\nfunction getContextValueByVarString(scope, value) {\n    const code = value.replace('{', '').split('').reverse().join('').replace('}', '').split('').reverse().join('');\n    return scope[code];\n}\nfunction processNameOnlyAttr(attrValue, lastValue, child, ownerSupport, howToSet) {\n    if (lastValue && lastValue != attrValue) {\n        if (typeof (lastValue) === 'string') {\n            child.removeAttribute(lastValue);\n        }\n        else if (lastValue instanceof Object) {\n            for (const name in lastValue) {\n                child.removeAttribute(name);\n            }\n        }\n    }\n    if (typeof (attrValue) === 'string') {\n        if (!attrValue.length) {\n            return;\n        }\n        processNameValueAttr(attrValue, '', child, ownerSupport, howToSet);\n        return;\n    }\n    if (attrValue instanceof Object) {\n        for (const name in attrValue) {\n            processNameValueAttr(name, attrValue[name], child, ownerSupport, howToSet);\n        }\n    }\n}\nfunction processNameValueAttr(attrName, result, child, ownerSupport, howToSet) {\n    const isSpecial = isSpecialAttr(attrName);\n    if (result instanceof Function) {\n        const action = function (...args) {\n            const result2 = result(child, args);\n            return result2;\n        };\n        child[attrName].action = action;\n    }\n    // Most every variable comes in here since everything is made a ValueSubject\n    if (isSubjectInstance(result)) {\n        child.removeAttribute(attrName);\n        let lastValue;\n        const callback = (newAttrValue) => {\n            // should the function be wrapped so every time its called we re-render?\n            if (newAttrValue instanceof Function) {\n                return callbackFun(ownerSupport, newAttrValue, child, attrName, isSpecial, howToSet);\n            }\n            // TODO: we maybe able to block higher before instance of check\n            if (lastValue === newAttrValue) {\n                return lastValue;\n            }\n            lastValue = newAttrValue;\n            return processAttributeSubjectValue(newAttrValue, child, attrName, isSpecial, howToSet);\n        };\n        //  Subscribe. Above callback called immediately since its a ValueSubject()\n        const sub = result.subscribe(callback);\n        // Record subscription for later unsubscribe when element destroyed\n        ownerSupport.global.subscriptions.push(sub);\n        return;\n    }\n    howToSet(child, attrName, result);\n    // child.setAttribute(attrName, result.value)\n    return;\n}\nfunction processAttributeSubjectValue(newAttrValue, child, attrName, isSpecial, howToSet) {\n    if (newAttrValue instanceof Function) {\n        const fun = function (...args) {\n            return newAttrValue(child, args);\n        };\n        // access to original function\n        fun.tagFunction = newAttrValue;\n        if (attrName === 'ondoubleclick') {\n            attrName = 'ondblclick';\n        }\n        ;\n        child[attrName] = fun;\n        return;\n    }\n    if (isSpecial) {\n        specialAttribute(attrName, newAttrValue, child);\n        return;\n    }\n    if (newAttrValue) {\n        howToSet(child, attrName, newAttrValue);\n        return;\n    }\n    const isDeadValue = [undefined, false, null].includes(newAttrValue);\n    if (isDeadValue) {\n        child.removeAttribute(attrName);\n        return;\n    }\n    // value is 0\n    howToSet(child, attrName, newAttrValue);\n}\n/** Looking for (class | style) followed by a period */\nfunction isSpecialAttr(attrName) {\n    return attrName.search(/^(class|style)(\\.)/) >= 0;\n}\nfunction callbackFun(ownerSupport, newAttrValue, child, attrName, isSpecial, howToSet) {\n    const wrapper = ownerSupport.templater.wrapper;\n    const parentWrap = wrapper?.parentWrap;\n    const oneRender = parentWrap?.oneRender;\n    if (!oneRender) {\n        newAttrValue = bindSubjectCallback(newAttrValue, ownerSupport);\n    }\n    return processAttributeSubjectValue(newAttrValue, child, attrName, isSpecial, howToSet);\n}\n//# sourceMappingURL=processAttribute.function.js.map","import { processAttribute } from './processAttribute.function.js';\nfunction howToSetAttribute(element, name, value) {\n    element.setAttribute(name, value);\n}\nfunction howToSetInputValue(element, name, value) {\n    element[name] = value;\n}\nexport function interpolateAttributes(child, scope, ownerSupport) {\n    const attrNames = child.getAttributeNames();\n    let howToSet = howToSetAttribute;\n    for (let index = 0; index < attrNames.length; ++index) {\n        const attrName = attrNames[index];\n        if (child.nodeName === 'INPUT' && attrName === 'value') {\n            howToSet = howToSetInputValue;\n        }\n        const value = child.getAttribute(attrName);\n        processAttribute(attrName, value, child, scope, ownerSupport, howToSet);\n        howToSet = howToSetAttribute; // put back\n    }\n}\n//# sourceMappingURL=interpolateAttributes.js.map","// support arrow functions in attributes\nexport const interpolateReplace = /(?:<[^>]*?(?:(?:\\s+\\w+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^>\\s]+)))*\\s*)\\/?>)|({__tagvar[^}]+})/g;\n/** replaces ${x} with <template id=\"x-start\"></template><template id=\"x-end\"></template> */\nexport function interpolateToTemplates(template) {\n    const keys = [];\n    const string = template.replace(interpolateReplace, (match, expression) => {\n        if (match.startsWith('<')) {\n            // If the match is an HTML tag, don't replace\n            return match;\n        }\n        const noBraces = expression.substring(1, expression.length - 1);\n        const id = noBraces;\n        keys.push(id);\n        return `<template interpolate end id=\"${id}\"></template>`;\n    });\n    return { string, keys };\n}\n//# sourceMappingURL=interpolations.js.map","import { TagSupport } from '../TagSupport.class.js';\nimport { ValueSubject } from '../../subject/index.js';\n/** When first time render, adds to owner childTags */\nexport function processTag(templater, insertBefore, ownerSupport, // owner\nsubject) {\n    let tagSupport = subject.tagSupport;\n    // first time seeing this tag?\n    if (!tagSupport) {\n        tagSupport = newTagSupportByTemplater(templater, ownerSupport, subject);\n    }\n    subject.tagSupport = tagSupport;\n    tagSupport.ownerTagSupport = ownerSupport;\n    // ++tagSupport.global.renderCount\n    tagSupport.buildBeforeElement(insertBefore, {\n        counts: { added: 0, removed: 0 },\n    });\n    return tagSupport;\n}\nexport function tagFakeTemplater(tag) {\n    const templater = getFakeTemplater();\n    templater.tag = tag;\n    tag.templater = templater;\n    return templater;\n}\nexport function getFakeTemplater() {\n    const fake = {\n        children: new ValueSubject([]), // no children\n        // props: {} as Props,\n        props: [],\n        isTag: true,\n        tagJsType: 'templater',\n        tagged: false,\n        html: () => fake,\n        key: () => fake,\n    };\n    return fake;\n}\n/** Create TagSupport for a tag component */\nexport function newTagSupportByTemplater(templater, ownerSupport, subject) {\n    const tagSupport = new TagSupport(templater, ownerSupport, subject);\n    setupNewSupport(tagSupport, ownerSupport, subject);\n    ownerSupport.global.childTags.push(tagSupport);\n    return tagSupport;\n}\nexport function setupNewSupport(tagSupport, ownerSupport, subject) {\n    tagSupport.global.oldest = tagSupport;\n    tagSupport.global.newest = tagSupport;\n    // asking me to render will cause my parent to render\n    tagSupport.ownerTagSupport = ownerSupport;\n    subject.tagSupport = tagSupport;\n}\n//# sourceMappingURL=processTag.function.js.map","import { ValueSubject } from '../../subject/ValueSubject.js';\nimport { ArrayNoKeyError } from '../../errors.js';\nimport { destroyArrayTag } from '../checkDestroyPrevious.function.js';\nimport { newTagSupportByTemplater, setupNewSupport, tagFakeTemplater } from './processTag.function.js';\nimport { TagSupport } from '../TagSupport.class.js';\nimport { isTagClass } from '../../isInstance.js';\nimport { renderTagOnly } from '../render/renderTagOnly.function.js';\nexport function processTagArray(subject, value, // arry of Tag classes\ninsertBefore, // <template end interpolate />\nownerSupport, options) {\n    const clones = ownerSupport.global.clones; // []\n    let lastArray = subject.lastArray = subject.lastArray || [];\n    if (!subject.placeholder) {\n        setPlaceholderElm(insertBefore, subject);\n    }\n    const runtimeInsertBefore = subject.placeholder; // || insertBefore\n    let removed = 0;\n    /**  remove previous items first */\n    lastArray = subject.lastArray = subject.lastArray.filter((item, index) => {\n        const newLength = value.length - 1;\n        const at = index - removed;\n        const lessLength = newLength < at;\n        if (lessLength) {\n            destroyArrayItem(lastArray, index, options);\n            ++removed;\n            return false;\n        }\n        const subTag = value[index - removed];\n        const tagClass = isTagClass(subTag);\n        let tag = subTag;\n        let templater = subTag.templater;\n        let prevArrayValue;\n        if (tagClass) {\n            prevArrayValue = tag.memory.arrayValue;\n        }\n        else {\n            templater = subTag;\n            tag = templater.tag;\n            prevArrayValue = templater.arrayValue;\n        }\n        // const tag = subTag?.templater.tag as Tag\n        const lastTag = item.tagSupport.templater.tag;\n        const lastArrayValue = lastTag.memory.arrayValue;\n        const destroyItem = !areLikeValues(prevArrayValue, lastArrayValue);\n        if (destroyItem) {\n            destroyArrayItem(lastArray, index, options);\n            ++removed;\n            return false;\n        }\n        return true;\n    });\n    const length = value.length;\n    for (let index = 0; index < length; ++index) {\n        const item = value[index];\n        const previous = lastArray[index];\n        const previousSupport = previous?.tagSupport;\n        const subTag = item;\n        const tagClass = isTagClass(subTag);\n        const itemSubject = new ValueSubject(undefined);\n        let templater = subTag.templater;\n        let tagSupport;\n        if (tagClass) {\n            if (!templater) {\n                templater = tagFakeTemplater(subTag);\n            }\n            tagSupport = new TagSupport(templater, ownerSupport, itemSubject);\n        }\n        else {\n            templater = subTag;\n            tagSupport = setupNewTemplater(templater, ownerSupport, itemSubject);\n        }\n        // share global between old and new\n        if (previousSupport) {\n            setupNewSupport(tagSupport, ownerSupport, previousSupport.subject);\n            const global = previousSupport.global;\n            tagSupport.global = global;\n            global.newest = tagSupport;\n        }\n        // check for html``.key()\n        const tag = templater.tag || subTag;\n        const keySet = 'arrayValue' in tag.memory;\n        if (!keySet) {\n            const details = {\n                template: tagSupport.getTemplate().string,\n                array: value,\n            };\n            const message = 'Use html`...`.key(item) instead of html`...` to template an Array';\n            console.error(message, details);\n            const err = new ArrayNoKeyError(message, details);\n            throw err;\n        }\n        const couldBeSame = lastArray.length > index;\n        if (couldBeSame) {\n            const prevSupport = previous.tagSupport;\n            const prevGlobal = prevSupport.global;\n            const oldest = prevGlobal.oldest;\n            oldest.updateBy(tagSupport);\n            continue;\n        }\n        processAddTagArrayItem(runtimeInsertBefore, tagSupport, index, options, lastArray);\n        ownerSupport.global.childTags.push(tagSupport);\n    }\n    return clones;\n}\nfunction setPlaceholderElm(insertBefore, subject) {\n    if (insertBefore.nodeName !== 'TEMPLATE') {\n        subject.placeholder = insertBefore;\n        return;\n    }\n    const placeholder = subject.placeholder = document.createTextNode('');\n    const parentNode = insertBefore.parentNode;\n    parentNode.insertBefore(placeholder, insertBefore);\n    parentNode.removeChild(insertBefore);\n}\nfunction processAddTagArrayItem(before, tagSupport, index, options, lastArray) {\n    const lastValue = {\n        tagSupport, index\n    };\n    // Added to previous array\n    lastArray.push(lastValue);\n    const counts = {\n        added: options.counts.added + index,\n        removed: options.counts.removed,\n    };\n    const fragment = document.createDocumentFragment();\n    const newTempElm = document.createElement('template');\n    fragment.appendChild(newTempElm);\n    tagSupport.buildBeforeElement(newTempElm, // before,\n    { counts });\n    const parent = before.parentNode;\n    parent.insertBefore(fragment, before);\n}\n/** compare two values. If both values are arrays then the items will be compared */\nfunction areLikeValues(valueA, valueB) {\n    if (valueA === valueB) {\n        return true;\n    }\n    const bothArrays = valueA instanceof Array && valueB instanceof Array;\n    const matchLengths = bothArrays && valueA.length == valueB.length;\n    if (matchLengths) {\n        return valueA.every((item, index) => item == valueB[index]);\n    }\n    return false;\n}\nfunction setupNewTemplater(templater, ownerSupport, itemSubject) {\n    const tagSupport = newTagSupportByTemplater(templater, ownerSupport, itemSubject);\n    renderTagOnly(tagSupport, tagSupport, itemSubject, ownerSupport);\n    return tagSupport;\n}\nfunction destroyArrayItem(lastArray, index, options) {\n    const last = lastArray[index];\n    const tagSupport = last.tagSupport;\n    destroyArrayTag(tagSupport, options.counts);\n    last.deleted = true;\n    ++options.counts.removed;\n}\n//# sourceMappingURL=processTagArray.js.map","// Function to update the value of x\nexport function updateBeforeTemplate(value, // value should be casted before calling here\nlastFirstChild) {\n    const parent = lastFirstChild.parentNode;\n    // Insert the new value (never use innerHTML here)\n    const textNode = document.createTextNode(value); // never innerHTML\n    parent.insertBefore(textNode, lastFirstChild);\n    /* remove existing nodes */\n    parent.removeChild(lastFirstChild);\n    return textNode;\n}\nexport function castTextValue(value) {\n    // mimic React skipping to display EXCEPT for true does display on page\n    if ([undefined, false, null].includes(value)) { // || value === true\n        return '';\n    }\n    return value;\n}\n//# sourceMappingURL=updateBeforeTemplate.function.js.map","import { castTextValue, updateBeforeTemplate } from '../../updateBeforeTemplate.function.js';\nexport function processRegularValue(value, subject, // could be tag via subject.tag\ninsertBefore) {\n    subject.insertBefore = insertBefore;\n    const before = subject.clone || insertBefore; // Either the template is on the doc OR its the first element we last put on doc\n    // matches but also was defined at some point\n    if (subject.lastValue === value && 'lastValue' in subject) {\n        return; // no need to update display, its the same\n    }\n    subject.lastValue = value;\n    const castedValue = castTextValue(value);\n    // replace existing string?\n    const oldClone = subject.clone;\n    if (oldClone) {\n        oldClone.textContent = castedValue;\n        return;\n    }\n    // Processing of regular values\n    const clone = updateBeforeTemplate(castedValue, before);\n    subject.clone = clone; // remember single element put down, for future updates\n}\nexport function processFirstRegularValue(value, subject, // could be tag via subject.tag\ninsertBefore) {\n    subject.lastValue = value;\n    const castedValue = castTextValue(value);\n    // Processing of regular values\n    const clone = updateBeforeTemplate(castedValue, insertBefore);\n    subject.clone = clone; // remember single element put down, for future updates \n}\n//# sourceMappingURL=processRegularValue.function.js.map","import { processSubjectComponent } from './processSubjectComponent.function.js';\nimport { processTagArray } from './processTagArray.js';\nimport { processFirstRegularValue } from './processRegularValue.function.js';\nimport { processTag, tagFakeTemplater } from './processTag.function.js';\nimport { renderTagOnly } from '../render/renderTagOnly.function.js';\nimport { ValueTypes } from '../ValueTypes.enum.js';\nimport { oneRenderToTagSupport } from './oneRenderToTagSupport.function.js';\nimport { getValueType } from '../getValueType.function.js';\nexport function processFirstSubjectValue(value, subject, // could be tag via result.tag\ninsertBefore, // <template end interpolate /> (will be removed)\nownerSupport, // owner\noptions) {\n    const valueType = getValueType(value);\n    switch (valueType) {\n        case ValueTypes.templater:\n            processTag(value, insertBefore, ownerSupport, subject);\n            return;\n        case ValueTypes.tag:\n            const tag = value;\n            let templater = tag.templater;\n            if (!templater) {\n                templater = tagFakeTemplater(tag);\n            }\n            processTag(templater, insertBefore, ownerSupport, subject);\n            return;\n        case ValueTypes.tagArray:\n            return processTagArray(subject, value, insertBefore, ownerSupport, options);\n        case ValueTypes.tagComponent:\n            const newSupport = processSubjectComponent(value, subject, insertBefore, ownerSupport, options);\n            return newSupport;\n        case ValueTypes.function:\n            const v = value;\n            if (v.oneRender) {\n                const tagSupport = oneRenderToTagSupport(v, subject, ownerSupport);\n                renderTagOnly(tagSupport, tagSupport, subject, ownerSupport);\n                processTag(tagSupport.templater, insertBefore, ownerSupport, subject);\n                return;\n            }\n            break;\n    }\n    processFirstRegularValue(value, subject, insertBefore);\n}\n//# sourceMappingURL=processFirstSubjectValue.function.js.map","import { TemplaterResult } from '../TemplaterResult.class.js';\nimport { newTagSupportByTemplater } from './processTag.function.js';\nexport function oneRenderToTagSupport(wrapper, subject, ownerSupport) {\n    const templater = new TemplaterResult([]);\n    templater.tagJsType = 'oneRender';\n    const tagSupport = newTagSupportByTemplater(templater, ownerSupport, subject);\n    let tag;\n    const wrap = () => {\n        templater.tag = tag || (wrapper());\n        return tagSupport;\n    };\n    templater.wrapper = wrap;\n    wrap.parentWrap = wrap;\n    wrap.oneRender = true;\n    wrap.parentWrap.original = wrapper;\n    return tagSupport;\n}\n//# sourceMappingURL=oneRenderToTagSupport.function.js.map","import { processAttribute } from './processAttribute.function.js';\nconst search = new RegExp('\\\\s*<template interpolate end id=\"__tagvar(\\\\d{1,4})\"([^>]*)></template>(\\\\s*)');\nexport function scanTextAreaValue(textarea, context, ownerSupport) {\n    const value = textarea.value;\n    if (value.search(search) >= 0) {\n        const match = value.match(/__tagvar(\\d{1,4})/);\n        const token = match ? match[0] : '';\n        const dynamic = '{' + token + '}';\n        textarea.value = '';\n        textarea.setAttribute('text-var-value', dynamic);\n        const howToSet = (_elm, _name, value) => textarea.value = value;\n        processAttribute('text-var-value', dynamic, // realValue, // context[token].value,\n        textarea, context, ownerSupport, howToSet);\n    }\n}\n//# sourceMappingURL=scanTextAreaValue.function.js.map","import { TagSupport } from '../TagSupport.class.js';\nimport { TemplaterResult } from '../TemplaterResult.class.js';\nimport { isTagClass, isTagTemplater } from '../../isInstance.js';\nimport { processTagArray } from './processTagArray.js';\nimport { updateExistingTagComponent } from './updateExistingTagComponent.function.js';\nimport { processRegularValue } from './processRegularValue.function.js';\nimport { checkDestroyPrevious, restoreTagMarker } from '../checkDestroyPrevious.function.js';\nimport { processSubjectComponent } from './processSubjectComponent.function.js';\nimport { isLikeTags } from '../isLikeTags.function.js';\nimport { getFakeTemplater, processTag, setupNewSupport } from './processTag.function.js';\nimport { swapInsertBefore } from '../setTagPlaceholder.function.js';\nimport { ValueTypes } from '../ValueTypes.enum.js';\nimport { getValueType } from '../getValueType.function.js';\nexport function updateExistingValue(subject, value, ownerSupport, insertBefore) {\n    const subjectTag = subject;\n    const valueType = getValueType(value);\n    checkDestroyPrevious(subject, value, insertBefore, valueType);\n    // handle already seen tag components\n    if (valueType === ValueTypes.tagComponent) {\n        return prepareUpdateToComponent(value, subjectTag, insertBefore, ownerSupport);\n    }\n    // was component but no longer\n    const tagSupport = subjectTag.tagSupport;\n    if (tagSupport) {\n        if (valueType === ValueTypes.function) {\n            return subjectTag; // its a oneRender tag\n        }\n        handleStillTag(subject, value, ownerSupport);\n        return subjectTag;\n    }\n    switch (valueType) {\n        case ValueTypes.tagArray:\n            processTagArray(subject, value, insertBefore, // oldInsertBefore as InsertBefore,\n            ownerSupport, { counts: {\n                    added: 0,\n                    removed: 0,\n                } });\n            return subject;\n        case ValueTypes.templater:\n            processTag(value, insertBefore, ownerSupport, subjectTag);\n            return subjectTag;\n        case ValueTypes.tag:\n            const tag = value;\n            let templater = tag.templater;\n            if (!templater) {\n                templater = getFakeTemplater();\n                tag.templater = templater;\n                templater.tag = tag;\n            }\n            processTag(templater, insertBefore, ownerSupport, subjectTag);\n            return subjectTag;\n        case ValueTypes.subject:\n            return value;\n        // now its a useless function (we don't automatically call functions)\n        case ValueTypes.function:\n            if (!subject.clone) {\n                subject.clone = swapInsertBefore(insertBefore);\n            }\n            return subject;\n    }\n    // This will cause all other values to render\n    processRegularValue(value, subject, insertBefore);\n    return subjectTag;\n}\nfunction handleStillTag(subject, value, ownerSupport) {\n    const lastSupport = subject.tagSupport;\n    let templater = value;\n    const isClass = isTagClass(value);\n    if (isClass) {\n        const tag = value;\n        templater = tag.templater;\n        if (!templater) {\n            templater = new TemplaterResult([]);\n            templater.tag = tag;\n            tag.templater = templater;\n        }\n    }\n    const valueSupport = new TagSupport(templater, ownerSupport, subject);\n    // ??? new\n    // subject.tagSupport = valueSupport\n    if (isClass) {\n        valueSupport.global = lastSupport.global;\n    }\n    const isSameTag = value && isLikeTags(lastSupport, valueSupport);\n    if (isTagTemplater(value)) {\n        setupNewSupport(valueSupport, ownerSupport, subject);\n    }\n    if (isSameTag) {\n        lastSupport.updateBy(valueSupport);\n        return;\n    }\n    if (isSameTag) {\n        // const subjectTag = subject as TagSubject\n        const global = lastSupport.global;\n        const insertBefore = global.insertBefore;\n        return processTag(templater, insertBefore, ownerSupport, subject);\n    }\n    return processRegularValue(value, subject, subject.insertBefore);\n}\nfunction prepareUpdateToComponent(templater, subjectTag, insertBefore, ownerSupport) {\n    // When last value was not a component\n    if (!subjectTag.tagSupport) {\n        processSubjectComponent(templater, subjectTag, insertBefore, // oldInsertBefore as InsertBefore,\n        ownerSupport, {\n            counts: { added: 0, removed: 0 },\n        });\n        return subjectTag;\n    }\n    const tagSupport = new TagSupport(templater, ownerSupport, subjectTag);\n    const subjectSup = subjectTag.tagSupport;\n    const prevSupport = subjectSup.global.newest;\n    if (prevSupport) {\n        const newestState = prevSupport.memory.state;\n        tagSupport.memory.state.length = 0;\n        tagSupport.memory.state.push(...newestState);\n    }\n    else {\n        restoreTagMarker(subjectSup);\n        processSubjectComponent(templater, subjectTag, insertBefore, ownerSupport, {\n            counts: { added: 0, removed: 0 },\n        });\n        return subjectTag;\n    }\n    tagSupport.global = subjectSup.global;\n    subjectTag.tagSupport = tagSupport;\n    updateExistingTagComponent(ownerSupport, tagSupport, // latest value\n    subjectTag, insertBefore);\n    return subjectTag;\n}\n//# sourceMappingURL=updateExistingValue.function.js.map","import { variablePrefix } from '../tag/Tag.class.js';\nimport { elementInitCheck } from './elementInitCheck.js';\nimport { processFirstSubjectValue } from '../tag/update/processFirstSubjectValue.function.js';\nimport { isTagArray, isTagComponent } from '../isInstance.js';\nimport { scanTextAreaValue } from './scanTextAreaValue.function.js';\nimport { updateExistingValue } from '../tag/update/updateExistingValue.function.js';\nimport { swapInsertBefore } from '../tag/setTagPlaceholder.function.js';\nexport function interpolateTemplate(insertBefore, // <template end interpolate /> (will be removed)\ncontext, // variable scope of {`__tagvar${index}`:'x'}\nownerSupport, // Tag class\ncounts) {\n    if (!insertBefore.hasAttribute('end')) {\n        return; // only care about <template end>\n    }\n    const variableName = insertBefore.getAttribute('id');\n    if (variableName?.substring(0, variablePrefix.length) !== variablePrefix) {\n        return; // ignore, not a tagVar\n    }\n    const existingSubject = context[variableName];\n    const isDynamic = isTagComponent(existingSubject._value) || isTagArray(existingSubject.value);\n    // process dynamics later\n    if (isDynamic) {\n        return {\n            variableName,\n            ownerSupport,\n            subject: existingSubject,\n            insertBefore\n        };\n    }\n    subscribeToTemplate(insertBefore, existingSubject, ownerSupport, counts);\n    return;\n}\nexport function subscribeToTemplate(insertBefore, subject, ownerSupport, counts) {\n    let called = false;\n    const onValue = (value) => {\n        if (called) {\n            updateExistingValue(subject, value, ownerSupport, insertBefore);\n            return;\n        }\n        const templater = value;\n        processFirstSubjectValue(templater, subject, insertBefore, ownerSupport, {\n            counts: { ...counts },\n        });\n        called = true;\n    };\n    let mutatingCallback = onValue;\n    const callback = (value) => mutatingCallback(value);\n    const sub = subject.subscribe(callback);\n    // on subscribe, the Subject did NOT emit immediately. Lets pull the template off the document\n    if (insertBefore.parentNode) {\n        const clone = subject.clone = swapInsertBefore(insertBefore);\n        mutatingCallback = v => {\n            const parentNode = clone.parentNode;\n            parentNode.insertBefore(insertBefore, clone);\n            parentNode.removeChild(clone);\n            delete subject.clone;\n            mutatingCallback = onValue; // all future calls will just produce value\n            onValue(v); // calls for rending\n        };\n    }\n    ownerSupport.global.subscriptions.push(sub);\n}\n/** This is the function that enhances elements such as [class.something] and [style.color] OR it fixes elements that alter innerHTML */\nexport function afterElmBuild(elm, options, context, ownerSupport) {\n    if (!elm.getAttribute) {\n        return;\n    }\n    // Elements that alter innerHTML\n    const tagName = elm.nodeName; // elm.tagName\n    if (tagName === 'TEXTAREA') {\n        scanTextAreaValue(elm, context, ownerSupport);\n    }\n    let diff = options.counts.added;\n    diff = elementInitCheck(elm, options.counts) - diff;\n    const hasFocusFun = elm.focus;\n    if (hasFocusFun) {\n        if (elm.hasAttribute('autofocus')) {\n            elm.focus();\n        }\n        if (elm.hasAttribute('autoselect')) {\n            elm.select();\n        }\n    }\n    const children = elm.children;\n    if (children) {\n        for (let index = children.length - 1; index >= 0; --index) {\n            const child = children[index];\n            const subOptions = {\n                ...options,\n                counts: options.counts,\n            };\n            afterElmBuild(child, subOptions, context, ownerSupport);\n        }\n    }\n}\n//# sourceMappingURL=interpolateTemplate.js.map","export function elementInitCheck(nextSibling, counts) {\n    const onInitDoubleWrap = nextSibling.oninit;\n    if (!onInitDoubleWrap) {\n        return counts.added;\n    }\n    const onInitWrap = onInitDoubleWrap.tagFunction;\n    if (!onInitWrap) {\n        return counts.added;\n    }\n    const onInit = onInitWrap.tagFunction;\n    if (!onInit) {\n        return counts.added;\n    }\n    const event = { target: nextSibling, stagger: counts.added };\n    onInit(event);\n    return ++counts.added;\n}\n//# sourceMappingURL=elementInitCheck.js.map","import { interpolateTemplate } from './interpolateTemplate.js';\nexport function interpolateContentTemplates(context, tagSupport, options, children) {\n    // counting for animation stagger computing\n    const counts = options.counts;\n    const clones = [];\n    const tagComponents = [];\n    const childLength = children.length;\n    for (let index = childLength - 1; index >= 0; --index) {\n        const child = children[index];\n        const tagComponent = interpolateTemplate(child, context, tagSupport, counts);\n        // clones.push(...nextClones)\n        if (tagComponent) {\n            tagComponents.push(tagComponent);\n            continue;\n        }\n        if (child.children) {\n            for (let index = child.children.length - 1; index >= 0; --index) {\n                const subChild = child.children[index];\n                // IF <template end /> its a variable to be processed\n                if (isRenderEndTemplate(subChild)) {\n                    const tagComponent = interpolateTemplate(subChild, context, tagSupport, counts);\n                    if (tagComponent) {\n                        tagComponents.push(tagComponent);\n                    }\n                }\n                const { clones: nextClones, tagComponents: nextTagComponent } = interpolateContentTemplates(context, tagSupport, options, subChild.children);\n                clones.push(...nextClones);\n                tagComponents.push(...nextTagComponent);\n            }\n        }\n    }\n    return { clones, tagComponents };\n}\nfunction isRenderEndTemplate(child) {\n    const isTemplate = child.tagName === 'TEMPLATE';\n    return isTemplate &&\n        child.getAttribute('interpolate') !== undefined &&\n        child.getAttribute('end') !== undefined;\n}\n//# sourceMappingURL=interpolateContentTemplates.js.map","import { interpolateAttributes } from './interpolateAttributes.js';\nimport { interpolateToTemplates } from './interpolations.js';\nimport { interpolateContentTemplates } from './interpolateContentTemplates.js';\nimport { escapeSearch, variablePrefix } from '../tag/Tag.class.js';\n/** Review elements within an element */\nexport function interpolateElement(container, // element containing innerHTML to review interpolations\ncontext, // variables used to evaluate\ninterpolatedTemplates, ownerSupport, options) {\n    const clones = [];\n    const tagComponents = [];\n    const result = interpolatedTemplates.interpolation;\n    const template = container.children[0];\n    const children = template.content.children;\n    if (result.keys.length) {\n        const { clones: nextClones, tagComponents: nextTagComponents } = interpolateContentTemplates(context, ownerSupport, options, children);\n        clones.push(...nextClones);\n        tagComponents.push(...nextTagComponents);\n    }\n    interpolateAttributes(template, context, ownerSupport);\n    processChildrenAttributes(children, context, ownerSupport);\n    return { clones, tagComponents };\n}\nfunction processChildrenAttributes(children, context, ownerSupport) {\n    for (let index = children.length - 1; index >= 0; --index) {\n        const child = children[index];\n        interpolateAttributes(child, context, ownerSupport);\n        if (child.children) {\n            processChildrenAttributes(child.children, context, ownerSupport);\n        }\n    }\n}\nexport function interpolateString(string) {\n    const result = interpolateToTemplates(string);\n    result.string = result.string.replace(escapeSearch, variablePrefix);\n    return result;\n}\n//# sourceMappingURL=interpolateElement.js.map","import { buildClones } from '../render.js';\nimport { afterElmBuild } from './interpolateTemplate.js';\nexport function afterInterpolateElement(container, insertBefore, tagSupport, context, options) {\n    const clones = buildClones(container, insertBefore);\n    if (!clones.length) {\n        return clones;\n    }\n    for (let index = clones.length - 1; index >= 0; --index) {\n        const clone = clones[index];\n        afterElmBuild(clone, options, context, tagSupport);\n        tagSupport.global.clones.push(clone);\n    }\n    return clones;\n}\n//# sourceMappingURL=afterInterpolateElement.function.js.map","export function buildClones(temporary, insertBefore) {\n    const clones = [];\n    const template = temporary.children[0];\n    let nextSibling = template.content.firstChild;\n    const fragment = document.createDocumentFragment();\n    while (nextSibling) {\n        const nextNextSibling = nextSibling.nextSibling;\n        clones.push(nextSibling);\n        fragment.appendChild(nextSibling);\n        nextSibling = nextNextSibling;\n    }\n    if (insertBefore.parentNode) {\n        const parentNode = insertBefore.parentNode;\n        parentNode.insertBefore(fragment, insertBefore);\n    }\n    return clones;\n}\n//# sourceMappingURL=render.js.map","import { escapeVariable, variablePrefix } from './Tag.class.js';\nimport { deepClone } from '../deepFunctions.js';\nimport { isTagComponent } from '../isInstance.js';\nimport { cloneValueArray } from './cloneValueArray.function.js';\nimport { restoreTagMarker } from './checkDestroyPrevious.function.js';\nimport { runBeforeDestroy } from './tagRunner.js';\nimport { getChildTagsToDestroy } from './destroy.support.js';\nimport { elementDestroyCheck } from './elementDestroyCheck.function.js';\nimport { updateContextItem } from './update/updateContextItem.function.js';\nimport { processNewValue } from './update/processNewValue.function.js';\nimport { setTagPlaceholder } from './setTagPlaceholder.function.js';\nimport { interpolateElement, interpolateString } from '../interpolations/interpolateElement.js';\nimport { subscribeToTemplate } from '../interpolations/interpolateTemplate.js';\nimport { afterInterpolateElement } from '../interpolations/afterInterpolateElement.function.js';\nimport { Subject } from '../subject/Subject.class.js';\nconst prefixSearch = new RegExp(variablePrefix, 'g');\n/** used only for apps, otherwise use TagSupport */\nexport class BaseTagSupport {\n    templater;\n    subject;\n    isApp = true;\n    appElement; // only seen on this.getAppTagSupport().appElement\n    strings;\n    values;\n    propsConfig;\n    // stays with current render\n    memory = {\n        state: [],\n    };\n    // travels with all rerenderings\n    global = {\n        destroy$: new Subject(),\n        context: {}, // populated after reading interpolated.values array converted to an object {variable0, variable:1}\n        providers: [],\n        /** Indicator of re-rending. Saves from double rending something already rendered */\n        renderCount: 0,\n        subscriptions: [],\n        oldest: this,\n        blocked: [], // renders that did not occur because an event was processing\n        childTags: [], // tags on me\n        clones: [], // elements on document. Needed at destroy process to know what to destroy\n    };\n    hasLiveElements = false;\n    constructor(templater, subject, castedProps) {\n        this.templater = templater;\n        this.subject = subject;\n        const props = templater.props; // natural props\n        this.propsConfig = this.clonePropsBy(props, castedProps);\n    }\n    clonePropsBy(props, castedProps) {\n        const children = this.templater.children; // children tags passed in as arguments\n        const kidValue = children.value;\n        const latestCloned = props.map(props => deepClone(props));\n        return this.propsConfig = {\n            latest: props,\n            latestCloned, // assume its HTML children and then detect\n            castProps: castedProps, //?? castProps(props, this, this.memory.state),\n            lastClonedKidValues: kidValue.map(kid => {\n                const cloneValues = cloneValueArray(kid.values);\n                return cloneValues;\n            })\n        };\n    }\n    /** Function that kicks off actually putting tags down as HTML elements */\n    buildBeforeElement(insertBefore, options = {\n        counts: { added: 0, removed: 0 },\n    }) {\n        const subject = this.subject;\n        const global = this.global;\n        global.insertBefore = insertBefore;\n        if (!global.placeholder) {\n            setTagPlaceholder(global);\n        }\n        const placeholderElm = global.placeholder;\n        global.oldest = this;\n        global.newest = this;\n        subject.tagSupport = this;\n        this.hasLiveElements = true;\n        const context = this.update();\n        const template = this.getTemplate();\n        const elementContainer = document.createDocumentFragment();\n        const tempDraw = document.createElement('template');\n        tempDraw.innerHTML = template.string;\n        elementContainer.appendChild(tempDraw);\n        // Search/replace innerHTML variables but don't interpolate tag components just yet\n        const { tagComponents } = interpolateElement(elementContainer, context, template, this, // ownerSupport,\n        {\n            counts: options.counts\n        });\n        afterInterpolateElement(elementContainer, placeholderElm, this, // ownerSupport\n        context, options);\n        // Any tag components that were found should be processed AFTER the owner processes its elements. Avoid double processing of elements attributes like (oninit)=${}\n        const length = tagComponents.length;\n        for (let index = 0; index < length; ++index) {\n            const tagComponent = tagComponents[index];\n            subscribeToTemplate(tagComponent.insertBefore, tagComponent.subject, tagComponent.ownerSupport, options.counts);\n            afterInterpolateElement(elementContainer, tagComponent.insertBefore, tagComponent.ownerSupport, context, options);\n        }\n    }\n    getTemplate() {\n        const thisTag = this.templater.tag;\n        const strings = this.strings || thisTag.strings;\n        const values = this.values || thisTag.values;\n        const string = strings.map((string, index) => {\n            const safeString = string.replace(prefixSearch, escapeVariable);\n            const endString = safeString + (values.length > index ? `{${variablePrefix}${index}}` : '');\n            const trimString = endString.replace(/>\\s*/g, '>').replace(/\\s*</g, '<');\n            return trimString;\n        }).join('');\n        const interpolation = interpolateString(string);\n        return {\n            interpolation,\n            string: interpolation.string,\n            strings,\n            values,\n            context: this.global.context || {},\n        };\n    }\n    update() {\n        return this.updateContext(this.global.context);\n    }\n    updateContext(context) {\n        const thisTag = this.templater.tag;\n        const strings = this.strings || thisTag.strings;\n        const values = this.values || thisTag.values;\n        strings.forEach((_string, index) => {\n            const hasValue = values.length > index;\n            if (!hasValue) {\n                return;\n            }\n            const variableName = variablePrefix + index;\n            const value = values[index];\n            // is something already there?\n            const exists = variableName in context;\n            if (exists) {\n                if (this.global.deleted) {\n                    const valueSupport = (value && value.tagSupport);\n                    if (valueSupport) {\n                        valueSupport.destroy();\n                        return context; // item was deleted, no need to emit\n                    }\n                }\n                return updateContextItem(context, variableName, value);\n            }\n            //  First time values below\n            context[variableName] = processNewValue(value, this);\n        });\n        return context;\n    }\n    updateBy(tagSupport) {\n        const tempTag = tagSupport.templater.tag;\n        this.updateConfig(tempTag.strings, tempTag.values);\n    }\n    updateConfig(strings, values) {\n        this.strings = strings;\n        this.updateValues(values);\n    }\n    updateValues(values) {\n        this.values = values;\n        return this.updateContext(this.global.context);\n    }\n    destroy(options = {\n        stagger: 0,\n        byParent: false, // Only destroy clones of direct children\n    }) {\n        const firstDestroy = !options.byParent;\n        const global = this.global;\n        const childTags = options.byParent ? [] : getChildTagsToDestroy(this.global.childTags);\n        if (firstDestroy && isTagComponent(this.templater)) {\n            global.destroy$.next();\n            runBeforeDestroy(this, this);\n        }\n        this.destroySubscriptions();\n        // signify immediately child has been deleted (looked for during event processing)\n        for (let index = childTags.length - 1; index >= 0; --index) {\n            const child = childTags[index];\n            const subGlobal = child.global;\n            delete subGlobal.newest;\n            subGlobal.deleted = true;\n            if (isTagComponent(child.templater)) {\n                runBeforeDestroy(child, child);\n            }\n        }\n        let mainPromise;\n        // FIRST DOM Manipulation to cause painting cycle\n        checkRestoreTagMarker(this, options);\n        if (firstDestroy) {\n            const { stagger, promise } = this.destroyClones(options);\n            options.stagger = stagger;\n            if (promise) {\n                mainPromise = promise;\n            }\n        }\n        else {\n            this.destroyClones();\n        }\n        // data reset\n        resetTagSupport(this);\n        if (mainPromise) {\n            mainPromise = mainPromise.then(async () => {\n                const promises = childTags.map(kid => kid.destroy({ stagger: 0, byParent: true }));\n                return Promise.all(promises);\n            });\n        }\n        else {\n            mainPromise = Promise.all(childTags.map(kid => kid.destroy({ stagger: 0, byParent: true })));\n        }\n        return mainPromise.then(() => options.stagger);\n    }\n    destroyClones({ stagger } = {\n        stagger: 0,\n    }) {\n        const oldClones = [...this.global.clones];\n        this.global.clones.length = 0; // tag maybe used for something else\n        const promises = oldClones.map(clone => this.checkCloneRemoval(clone, stagger)).filter(x => x); // only return promises\n        // check subjects that may have clones attached to them\n        const oldContext = this.global.context;\n        for (const name in oldContext) {\n            const value = oldContext[name];\n            const clone = value.clone;\n            if (clone?.parentNode) {\n                clone.parentNode.removeChild(clone);\n            }\n        }\n        if (promises.length) {\n            return { promise: Promise.all(promises), stagger };\n        }\n        return { stagger };\n    }\n    /** Reviews elements for the presences of ondestroy */\n    checkCloneRemoval(clone, stagger) {\n        let promise;\n        const customElm = clone;\n        if (customElm.ondestroy) {\n            promise = elementDestroyCheck(customElm, stagger);\n        }\n        const next = () => {\n            const parentNode = clone.parentNode;\n            if (parentNode) {\n                parentNode.removeChild(clone);\n            }\n            const ownerSupport = this.ownerTagSupport;\n            if (ownerSupport) {\n                // Sometimes my clones were first registered to my owner, remove them from owner\n                ownerSupport.global.clones = ownerSupport.global.clones.filter(compareClone => compareClone !== clone);\n            }\n        };\n        if (promise instanceof Promise) {\n            return promise.then(next);\n        }\n        else {\n            next();\n        }\n        return promise;\n    }\n    destroySubscriptions() {\n        const subs = this.global.subscriptions;\n        for (let index = subs.length - 1; index >= 0; --index) {\n            subs[index].unsubscribe();\n        }\n        subs.length = 0;\n    }\n}\nexport class TagSupport extends BaseTagSupport {\n    templater;\n    ownerTagSupport;\n    subject;\n    version;\n    isApp = false;\n    constructor(templater, // at runtime rendering of a tag, it needs to be married to a new TagSupport()\n    ownerTagSupport, subject, castedProps, version = 0) {\n        super(templater, subject, castedProps);\n        this.templater = templater;\n        this.ownerTagSupport = ownerTagSupport;\n        this.subject = subject;\n        this.version = version;\n    }\n    getAppTagSupport() {\n        let tag = this;\n        while (tag.ownerTagSupport) {\n            tag = tag.ownerTagSupport;\n        }\n        return tag;\n    }\n}\nexport function checkRestoreTagMarker(support, options) {\n    const global = support.global;\n    // HTML DOM manipulation. Put back down the template tag\n    const insertBefore = global.insertBefore;\n    if (insertBefore.nodeName === 'TEMPLATE') {\n        const placeholder = global.placeholder;\n        if (placeholder && !('arrayValue' in support.memory)) {\n            if (!options.byParent) {\n                restoreTagMarker(support);\n            }\n        }\n    }\n}\nexport function resetTagSupport(support) {\n    const global = support.global;\n    delete global.placeholder;\n    global.context = {};\n    delete global.oldest; // may not be needed\n    delete global.newest;\n    support.global.childTags.length = 0;\n    const subject = support.subject;\n    delete subject.tagSupport;\n}\n//# sourceMappingURL=TagSupport.class.js.map","import { isSubjectInstance } from '../../isInstance.js';\nexport function updateContextItem(context, variableName, value) {\n    const subject = context[variableName];\n    if (isSubjectInstance(value)) {\n        return; // emits on its own\n    }\n    // listeners will evaluate updated values to possibly update display(s)\n    subject.next(value);\n    return;\n}\n//# sourceMappingURL=updateContextItem.function.js.map","export function elementDestroyCheck(nextSibling, stagger) {\n    const onDestroyDoubleWrap = nextSibling.ondestroy;\n    if (!onDestroyDoubleWrap) {\n        return;\n    }\n    const onDestroyWrap = onDestroyDoubleWrap.tagFunction;\n    if (!onDestroyWrap) {\n        return;\n    }\n    const onDestroy = onDestroyWrap.tagFunction;\n    if (!onDestroy) {\n        return;\n    }\n    const event = { target: nextSibling, stagger };\n    return onDestroy(event);\n}\n//# sourceMappingURL=elementDestroyCheck.function.js.map","import { checkRestoreTagMarker, resetTagSupport } from '../TagSupport.class.js';\nimport { getChildTagsToDestroy } from '../destroy.support.js';\n/** used when a tag swaps content returned */\nexport function softDestroySupport(lastSupport, options = { byParent: false, stagger: 0 }) {\n    lastSupport.global.deleted = true;\n    lastSupport.global.context = {};\n    const childTags = getChildTagsToDestroy(lastSupport.global.childTags);\n    lastSupport.destroySubscriptions();\n    childTags.forEach(child => {\n        const subGlobal = child.global;\n        delete subGlobal.newest;\n        subGlobal.deleted = true;\n    });\n    checkRestoreTagMarker(lastSupport, options);\n    resetTagSupport(lastSupport);\n    lastSupport.destroyClones();\n    childTags.forEach(child => softDestroySupport(child, { byParent: true, stagger: 0 }));\n}\n//# sourceMappingURL=softDestroySupport.function.js.map","import { softDestroySupport } from './softDestroySupport.function.js';\nimport { moveProviders } from '../update/updateExistingTagComponent.function.js';\nexport function destroyUnlikeTags(lastSupport, // old\nreSupport, // new\nsubject) {\n    const oldGlobal = lastSupport.global;\n    const insertBefore = oldGlobal.insertBefore;\n    // when a tag is destroyed, disconnect the globals\n    const global = reSupport.global = { ...oldGlobal }; // break memory references\n    moveProviders(lastSupport, reSupport);\n    // destroyTagMemory(lastSupport)\n    softDestroySupport(lastSupport);\n    lastSupport.global.oldest = reSupport; // any outstanding callbacks/state like activities should refer to replacing tag\n    global.insertBefore = insertBefore;\n    delete global.deleted;\n    global.oldest = reSupport;\n    global.newest = reSupport;\n    subject.tagSupport = reSupport;\n    const placeParent = reSupport.global.placeholder?.parentNode;\n    const insertParent = insertBefore.parentNode;\n    if (placeParent && insertParent) {\n        insertParent.removeChild(insertBefore);\n    }\n}\n//# sourceMappingURL=destroyUnlikeTags.function.js.map","import { isLikeTags } from '../isLikeTags.function.js';\nimport { renderTagOnly } from './renderTagOnly.function.js';\nimport { destroyUnlikeTags } from './destroyUnlikeTags.function.js';\nexport function renderWithSupport(newTagSupport, lastSupport, // previous\nsubject, // events & memory\nownerSupport) {\n    const reSupport = renderTagOnly(newTagSupport, lastSupport, subject, ownerSupport);\n    const isLikeTag = !lastSupport || isLikeTags(lastSupport, reSupport);\n    if (!isLikeTag) {\n        destroyUnlikeTags(lastSupport, reSupport, subject);\n        reSupport.global.oldest = reSupport;\n    }\n    const lastOwnerSupport = lastSupport?.ownerTagSupport;\n    reSupport.ownerTagSupport = (ownerSupport || lastOwnerSupport);\n    return reSupport;\n}\n//# sourceMappingURL=renderWithSupport.function.js.map","import { deepClone } from '../deepFunctions.js';\nimport { renderTagSupport } from '../tag/render/renderTagSupport.function.js';\nexport function handleProviderChanges(appSupport, provider) {\n    const tagsWithProvider = getTagsWithProvider(appSupport, provider);\n    for (let index = tagsWithProvider.length - 1; index >= 0; --index) {\n        const { tagSupport, renderCount, provider } = tagsWithProvider[index];\n        if (tagSupport.global.deleted) {\n            continue; // i was deleted after another tag processed\n        }\n        const notRendered = renderCount === tagSupport.global.renderCount;\n        if (notRendered) {\n            provider.clone = deepClone(provider.instance);\n            renderTagSupport(tagSupport.global.newest, // tagSupport, // tagSupport.global.newest as TagSupport,\n            false);\n            continue;\n        }\n    }\n}\n/** Updates and returns memory of tag providers */\nfunction getTagsWithProvider(tagSupport, provider, memory = []) {\n    memory.push({\n        tagSupport,\n        renderCount: tagSupport.global.renderCount,\n        provider,\n    });\n    const childTags = provider.children;\n    for (let index = childTags.length - 1; index >= 0; --index) {\n        memory.push({\n            tagSupport: childTags[index],\n            renderCount: childTags[index].global.renderCount,\n            provider,\n        });\n    }\n    return memory;\n}\n//# sourceMappingURL=handleProviderChanges.function.js.map","import { isLikeTags } from '../isLikeTags.function.js';\nimport { renderWithSupport } from './renderWithSupport.function.js';\nimport { providersChangeCheck } from '../../state/providersChangeCheck.function.js';\n/** Returns true when rendering owner is not needed. Returns false when rendering owner should occur */\nexport function renderExistingTag(oldestSupport, // oldest with elements on html\nnewSupport, // new to be rendered\nownerSupport, // ownerSupport\nsubject) {\n    const lastSupport = subject.tagSupport;\n    const global = lastSupport.global;\n    // share point between renders\n    newSupport.global = global;\n    const preRenderCount = global.renderCount;\n    providersChangeCheck(oldestSupport);\n    // When the providers were checked, a render to myself occurred and I do not need to re-render again\n    const prevSupport = global.newest;\n    const justUpdate = preRenderCount !== global.renderCount;\n    if (justUpdate) {\n        oldestSupport.global.oldest.updateBy(prevSupport);\n        return prevSupport; // already rendered during triggered events\n    }\n    const toRedrawTag = prevSupport || lastSupport || global.oldest;\n    const reSupport = renderWithSupport(newSupport, toRedrawTag, subject, ownerSupport);\n    const oldest = global.oldest || oldestSupport;\n    if (isLikeTags(prevSupport, reSupport)) {\n        subject.tagSupport = reSupport;\n        oldest.updateBy(reSupport);\n    }\n    return reSupport;\n}\n//# sourceMappingURL=renderExistingTag.function.js.map","import { deepClone, deepEqual } from '../deepFunctions.js';\nimport { handleProviderChanges } from './handleProviderChanges.function.js';\nexport function providersChangeCheck(tagSupport) {\n    const global = tagSupport.global;\n    const providersWithChanges = global.providers.filter(provider => !deepEqual(provider.instance, provider.clone));\n    // reset clones\n    for (let index = providersWithChanges.length - 1; index >= 0; --index) {\n        const provider = providersWithChanges[index];\n        const owner = provider.owner;\n        handleProviderChanges(owner, provider);\n        provider.clone = deepClone(provider.instance);\n    }\n}\n//# sourceMappingURL=providersChangeCheck.function.js.map","import { deepEqual } from '../../deepFunctions.js';\nimport { renderExistingTag } from './renderExistingTag.function.js';\n/** Main function used by all other callers to render/update display of a tag component */\nexport function renderTagSupport(tagSupport, // must be latest/newest state render\nrenderUp) {\n    const global = tagSupport.global;\n    const templater = tagSupport.templater;\n    // is it just a vanilla tag, not component?\n    if (!templater.wrapper) { // || isTagTemplater(templater) \n        const ownerTag = tagSupport.ownerTagSupport;\n        ++global.renderCount;\n        if (ownerTag.global.deleted) {\n            return tagSupport;\n        }\n        return renderTagSupport(ownerTag.global.newest, true);\n    }\n    if (tagSupport.global.locked) {\n        tagSupport.global.blocked.push(tagSupport);\n        return tagSupport;\n    }\n    const subject = tagSupport.subject;\n    const oldest = tagSupport.global.oldest;\n    let ownerSupport;\n    let selfPropChange = false;\n    const shouldRenderUp = renderUp && tagSupport;\n    if (shouldRenderUp) {\n        ownerSupport = tagSupport.ownerTagSupport;\n        if (ownerSupport) {\n            const nowProps = templater.props;\n            const latestProps = tagSupport.propsConfig.latestCloned;\n            selfPropChange = !deepEqual(nowProps, latestProps);\n        }\n    }\n    const tag = renderExistingTag(oldest, tagSupport, ownerSupport, // useTagSupport,\n    subject);\n    if (ownerSupport && selfPropChange) {\n        const ownerTagSupport = ownerSupport.global.newest;\n        renderTagSupport(ownerTagSupport, true);\n        return tag;\n    }\n    return tag;\n}\n//# sourceMappingURL=renderTagSupport.function.js.map","import { renderTagSupport } from '../tag/render/renderTagSupport.function.js';\nimport { syncStates } from './syncStates.function.js';\nexport default function callbackStateUpdate(tagSupport, callback, oldState, ...args) {\n    const state = tagSupport.memory.state;\n    // ensure that the oldest has the latest values first\n    syncStates(state, oldState);\n    // run the callback\n    const maybePromise = callback(...args);\n    // send the oldest state changes into the newest\n    syncStates(oldState, state);\n    renderTagSupport(tagSupport, // tagSupport.global.newest as TagSupport,\n    false);\n    if (maybePromise instanceof Promise) {\n        maybePromise.finally(() => {\n            // send the oldest state changes into the newest\n            syncStates(oldState, state);\n            renderTagSupport(tagSupport, // tagSupport.global.newest as TagSupport,\n            false);\n        });\n    }\n    // return undefined as T\n    return maybePromise;\n}\n//# sourceMappingURL=callbackStateUpdate.function.js.map","import { setUse } from './setUse.function.js';\nimport { SyncCallbackError } from '../errors.js';\nimport { getSupportInCycle } from '../tag/getSupportInCycle.function.js';\nimport callbackStateUpdate from './callbackStateUpdate.function.js';\nlet innerCallback = (callback) => (a, b, c, d, e, f) => {\n    throw new SyncCallbackError('Callback function was called immediately in sync and must instead be call async');\n};\nexport const callbackMaker = () => innerCallback;\nconst originalGetter = innerCallback; // callbackMaker\nsetUse({\n    beforeRender: tagSupport => initMemory(tagSupport),\n    beforeRedraw: tagSupport => initMemory(tagSupport),\n    afterRender: tagSupport => {\n        ;\n        tagSupport.global.callbackMaker = true;\n        innerCallback = originalGetter; // prevent crossing callbacks with another tag\n    },\n});\n/** Wrap a function that will be called back. After the wrapper and function are called, a rendering cycle will update display */\nexport function callback(callback) {\n    const tagSupport = getSupportInCycle();\n    if (!tagSupport) {\n        const error = new SyncCallbackError('callback() was called outside of synchronous rendering. Use `callback = callbackMaker()` to create a callback that could be called out of sync with rendering');\n        throw error;\n    }\n    const oldState = setUse.memory.stateConfig.array;\n    const trigger = (...args) => {\n        const callbackMaker = tagSupport.global.callbackMaker;\n        if (callbackMaker) {\n            return callbackStateUpdate(tagSupport, callback, oldState, ...args);\n        }\n        return callback(...args);\n    };\n    return trigger;\n}\nfunction initMemory(tagSupport) {\n    const oldState = setUse.memory.stateConfig.array;\n    innerCallback = (callback) => {\n        const trigger = (...args) => {\n            const callbackMaker = tagSupport.global.callbackMaker;\n            if (callbackMaker) {\n                return callbackStateUpdate(tagSupport, callback, oldState, ...args);\n            }\n            return callback(...args);\n        };\n        return trigger;\n    };\n}\n//# sourceMappingURL=callbackMaker.function.js.map","import { state } from './state.function.js';\n/** runs a callback function one time and never again. Same as calling state(() => ...) */\nexport function onInit(callback) {\n    state(callback);\n}\n//# sourceMappingURL=onInit.js.map","import { getSupportInCycle } from \"../tag/getSupportInCycle.function.js\";\nimport { state } from \"./state.function.js\";\nexport function onDestroy(callback) {\n    state(() => {\n        const tagSupport = getSupportInCycle();\n        tagSupport?.global.destroy$.toCallback(callback);\n    });\n}\n//# sourceMappingURL=onDestroy.js.map","import { setUse } from './setUse.function.js';\nfunction setCurrentTagSupport(support) {\n    setUse.memory.childrenCurrentSupport = support;\n}\nexport function children() {\n    const tagSupport = setUse.memory.childrenCurrentSupport;\n    const children = tagSupport.templater.children;\n    return children;\n}\nsetUse({\n    beforeRender: tagSupport => setCurrentTagSupport(tagSupport),\n    beforeRedraw: tagSupport => setCurrentTagSupport(tagSupport),\n});\n//# sourceMappingURL=children.js.map","export const tags = [];\n//# sourceMappingURL=tag.utils.js.map","import { Tag } from './Tag.class.js';\nexport function html(strings, ...values) {\n    return new Tag(strings, values);\n}\n//# sourceMappingURL=html.js.map","import { setUse } from '../state/index.js';\nimport { TemplaterResult } from './TemplaterResult.class.js';\nimport { tags } from './tag.utils.js';\nimport { getTagWrap } from './getTagWrap.function.js';\nimport { ValueTypes } from './ValueTypes.enum.js';\nlet tagCount = 0;\n/** Wraps a function tag in a state manager and calls wrapped function on event cycles\n * For single rendering, no event cycles, use: tag.renderOnce = (props) => html``\n */\nexport function tag(tagComponent) {\n    /** function developer triggers */\n    const parentWrap = (function tagWrapper(...props) {\n        const templater = new TemplaterResult(props);\n        templater.tagJsType = ValueTypes.tagComponent;\n        // attach memory back to original function that contains developer display logic\n        const innerTagWrap = getTagWrap(templater, parentWrap);\n        if (!innerTagWrap.parentWrap) {\n            innerTagWrap.parentWrap = parentWrap;\n        }\n        templater.tagged = true;\n        templater.wrapper = innerTagWrap;\n        return templater;\n    }) // we override the function provided and pretend original is what's returned\n    ;\n    parentWrap.original = tagComponent;\n    parentWrap.compareTo = tagComponent.toString();\n    const tag = tagComponent;\n    parentWrap.isTag = true;\n    parentWrap.original = tag;\n    // group tags together and have hmr pickup\n    tag.tags = tags;\n    tag.setUse = setUse;\n    tag.tagIndex = tagCount++; // needed for things like HMR\n    tags.push(parentWrap);\n    return parentWrap;\n}\n/** Used to create a tag component that renders once and has no addition rendering cycles */\ntag.oneRender = (...props) => {\n    throw new Error('Do not call function tag.oneRender but instead set it as: `(props) => tag.oneRender = (state) => html`` `');\n};\n/** Use to structure and define a browser tag route handler\n * Example: export default tag.route = (routeProps: RouteProps) => (state) => html``\n */\ntag.route = (routeProps) => {\n    throw new Error('Do not call function tag.route but instead set it as: `tag.route = (routeProps: RouteProps) => (state) => html`` `');\n};\n/** Use to structure and define a browser tag route handler\n * Example: export default tag.route = (routeProps: RouteProps) => (state) => html``\n */\ntag.app = (routeTag) => {\n    throw new Error('Do not call function tag.route but instead set it as: `tag.route = (routeProps: RouteProps) => (state) => html`` `');\n};\nObject.defineProperty(tag, 'oneRender', {\n    set(oneRenderFunction) {\n        oneRenderFunction.oneRender = true;\n    },\n});\n//# sourceMappingURL=tag.js.map","import { runTagCallback } from '../interpolations/bindSubjectCallback.function.js';\nimport { deepClone } from '../deepFunctions.js';\nimport { TagSupport } from './TagSupport.class.js';\nimport { castProps } from '../alterProp.function.js';\nimport { setUse } from '../state/setUse.function.js';\nimport { ValueTypes } from './ValueTypes.enum.js';\nimport { html } from './html.js';\n/** creates/returns a function that when called then calls the original component function\n * Gets used as templater.wrapper()\n */\nexport function getTagWrap(templater, result) {\n    const stateArray = setUse.memory.stateConfig.array;\n    // this function gets called by taggedjs\n    const wrapper = function (lastTagSupport, subject) {\n        const global = lastTagSupport.global;\n        ++global.renderCount;\n        const childSubject = templater.children;\n        const lastArray = global.oldest?.templater.children.lastArray;\n        if (lastArray) {\n            childSubject.lastArray = lastArray;\n        }\n        // result.original\n        const originalFunction = result.original; // (innerTagWrap as any).original as unknown as TagComponent\n        let props = templater.props;\n        // When defined, this must be an update where my new props have already been made for me\n        const preCastedProps = lastTagSupport.propsConfig.castProps;\n        const castedProps = preCastedProps || castProps(props, lastTagSupport, stateArray);\n        const latestCloned = props.map(props => deepClone(props)); // castedProps\n        // CALL ORIGINAL COMPONENT FUNCTION\n        let tag = originalFunction(...castedProps);\n        if (tag instanceof Function) {\n            tag = tag();\n        }\n        if (!tag || tag.tagJsType !== ValueTypes.tag) {\n            tag = html `${tag}`; // component returned a non-component value\n        }\n        tag.templater = templater;\n        templater.tag = tag;\n        tag.memory.arrayValue = templater.arrayValue; // tag component could have been used in array.map\n        const tagSupport = new TagSupport(templater, lastTagSupport.ownerTagSupport, subject, castedProps, global.renderCount);\n        tagSupport.global = global;\n        const nowState = setUse.memory.stateConfig.array;\n        tagSupport.memory.state.push(...nowState);\n        if (templater.madeChildIntoSubject) {\n            const value = childSubject.value;\n            for (let index = value.length - 1; index >= 0; --index) {\n                const kid = value[index];\n                const values = kid.values;\n                for (let index = values.length - 1; index >= 0; --index) {\n                    const value = values[index];\n                    if (!(value instanceof Function)) {\n                        continue;\n                    }\n                    const valuesValue = kid.values[index];\n                    if (valuesValue.isChildOverride) {\n                        continue; // already overwritten\n                    }\n                    // all functions need to report to me\n                    kid.values[index] = function (...args) {\n                        const ownerSupport = tagSupport.ownerTagSupport;\n                        return runTagCallback(value, // callback\n                        ownerSupport, this, // bindTo\n                        args);\n                    };\n                    valuesValue.isChildOverride = true;\n                }\n            }\n        }\n        return tagSupport;\n    };\n    return wrapper;\n}\n//# sourceMappingURL=getTagWrap.function.js.map","import { BaseTagSupport } from './TagSupport.class.js';\nimport { runAfterRender, runBeforeRender } from './tagRunner.js';\nimport { ValueSubject } from '../subject/ValueSubject.js';\nconst appElements = [];\n/**\n *\n * @param app taggedjs tag\n * @param element HTMLElement\n * @param props object\n * @returns\n */\nexport function tagElement(app, // (...args: unknown[]) => TemplaterResult,\nelement, props) {\n    const appElmIndex = appElements.findIndex(appElm => appElm.element === element);\n    if (appElmIndex >= 0) {\n        appElements[appElmIndex].tagSupport.destroy();\n        appElements.splice(appElmIndex, 1);\n        // an element already had an app on it\n        console.warn('Found and destroyed app element already rendered to element', { element });\n    }\n    // Create the app which returns [props, runOneTimeFunction]\n    const wrapper = app(props);\n    // have a function setup and call the tagWrapper with (props, {update, async, on})\n    const tagSupport = runWrapper(wrapper);\n    tagSupport.appElement = element;\n    tagSupport.isApp = true;\n    tagSupport.global.isApp = true;\n    const templateElm = document.createElement('template');\n    templateElm.setAttribute('id', 'app-tag-' + appElements.length);\n    templateElm.setAttribute('app-tag-detail', appElements.length.toString());\n    const fragment = document.createDocumentFragment();\n    fragment.appendChild(templateElm);\n    element.destroy = async () => {\n        await tagSupport.destroy();\n        const insertBefore = tagSupport.global.insertBefore;\n        const parentNode = insertBefore.parentNode;\n        parentNode.removeChild(insertBefore);\n    };\n    tagSupport.buildBeforeElement(templateElm);\n    tagSupport.global.oldest = tagSupport;\n    tagSupport.global.newest = tagSupport;\n    element.setUse = app.original.setUse;\n    appElements.push({ element, tagSupport });\n    element.appendChild(fragment);\n    return {\n        tagSupport,\n        tags: app.original.tags,\n    };\n}\nexport function runWrapper(templater) {\n    let newSupport = {};\n    // TODO: A fake subject may become a problem\n    const subject = new ValueSubject(newSupport);\n    newSupport = new BaseTagSupport(templater, subject);\n    subject.next(templater);\n    subject.tagSupport = newSupport;\n    runBeforeRender(newSupport, undefined);\n    // Call the apps function for our tag templater\n    const wrapper = templater.wrapper;\n    const tagSupport = wrapper(newSupport, subject);\n    runAfterRender(newSupport, tagSupport);\n    return tagSupport;\n}\n//# sourceMappingURL=tagElement.js.map","export * from './tag/index.js';\nexport * from './errors.js';\nexport * from './subject.types.js';\nexport * from './isInstance.js';\nexport * from './state/index.js';\nexport * from './subject/index.js';\nexport * from './tag/TagSupport.class.js';\nexport * from './interpolations/ElementTargetEvent.interface.js';\nexport * from './interpolations/interpolateElement.js';\nexport * from './interpolations/InsertBefore.type.js';\nexport { tagElement } from './tag/tagElement.js';\nexport { Tag, variablePrefix } from './tag/Tag.class.js';\nexport { runBeforeRender } from './tag/tagRunner.js';\nexport { renderTagSupport } from './tag/render/renderTagSupport.function.js';\nexport { renderWithSupport } from './tag/render/renderWithSupport.function.js';\nexport { isLikeValueSets } from './tag/isLikeTags.function.js';\nimport { renderTagOnly } from './tag/render/renderTagOnly.function.js';\nimport { renderTagSupport } from './tag/render/renderTagSupport.function.js';\nimport { renderWithSupport } from './tag/render/renderWithSupport.function.js';\nimport { tagElement } from './tag/tagElement.js';\nexport const hmr = {\n    tagElement, renderWithSupport, renderTagSupport,\n    renderTagOnly,\n};\n//# sourceMappingURL=index.js.map","import { html, letState, tag } from \"taggedjs\"\n\nexport const attributeDebug = tag(() => {\n  let selected: string = letState('a')(x => [selected, selected = x])\n  let isOrange: boolean = letState(true)(x => [isOrange, isOrange = x])\n\n  return html`\n    <input onchange=${(event: any) => selected = event.target.value} placeholder=\"a b or c\" />\n    <select id=\"select-sample-drop-down\">\n      ${['a','b','c'].map(item => html`\n        <option value=${item} ${item == selected ? 'selected' : ''}>${item} - ${item == selected ? 'true' : 'false'}</option>\n      `.key(item))}\n    </select>\n    <hr />\n    <h3>Special Attributes</h3>\n    <div>\n      <input type=\"checkbox\" onchange=${(event: any) => isOrange = event.target.checked} ${isOrange && 'checked'} /> - ${isOrange ? 'true' : 'false'}\n    </div>\n    <div style=\"display: flex;flex-wrap:wrap;gap:1em\">      \n      <div\n        style.background-color=${isOrange ? 'orange' : ''}\n        style.color=${isOrange ? 'black': ''}\n      >style.background-color=&dollar;{'orange'}</div>\n      \n      <div\n        class.background-orange=${isOrange ? true : false}\n        class.text-black=${isOrange ? true : false}\n      >class.background-orange=&dollar;{true}</div>\n      \n      <div class=${isOrange ? 'background-orange text-black' : ''}\n      >class=&dollar;{'background-orange text-black'}</div>\n      \n      <div ${{class: 'text-white' + (isOrange ? ' background-orange' : '')}}\n      >class=&dollar;{'background-orange'} but always white</div>\n    </div>\n    <style>\n      .background-orange {background-color:orange}\n      .text-black {color:black}\n      .text-white {color:white}\n    </style>\n  `\n})\n","import { html, tag, letState, ValueSubject, state, combineLatest, willPromise } from \"taggedjs\"\n\nexport const contentDebug = tag(() => {\n  const vs0 = state(() => new ValueSubject(0))\n  const vs1 = state(() => new ValueSubject(1))\n\n  let renderCount: number = letState(0)(x => [renderCount, renderCount=x])\n\n  ++renderCount\n\n  return html`\n    <div style=\"font-size:0.8em\">You should see \"0\" here => \"${0}\"</div>\n    <!--proof you cannot see false values -->\n    <div style=\"font-size:0.8em\">\n      <fieldset>\n        <legend>false test</legend>\n        You should see \"\" here => \"${false}\"\n      </fieldset>\n    </div>\n    <div style=\"font-size:0.8em\">\n      <fieldset>\n        <legend>null test</legend>\n        You should see \"\" here => \"${null}\"\n      </fieldset>\n    </div>\n    <div style=\"font-size:0.8em\">\n      <fieldset>\n        <legend>undefined test</legend>\n        You should see \"\" here => \"${undefined}\"\n      </fieldset>\n    </div>\n    <!--proof you can see true booleans -->\n    <div style=\"font-size:0.8em\">\n      <fieldset>\n        <legend>true test</legend>\n        You should see \"true\" here => \"${true}\"\n      </fieldset>\n    </div>\n    <!--proof you can try to use the tagVar syntax -->\n    <div style=\"font-size:0.8em\">You should see \"${'{'}22${'}'}\" here => \"{22}\"</div>\n    <div style=\"font-size:0.8em\">You should see \"${'{'}__tagVar0${'}'}\" here => \"{__tagVar0}\"</div>\n    <div style=\"font-size:0.8em\">should be a safe string no html \"&lt;div&gt;hello&lt;/div&gt;\" here => \"${'<div>hello</div>'}\"</div>\n    <div style=\"display:flex;flex-wrap:wrap;gap:1em\">\n      <fieldset style=\"flex:1\">\n        <legend>value subject</legend>\n        0 === ${vs0}\n      </fieldset>\n      \n      <fieldset style=\"flex:1\">\n        <legend>piped subject</legend>        \n        <span id=\"content-subject-pipe-display0\">55</span> ===\n        <span id=\"content-subject-pipe-display1\">${vs0.pipe(() => 55)}</span>\n      </fieldset>\n      \n      <fieldset style=\"flex:1\">\n        <legend>combineLatest</legend>\n        <span id=\"content-combineLatest-pipe-display0\">1</span> ===\n        <span id=\"content-combineLatest-pipe-display1\">${combineLatest([vs0, vs1]).pipe(x => x[1])}</span>\n      </fieldset>\n      \n      <fieldset style=\"flex:1\">\n        <legend>combineLatest piped html</legend>\n        <span id=\"content-combineLatest-pipeHtml-display0\"><b>bold 77</b></span> ===\n        <span id=\"content-combineLatest-pipeHtml-display1\">${\n          combineLatest([vs0, vs1]).pipe(\n            willPromise(x => Promise.resolve(html`<b>bold 77</b>`))\n          )\n        }</span>\n      </fieldset>\n    </div>\n    (render count ${renderCount})\n  `\n})","export function willCallback(callback) {\n    return ((lastValue, utils) => {\n        utils.setHandler(() => {\n            return undefined;\n        });\n        callback(lastValue, utils.next);\n    });\n}\n/** .pipe( promise((x) => Promise.resolve(44)) ) */\nexport function willPromise(callback) {\n    return ((lastValue, utils) => {\n        utils.setHandler(() => {\n            return undefined;\n        }); // do nothing on initial return\n        const result = callback(lastValue);\n        result.then(x => utils.next(x));\n    });\n}\n/** .pipe( willSubscribe((x) => new ValueSubject(44)) ) */\nexport const willSubscribe = (callback) => {\n    return ((lastValue, utils) => {\n        utils.setHandler(() => {\n            return undefined;\n        }); // do nothing on initial return\n        const result = callback(lastValue);\n        const subscription = result.subscribe(x => {\n            subscription.unsubscribe();\n            utils.next(x);\n        });\n    });\n};\n//# sourceMappingURL=will.functions.js.map","import { html, tag, letState } from \"taggedjs\"\n\nexport const tableDebug = tag(() => {\n  let showCell: boolean = letState(true)(x => [showCell, showCell = x])\n\n  return html`\n    <div style=\"max-height: 800px;overflow-y: scroll;\">\n      <table cellPadding=${5} cellSpacing=${5} border=\"1\">\n        <thead style=\"position: sticky;top: 0;\">\n          <tr>\n            <th>hello</th>\n            <th>hello</th>\n            ${showCell && html`\n              <td>hello 2 thead cell</td>\n            `}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>world</td>\n            <td>world</td>\n            ${showCell && html`\n              <td>world 2 tbody cell</td>\n            `}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  `\n})\n","import { letState, html, tag, onInit, callbackMaker, onDestroy } from \"taggedjs\"\n\nconst test0interval = 3000\nconst test1interval = 6000\n\nexport const intervalTester0 = tag(() => {\n  let intervalCount: number = letState(0)(x => [intervalCount, intervalCount = x])\n  let intervalId: any = letState(undefined)(x => [intervalId, intervalId = x])\n  let intervalId2: any = letState(undefined)(x => [intervalId2, intervalId2 = x])\n  let renderCounter: number = letState(0)(x => [renderCounter, renderCounter = x])\n  let currentTime: number = letState(0)(x => [currentTime, currentTime = x])\n  \n  const callback = callbackMaker()\n  const increase = () => ++intervalCount\n\n  const startInterval = () => {\n    console.info(' interval test 0 started...')\n    trackTime()\n\n    intervalId = setInterval(callback(() => {\n      increase()\n    }),test0interval)\n  }\n\n  const stopInterval = () => {\n    clearInterval(intervalId)\n    clearInterval(intervalId2)\n    intervalId = undefined\n    intervalId2 = undefined\n    console.info(' interval test 0 stopped')\n  }\n\n  function trackTime() {\n    currentTime = 0\n    \n    intervalId2 = setInterval(callback(() => {\n      currentTime = currentTime + 500\n\n      if(currentTime >= test0interval) {\n        currentTime = 0\n      }      \n    }), 500)\n\n    console.info(' interval started')\n  }\n\n  const toggle = () => {\n    if(intervalId || intervalId2) {\n      stopInterval()\n      return\n    }\n\n    startInterval()\n  }\n\n  const delayIncrease = () => setTimeout(callback(() => {\n    currentTime = currentTime + 200\n  }), 1000);\n\n  onInit(startInterval)\n  onDestroy(stopInterval)\n\n  ++renderCounter\n\n  return html`<!--intervalDebug.js-->\n    <div>interval type 1 at ${test0interval}ms</div>\n    intervalId: ${intervalId}\n    <button type=\"button\" onclick=${increase}>${intervalCount}:${renderCounter}</button>\n    <input type=\"range\" min=\"0\" max=${test0interval} step=\"1\" value=${currentTime} />\n    <div>\n      --${currentTime}--\n    </div>\n    <button type=\"button\" onclick=${toggle}\n      style.background-color=${intervalId || intervalId2 ? 'red' : 'green'}\n    >start/stop</button>\n    <button type=\"button\" onclick=${delayIncrease}>delay increase currentTime</button>\n  `\n})\n\nexport const intervalTester1 = tag(() => {  \n  let intervalCount: number = letState(0)(x => [intervalCount, intervalCount = x])\n  let intervalId: any = letState(undefined)(x => [intervalId, intervalId = x])\n  let intervalId2: any = letState(undefined)(x => [intervalId2, intervalId2 = x])\n  let renderCounter: number = letState(0)(x => [renderCounter, renderCounter = x])\n  let currentTime: number = letState(0)(x => [currentTime, currentTime = x])\n  \n  const callback = callbackMaker()\n  const increase = () => ++intervalCount\n\n  function trackTime() {\n    currentTime = 0\n    \n    intervalId2 = setInterval(callback(() => {\n      currentTime = currentTime + 500\n\n      if(currentTime >= test1interval) {\n        currentTime = 0\n      }\n    }), 500)\n  }\n\n  const destroy = () => {\n    clearInterval(intervalId)\n    clearInterval(intervalId2)\n    intervalId = undefined\n    intervalId2 = undefined\n    console.info(' interval 1 stopped')\n  }\n\n  function toggleInterval() {\n    if(intervalId) {\n      return destroy()\n    }\n\n    console.info(' interval test 1 started...')\n    trackTime()\n    intervalId = setInterval(callback(() => {\n      increase()\n      console.info('slow interval ran')\n    }),test1interval)\n  }\n\n  onInit(toggleInterval)\n  onDestroy(destroy)\n\n  ++renderCounter\n\n  return html`\n    <div>interval type 2 with ${test1interval}ms</div>\n    intervalId: ${intervalId}\n    <button type=\"button\" onclick=${increase}>${intervalCount}:${renderCounter}</button>\n    <input type=\"range\" min=\"0\" max=${test1interval} step=\"1\" value=${currentTime} />\n    <div>\n      --${currentTime}--\n    </div>\n    <button type=\"button\" onclick=${toggleInterval}\n      style.background-color=${intervalId ? 'red' : 'green'}\n    >start/stop</button>\n  `\n})\n","export function createFx({ fxIn, fxOut, staggerBy = 300, }) {\n    return {\n        in: (input) => animateInit({ fxName: fxIn, staggerBy, ...input }),\n        out: (input) => animateDestroy({ fxName: fxOut, staggerBy, capturePosition: true, ...input }),\n    };\n}\nconst animateInit = async ({ target, stagger, staggerBy, fxName = 'fadeInDown' }) => {\n    target.style.opacity = '0';\n    if (stagger) {\n        await wait(stagger * staggerBy);\n    }\n    target.style.opacity = '1';\n    target.classList.add('animate__animated', 'animate__' + fxName);\n};\nconst animateDestroy = async ({ target, stagger, capturePosition = true, fxName = 'fadeOutUp', staggerBy }) => {\n    if (capturePosition) {\n        captureElementPosition(target);\n    }\n    if (stagger) {\n        await wait(stagger * staggerBy);\n    }\n    target.classList.add('animate__animated', 'animate__' + fxName);\n    await wait(1000); // don't allow remove from stage until animation completed\n    target.classList.remove('animate__animated', 'animate__' + fxName);\n};\n// absolute\nexport function captureElementPosition(element) {\n    element.style.zIndex = element.style.zIndex || 1;\n    const toTop = element.offsetTop + 'px';\n    const toLeft = element.offsetLeft + 'px';\n    const toWidth = (element.clientWidth + (element.offsetWidth - element.clientWidth) + 1) + 'px';\n    const toHeight = (element.clientHeight + (element.offsetHeight - element.clientHeight) + 1) + 'px';\n    const fix = () => {\n        element.style.top = toTop;\n        element.style.left = toLeft;\n        element.style.width = toWidth;\n        element.style.height = toHeight;\n        element.style.position = 'absolute';\n    };\n    // element.style.position = 'fixed'\n    // allow other elements that are being removed to have a moment to figure out where they currently sit\n    setTimeout(fix, 0);\n}\nfunction wait(time) {\n    return new Promise((res) => {\n        setTimeout(res, time);\n    });\n}\n//# sourceMappingURL=createFx.function.js.map","import { createFx } from \"./createFx.function.js\";\nexport const { in: fadeInDown, out: fadeOutUp } = createFx({ fxIn: 'fadeInDown', fxOut: 'fadeOutUp' });\n//# sourceMappingURL=index.js.map","import { intervalTester0, intervalTester1 } from \"./intervalDebug\"\nimport { html, tag, letState } from \"taggedjs\"\nimport { fadeInDown, fadeOutUp } from \"./animations\"\n\nexport const tagDebug = tag(() => {// tagDebug.js\n  let _firstState: string = letState('tagJsDebug.js')(x => [_firstState, _firstState = x])\n  let showIntervals: boolean = letState(false)(x => [showIntervals, showIntervals = x])\n  let renderCount: number = letState(0)(x => [renderCount, renderCount = x])\n\n  ++renderCount\n\n  return html`<!-- tagDebug.js -->\n    <div style=\"display:flex;flex-wrap:wrap;gap:1em\">    \n      <fieldset id=\"debug-intervals\" style=\"flex:2 2 20em\">\n        <legend>\n          Interval Testing\n        </legend>\n\n        <button\n          onclick=${() => showIntervals = !showIntervals}\n        >hide/show</button>\n\n        ${showIntervals && html`\n          <div oninit=${fadeInDown} ondestroy=${fadeOutUp}>\n            <div>${intervalTester0()}</div>\n            <hr />\n            <div>${intervalTester1()}</div>\n          </div>\n        `}\n      </fieldset>\n    </div>\n  `\n})\n","import { tag, html } from \"taggedjs\"\n\nexport const renderCountDiv = tag((\n  {renderCount, name}: {\n    renderCount: number\n    name: string\n  }\n) => html`<div><small>(${name} render count <span id=${name+'_render_count'}>${renderCount}</span>)</small></div>`)\n","import { html, tag, letState, InputElementTargetEvent, Tag } from \"taggedjs\"\nimport { renderCountDiv } from \"./renderCount.component.js\"\n\ntype SelectedTag = null | string | undefined\n\nexport const tagSwitchDebug = tag((_t='tagSwitchDebug') => {\n  let selectedTag = letState(null as SelectedTag)(x => [selectedTag, selectedTag = x])\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  \n  function changeSelectedTag(event: InputElementTargetEvent) {\n    selectedTag = event.target.value\n\n    if(selectedTag === 'undefined') {\n      selectedTag = undefined\n    }\n\n    if(selectedTag === 'null') {\n      selectedTag = null\n    }\n  }\n\n  let tagOutput: string | Tag = 'select tag below'\n  switch (selectedTag) {\n    case null: tagOutput = 'null, select tag below'\n      break;\n    case \"\": tagOutput = html`<div id=\"empty-string-1\"></div>`\n      break;\n    case '1': tagOutput = tag1({title:'value switch'})\n      break;\n    case '2': tagOutput = tag2({title:'value switch'})\n      break;\n    case '3': tagOutput = tag3({title:'value switch'})\n      break;\n  }\n\n  let tagOutput2 = html`<div id=\"select-tag-above\">select tag above</div>`\n  switch (selectedTag) {\n    case null: tagOutput2 = html`<div id=\"select-tag-above\">null, select tag above</div>`\n      break;\n    case \"\": tagOutput2 = html`<div id=\"select-tag-above\">empty-string, select tag above</div>`\n      break;\n    case '1': tagOutput2 = tag1({title:'tag switch'})\n      break;\n    case '2': tagOutput2 = tag2({title:'tag switch'})\n      break;\n    case '3': tagOutput2 = tag3({title:'tag switch'})\n      break;\n  }\n\n  ++renderCount\n\n  return html`\n    <div id=\"selectTag-wrap\">\n      selectedTag: |${\n        selectedTag === null && 'null' ||\n        selectedTag === undefined && 'undefined' ||\n        selectedTag === '' && 'empty-string' ||\n        selectedTag\n      }|\n    </div>\n    \n    <select id=\"tag-switch-dropdown\" onchange=${changeSelectedTag}>\n\t    <option></option>\n      <!-- TODO: implement selected attribute --->\n\t    <option value=\"\" ${ typeof(selectedTag) === 'string' && !selectedTag.length ? {selected: true} : {} }>empty-string</option>\n\t    <option value=\"undefined\" ${ selectedTag === undefined ? {selected: true} : {} }>undefined</option>\n\t    <option value=\"null\" ${ selectedTag === null ? {selected: true} : {} }>null</option>\n\t    <option value=\"1\" ${ selectedTag === '1' ? {selected: true} : {} }>tag 1</option>\n\t    <option value=\"2\" ${ selectedTag === '2' ? {selected: true} : {} }>tag 2</option>\n\t    <option value=\"3\" ${ selectedTag === '3' ? {selected: true} : {} }>tag 3</option>\n    </select>\n\n    <div id=\"switch-tests-wrap\" style=\"display:flex;flex-wrap:wrap;gap:1em;\">\n      <div style=\"border:1px solid blue;flex-grow:1\">\n        <h3>Test 1 - string | Tag</h3>\n        <div>${tagOutput}</div>\n      </div>\n      \n      <div style=\"border:1px solid blue;flex-grow:1\">\n        <h3>Test 2 - Tag</h3>\n        <div>${tagOutput2}</div>\n      </div>\n      \n      <div style=\"border:1px solid blue;flex-grow:1\">\n        <h3>Test 3 - ternary (only 1 or 3 shows)</h3>\n        <div>${selectedTag === '3' ? tag3({title: 'ternary simple'}) : tag1({title: 'ternary simple'})}</div>\n      </div>\n\n      <div style=\"border:1px solid blue;flex-grow:1\">\n        <h3>Test 3.2 - ternary via prop (only 1 or 3 shows)</h3>\n        <div>${ternaryPropTest({selectedTag})}</div>\n      </div>\n\n      <div id=\"arraySwitching-test-wrap\" style=\"border:1px solid red;flex-grow:1\">\n        <h3>Test 4 - arraySwitching</h3>\n        <div id=\"arraySwitching-wrap\">${arraySwitching({selectedTag})}</div>\n      </div>\n    </div>\n    ${renderCountDiv({renderCount, name:'tagSwitchDebug'})}\n  `\n})\n\nexport const ternaryPropTest = tag((\n  {selectedTag}: {selectedTag: string | undefined | null}\n) => {\n  const outTag = selectedTag === '3' ? tag3({title: 'ternaryPropTest'}) : tag1({title: 'ternaryPropTest'})\n  return html`\n    <div id=\"ternaryPropTest-wrap\">\n      ${selectedTag}:${outTag}\n    </div>\n  `\n})\n\nexport const tag1 = tag(({title}: {title: string}) => {\n  let counter = letState(0)(x => [counter, counter = x])\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  ++renderCount\n  return html`\n    <div id=\"tag1\" style=\"border:1px solid orange;\">\n      <div id=\"tagSwitch-1-hello\">Hello 1 ${title} World</div>\n      <button onclick=${() => ++counter}>increase ${counter}</button>\n      ${renderCountDiv({renderCount, name:'tag1'})}\n    </div>\n  `\n})\n\nexport const tag2 = tag(({title}: {title: string}) => {\n  let counter = letState(0)(x => [counter, counter = x])\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  ++renderCount\n  return html`\n    <div id=\"tag2\" style=\"border:1px solid orange;\">\n      <div id=\"tagSwitch-2-hello\">Hello 2 ${title} World</div>\n      <button onclick=${() => ++counter}>increase ${counter}</button>\n      ${renderCountDiv({renderCount, name:'tag1'})}\n    </div>\n  `\n})\n\nexport const tag3 = tag(({title}: {title: string}) => {\n  let counter = letState(0)(x => [counter, counter = x])\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  ++renderCount\n  return html`\n    <div  id=\"tag3\" style=\"border:1px solid orange;\">\n      <div id=\"tagSwitch-3-hello\">Hello 3 ${title} World</div>\n      <button onclick=${() => ++counter}>increase ${counter}</button>\n      ${renderCountDiv({renderCount, name:'tag1'})}\n    </div>\n  `\n})\n\nexport const arraySwitching = tag((\n  {selectedTag}: {selectedTag: SelectedTag}\n) => {\n  switch (selectedTag) {\n    case undefined:\n      return html`its an undefined value`\n\n    case null:\n      return html`its a null value`\n\n    case '':\n      return html`` // tests how .previousSibling works\n\n    case '1':\n      // return html`${['a'].map(x => html`${tag1({title: `array ${selectedTag} ${x}`})}`.key(x))}`\n      return html`${tag1({title: `tag ${selectedTag}`})}`\n\n    case '2':\n      return html`${['b','c'].map(x => html`${tag2({title: `array ${selectedTag} ${x}`})}`.key(x))}`\n\n    case '3':\n      return html`${['d','e','f'].map(x => html`${tag3({title: `array ${selectedTag} ${x}`})}`.key(x))}`\n  }\n\n  return html`nothing to show for in arrays`\n})\n","import { html, tag, letState, onInit, state, Subject, callbackMaker } from \"taggedjs\"\n\nexport const mirroring = tag(() => {\n  const tag = tagCounter()\n\n  return html`\n    <fieldset>\n      <legend>counter0</legend>\n      ${tag}\n    </fieldset>\n    <fieldset>\n      <legend>counter1</legend>\n      ${tag}\n    </fieldset>\n  `\n})\n\n\nconst tagCounter = () => {\n  let counter = letState(0)(x => [counter, counter = x])\n\n  return html`\n    counter:<span><span id=\"mirror-counter-display\">${counter}</span></span>\n    <button id=\"mirror-counter-button\" onclick=${() => ++counter}>${counter}</button>\n  `\n}","import { html, letState, tag, isSubjectInstance, isTagArray, children } from \"taggedjs\"\nimport { renderCountDiv } from \"./renderCount.component\"\n\nexport const innerHtmlTest = tag((\n  _props: unknown,\n  b:number,\n) => {\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  let counter = letState(0)(x => [counter, counter = x])\n\n  ++renderCount\n\n  return html`<!--innerHtmlTests.js-->\n    <fieldset id=\"innerHtmlTests-1\">\n      <legend>no props test</legend>\n      <div style=\"border:2px solid purple;\">${children()}</div>\n      <div>isSubjectInstance:${isSubjectInstance(children())}</div>\n      <div>isSubjectTagArray:${isTagArray(children().value)}</div>\n      <button id=\"innerHtmlTest-counter-button\"\n      onclick=${() => ++counter}>increase innerHtmlTest ${counter}</button>\n      <span id=\"innerHtmlTest-counter-display\">${counter}</span>\n      ${renderCountDiv({renderCount, name: 'innerHtmlTest'})}\n    </fieldset>\n  `\n})\n\nexport const innerHtmlPropsTest = tag((\n  x: number,\n) => {\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  let counter = letState(0)(x => [counter, counter = x])\n  \n  ++renderCount\n  \n  return html`<!--innerHtmlTests.js-->\n    <fieldset id=\"innerHtmlTests-2\">\n      <legend>innerHTML Props: ${x}</legend>\n      ${children()}\n      <button id=\"innerHtmlPropsTest-button\" onclick=${() => ++counter}\n      >increase innerHtmlPropsTest ${counter}</button>\n      <span id=\"innerHtmlPropsTest-display\">${counter}</span>\n      ${/*renderCountDiv(renderCount)*/ false}\n    </fieldset>\n  `\n})\n","import { children, Tag, html, letState, tag } from \"taggedjs\"\nimport { innerHtmlPropsTest, innerHtmlTest } from \"./innerHtmlTests.js\"\nimport { renderCountDiv } from \"./renderCount.component.js\"\n\nconst test22 = tag((a:number, b:number) => html`\n  <fieldset>\n    <legend>xxxxx</legend>  \n    <div>hello other world ${a} - ${b}</div>\n    <div style=\"border:2px solid red;\">***${children()}***</div>\n  </fieldset>\n`)\n\nexport const childTests = tag((_: string = 'childTests') => (\n  renderCount = letState(0)(x => [renderCount, renderCount = x]),\n  counter = letState(0)(x => [counter, counter = x]),\n) => html`\n  <fieldset id=\"children-test\" style=\"flex:2 2 20em\">\n    <legend>childTests</legend>\n\n    <hr />\n    <hr />\n    <hr />\n    ${test22(1,2).\n    html`\n      <div><hr />abc-123-${Date.now()}<hr /></div>\n    `}\n    <hr />\n    <hr />\n    <hr />\n    \n    ${innerHtmlTest({}, 2).\n    html`\n      <b>Field set body A</b>\n      <hr />\n      <button id=\"innerHtmlTest-childTests-button\"\n        onclick=${() => ++counter}\n      > (A) increase childTests inside ${counter}:${renderCount}</button>\n      <span id=\"innerHtmlTest-childTests-display\">${counter}</span>\n      ${renderCountDiv({renderCount, name: 'childTests-innerHtmlTest'})}\n    `}\n\n    ${innerHtmlPropsTest(22).\n    html`\n      <b>Field set body B</b>\n      <hr />\n      <button id=\"innerHtmlPropsTest-childTests-button\"\n        onclick=${() => ++counter}\n      > (B) increase childTests inside ${counter}</button>\n      <span id=\"innerHtmlPropsTest-childTests-display\">${counter}</span>\n      ${renderCountDiv({renderCount, name: 'innerHtmlPropsTest child'})}\n    `}\n\n    ${childAsPropTest({child: html`\n      hello child as prop test\n      <button id=\"child-as-prop-test-button\"\n        onclick=${() => ++counter}\n      > child as prop ${counter}</button>\n      <span id=\"child-as-prop-test-display\">${counter}</span>\n    `})}\n    \n    <hr />\n    \n    <button id=\"childTests-button\"\n      onclick=${() => ++counter}\n    > increase childTests outside ${counter} - ${renderCount}</button>\n    <span id=\"childTests-display\">${counter}</span>\n    ${renderCountDiv({renderCount, name:'childTests'})}\n  </fieldset>\n`)\n\nfunction childAsPropTest({child}: {child:Tag}) {\n  return html`\n    <fieldset>\n      <legend>child as prop</legend>\n      ${child}\n    </fieldset>\n  `\n}\n","import {html, letState, tag} from 'taggedjs'\n\nexport const mouseOverTag = tag(({\n  label, memory,\n}: {\n  label: string\n  memory:{\n    counter: number\n  }\n}) => {\n  let mouseOverEditShow = letState(false)(x => [mouseOverEditShow, mouseOverEditShow = x])\n  let edit = letState(false)(x => [edit, edit = x])\n  return html`\n    <div style=\"background-color:purple;padding:.2em;flex:1\"\n      onmouseover=${() => mouseOverEditShow = true}\n      onmouseout=${() => mouseOverEditShow = false}\n    >\n      mouseover - ${label}:${memory.counter}:${mouseOverEditShow || 'false'}\n      <button onclick=${() => ++memory.counter}>++counter</button>\n      <a style.visibility=${(edit || mouseOverEditShow) ? 'visible' : 'hidden'}\n        onclick=${() => edit = !edit}\n      >&nbsp;</a>\n    </div>\n  `\n})\n","import { mouseOverTag } from \"./mouseover.tag.js\"\nimport { renderCountDiv } from \"./renderCount.component.js\"\nimport { html, tag, Subject, onInit, letState, callbackMaker, state, ValueSubject, callback, subject } from \"taggedjs\"\n\nconst loadStartTime = Date.now()\n\nexport const counters = tag(({\n  appCounterSubject\n}: {\n  appCounterSubject: Subject<number>\n}) => (\n  readStartTime = state(() => Date.now()),\n) => {\n  state('countersDebug state')\n  let counter = letState(0)(x => [counter, counter = x])\n  let propCounter = letState(0)(x => [propCounter, propCounter = x])\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  let initCounter = letState(0)(x => [initCounter, initCounter = x])\n  let memory = state(() => ({counter: 0}))\n  \n  const callbacks = callbackMaker()\n  const callbackTestSub = state(() => new Subject(counter))\n\n  const pipedSubject0 = state(() => new ValueSubject('222'))\n  const pipedSubject1 = Subject.all([pipedSubject0, callbackTestSub]).pipe(callback(x => counter))\n  const pipedSubject2 = subject.all([pipedSubject0, callbackTestSub]).pipe(x => counter)\n\n  onInit(() => {\n    ++initCounter\n    console.info('countersDebug.ts:  i should only ever run once')\n\n    callbackTestSub.subscribe(\n      callbacks(y => counter = y)\n    )\n  })\n\n  // State as a callback only needed so pipedSubject1 has the latest value\n  const increaseCounter = () => {\n    ++counter\n    pipedSubject0.next('333-' + counter)\n  }\n\n  const increasePropCounter = () => ++propCounter\n\n  ++renderCount // for debugging\n\n  const sharedMemory = true\n  const testInnerCounters = true\n  const displayRenderCounters = true\n  const testBasics = true\n\n  return html`<!--counters-->\n    <div style=\"display:flex;flex-wrap:wrap;gap:1em\">\n      ${testBasics && html`\n        <div> Subscriptions:${(Subject as any).globalSubCount$}</div>\n        <button onclick=${() => console.info('subs', (Subject as any).globalSubs)}>log subs</button>\n        <div>initCounter:${initCounter}</div>\n    \n        <div>\n          <button id=\"app-counter-subject-button\"\n            onclick=${() => appCounterSubject.next((appCounterSubject.value || 0) + 1)}\n          > ++app subject</button>\n          <span>\n             <span id=\"app-counter-subject-display\">${appCounterSubject.value}</span>\n          </span>\n        </div>\n\n        <div>\n          <button id=\"standalone-counter\"\n            onclick=${increaseCounter}\n          >stand alone counters:${counter}</button>\n          <span>\n             <span id=\"standalone-display\">${counter}</span>\n          </span>\n        </div>\n    \n        ${counter > 1 && html`\n          <div>\n            <button id=\"conditional-counter\"\n              onclick=${increaseCounter}\n            >conditional counter:${counter}</button>\n            <span>\n               <span id=\"conditional-display\">${counter}</span>\n            </span>\n          </div>\n        `}\n\n        <input id=\"set-main-counter-input\"\n          onkeyup=${e => (counter = Number(e.target.value) || 0)}\n        />\n\n        <div>\n          <button id=\"-increase-counter\"\n            onclick=${increasePropCounter}\n          > propCounter:${propCounter}</button>\n          <span>\n             <span id=\"-counter-display\">${propCounter}</span>\n            </span>\n        </div>\n\n        ${/*\n          <div>\n            <button id=\"-subject-increase-counter\"\n              onclick=${() => callbackTestSub.next(counter + 1)}\n            >subject increase:</button>\n            <span>\n               <span id=\"-subject-counter-display\">${counter}</span>\n               <span id=\"subject-counter-subject-display\">${callbackTestSub}</span>\n            </span>\n          </div>\n        */false}\n      `}\n    </div>\n\n    ${/*\n    <fieldset>\n      <legend> pipedSubject 1</legend>\n      <div>\n        <small>\n          <span id=\"-pipedSubject\">${pipedSubject1}</span>\n        </small>\n      </div>\n    </fieldset>\n\n    <fieldset>\n      <legend> pipedSubject 2</legend>\n      <div>\n        <small>\n          <span id=\"-pipedSubject-2\">${pipedSubject2}</span>\n        </small>\n      </div>\n    </fieldset>\n    */false}\n\n    ${sharedMemory && html`\n      <fieldset>\n        <legend>shared memory</legend>\n        <div class.bold.text-blue=${true} style=\"display:flex;flex-wrap:wrap;gap:.5em\">\n          ${mouseOverTag({label: 'a-a-', memory})}\n          ${mouseOverTag({label: 'b-b-', memory})}\n        </div>\n        memory.counter:${memory.counter}\n        <button onclick=${() => ++memory.counter}>increase </button>\n      </fieldset>\n    `}\n    \n    ${testInnerCounters && html`\n      <fieldset>\n        <legend>inner counter</legend>\n        ${innerCounters({propCounter, increasePropCounter})}\n      </fieldset>\n    `}\n    ${displayRenderCounters && renderCountDiv({renderCount, name: 'counters'})}\n    <div style=\"font-size:0.8em;opacity:0.8\">\n       page load to display in&nbsp;<span oninit=${event => event.target.innerText = (Date.now()-loadStartTime).toString()}>-</span>ms\n    </div>\n    <div style=\"font-size:0.8em;opacity:0.8\">\n       read in&nbsp;<span oninit=${event => event.target.innerText = (Date.now()-readStartTime).toString()}>-</span>ms\n    </div>\n  `\n})\n\nconst innerCounters = tag(({\n  propCounter,\n  increasePropCounter,\n}: {\n  propCounter: number,\n  increasePropCounter: () => void\n}) => {\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n\n  ++renderCount // for debugging\n\n  return html`\n    <button id=\"-inner-counter\" onclick=${increasePropCounter}\n    > propCounter:${propCounter}</button>\n    <span>\n       <span id=\"-inner-display\">${propCounter}</span>\n    </span>\n    <div>renderCount:${renderCount}</div>\n    ${renderCountDiv({renderCount, name: 'inner_counters'})}\n  `\n})\n","import { fadeInDown, fadeOutUp } from \"./animations.js\"\nimport { renderCountDiv } from \"./renderCount.component.js\"\nimport { letState, html, tag, providers, state, callbackMaker, Subject, onInit } from \"taggedjs\"\n\nexport class TagDebugProvider {\n  tagDebug = 0\n  showDialog = false\n}\n\nconst ProviderFunc = () => ({counter: 0})\n\n\nexport function tagDebugProvider() {\n  const upper = providers.create( upperTagDebugProvider )\n  return {\n    upper,\n    test: 0\n  }\n}\n\nexport function upperTagDebugProvider() {\n  return {\n    name: 'upperTagDebugProvider',\n    test: 0\n  }\n}\n\nexport const providerDebugBase = tag((_x = 'providerDebugBase') => {\n  // providerDebugBase, has provider\n  \n  providers.create(ProviderFunc) // test that an arrow function can be a provider\n  const providerClass: TagDebugProvider = providers.create( TagDebugProvider )\n  const provider = providers.create( tagDebugProvider )\n\n  const test = letState('props debug base')\n  let propCounter = letState(0)(x => [propCounter, propCounter = x])\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n\n  if(providerClass.showDialog) {\n    (document.getElementById('provider_debug_dialog') as any).showModal()\n  }\n\n  ++renderCount\n\n  return html`\n    <div>\n      <strong>provider.test sugar-daddy-77</strong>:${provider.test}\n    </div>\n    <div>\n      <strong>provider.upper?.test</strong>:${provider.upper?.test || '?'}\n    </div>\n    <div>\n      <strong>providerClass.tagDebug</strong>:${providerClass.tagDebug || '?'}\n    </div>\n\n    <div style=\"display:flex;flex-wrap:wrap;gap:1em\">\n      <div>\n        <button id=\"increase-provider--0-button\"\n          onclick=${() => ++provider.test}\n        > increase provider.test ${provider.test}</button>\n        <span>\n           <span id=\"increase-provider--0-display\">${provider.test}</span>\n        </span>\n      </div>\n      \n      <div>\n        <button id=\"increase-provider-upper--0-button\" onclick=${() => ++provider.upper.test}\n        > increase upper.provider.test ${provider.upper.test}</button>\n        <span>\n           <span id=\"increase-provider-upper--0-display\">${provider.upper.test}</span>\n        </span>\n      </div>\n      \n      <div>\n        <button id=\"increase-provider--0-button\" onclick=${() => ++providerClass.tagDebug}\n        > increase provider class ${providerClass.tagDebug}</button>\n        <span>\n           <span id=\"increase-provider--0-display\">${providerClass.tagDebug}</span>\n        </span>\n      </div>\n\n      <div>\n        <button id=\"increase-prop--0-button\" onclick=${() => ++propCounter}\n        > increase propCounter ${propCounter}</button>\n        <span>\n           <span id=\"increase-prop--0-display\">${propCounter}</span>\n        </span>\n      </div>\n\n      <button onclick=${() => providerClass.showDialog = true}\n      > toggle dialog ${providerClass.showDialog}</button>\n    </div>\n\n    <hr />\n\n    <div style=\"display:flex;flex-wrap:wrap;gap:1em\">\n      ${providerDebug({\n        propCounter,\n        propCounterChange: x => {\n          propCounter = x\n        }\n      })}\n    </div>\n\n    <hr />\n    renderCount outer:<span name=\"render_count_outer\">${renderCount}</span>\n    ${renderCountDiv({renderCount, name:'providerDebugBase'})}\n\n    ${dialog(providerClass)}\n  `\n})\n\nconst dialog = tag((providerClass: TagDebugProvider) => html`\n  <dialog id=\"provider_debug_dialog\" style=\"padding:0\"\n    onmousedown=\"var r = this.getBoundingClientRect();(r.top<=event.clientY&&event.clientY<=r.top+r.height&&r.left<=event.clientX&&event.clientX<=r.left+r.width) || this.close()\"\n    ondragstart=\"const {e,dt,t} = {t:this,e:event,dt:event.dataTransfer};const d=t.drag=t.drag||{x:0,y:0};d.initX=d.x;d.startX=event.clientX-t.offsetLeft;d.startY=event.clientY-t.offsetTop;t.ondragover=e.target.ondragover=(e)=>e.preventDefault();dt.effectAllowed='move';dt.dropEffect='move'\"\n    ondrag=\"const {t,e,dt,d}={e:event,dt:event.dataTransfer,d:this.drag}; if(e.clientX===0) return;d.x = d.x + e.offsetX - d.startX; d.y = d.y + e.offsetY - d.startY; this.style.left = d.x + 'px'; this.style.top = d.y+'px';\"\n    ondragend=\"const {t,e,d}={t:this,e:event,d:this.drag};if (d.initX === d.x) {d.x=d.x+e.offsetX-(d.startX-d.x);d.y=d.y+e.offsetY-(d.startY-d.y);this.style.transform=translate3d(d.x+'px', d.y+'px', 0)};this.draggable=false\"\n    onclose=${() => providerClass.showDialog = false}\n  >\n    <div style=\"padding:.25em\" onmousedown=\"this.parentNode.draggable=true\"\n    >dialog title</div>\n    ${providerClass.showDialog ? html`\n      <textarea wrap=\"off\">${JSON.stringify(providerClass, null, 2)}</textarea>\n    ` : 'no dialog'}\n    <div style=\"padding:.25em\">\n      <button type=\"button\" onclick=\"provider_debug_dialog.close()\"> close</button>\n    </div>\n  </dialog>\n`)\n\nconst providerDebug = tag(({\n  propCounter,\n  propCounterChange,\n}: {\n  propCounter: number,\n  propCounterChange: (x: number) => unknown\n}) => {\n  const funcProvider = providers.inject(ProviderFunc) // test that an arrow function can be a provider\n  const provider = providers.inject( tagDebugProvider )\n  const providerClass = providers.inject( TagDebugProvider )\n  const upperProvider = providers.inject( upperTagDebugProvider )\n\n  let showProProps: boolean = letState(false)(x => [showProProps, showProProps = x])\n  let renderCount: number = letState(0)(x => [renderCount, renderCount = x])\n  // let propCounter: number = letState(0)(x => [propCounter, propCounter = x])\n\n  const callbacks = callbackMaker()\n  const callbackTestSub = state(() => new Subject())\n\n  onInit(() => {\n    console.info('providerDebug.ts:   i should only ever run once')\n\n    callbackTestSub.subscribe(x => {\n      callbacks((y) => {\n        provider.test = x as number\n      })()\n    })\n  })\n\n  ++renderCount\n\n  return html`<!--providerDebug.js-->\n    <div>\n      <button id=\"increase-provider--1-button\" onclick=${() => ++provider.test}\n      > increase provider.test ${provider.test}</button>\n      <span>\n         <span id=\"increase-provider--1-display\">${provider.test}</span>\n      </span>\n    </div>\n    \n    <div>\n      <button id=\"increase-provider-upper--1-button\" onclick=${() => ++upperProvider.test}\n      > increase upper.provider.test ${upperProvider.test}</button>\n      <span>\n        <span id=\"increase-provider-upper--1-display\">${upperProvider.test}</span>\n      </span>\n    </div>\n\n    <div>\n      <button id=\"increase-arrow-provider--1-button\" onclick=${() => ++funcProvider.counter}\n      > increase upper.provider.test ${funcProvider.counter}</button>\n      <span>\n      <span id=\"increase-arrow-provider--1-display\">${funcProvider.counter}</span>\n      </span>\n    </div>\n\n    <div>\n      <button id=\"subject-increase-counter\"\n        onclick=${() => callbackTestSub.set = provider.test + 1}\n      > subject increase:</button>\n      <span>\n         <span id=\"subject-counter-display\">${provider.test}</span>\n      </span>\n    </div>\n    \n    <div>\n      <button id=\"increase-provider--1-button\" onclick=${() => ++providerClass.tagDebug}\n      > increase provider class ${providerClass.tagDebug}</button>\n      <span>\n         <span id=\"increase-provider--1-display\">${providerClass.tagDebug}</span>\n      </span>\n    </div>\n\n    <div>\n      <button id=\"increase-prop--1-button\" onclick=${() => propCounterChange(++propCounter)}\n      > increase propCounter ${propCounter}</button>\n      <span>\n         <span id=\"increase-prop--1-display\">${propCounter}</span>\n      </span>\n    </div>\n\n    <button onclick=${() => providerClass.showDialog = true}\n      > toggle dialog ${providerClass.showDialog}</button>\n\n    <button onclick=${() => showProProps = !showProProps}\n    >${showProProps ? 'hide' : 'show'} provider as props</button>\n    \n    ${showProProps && html`\n      <div oninit=${fadeInDown} ondestroy=${fadeOutUp}>\n        <hr />\n        <h3>Provider as Props</h3>\n        ${testProviderAsProps(providerClass)}\n      </div>\n    `}\n\n    <div>\n      renderCount inner:${renderCount}\n      ${renderCountDiv({renderCount, name:'providerDebugInner'})}\n    </div>\n  `\n})\n\n\nconst testProviderAsProps = tag((\n  providerClass: TagDebugProvider\n) => {\n  return html`<!--providerDebug.js@TestProviderAsProps-->\n    <textarea wrap=\"off\" rows=\"20\" style=\"width:100%;font-size:0.6em\">${JSON.stringify(providerClass, null, 2)}</textarea>\n  `\n})","import { watch, letState, html, tag } from \"taggedjs\"\n\nexport const watchTesting = tag(() => (\n  stateNum = letState(0)(x => [stateNum, stateNum=x]),\n  stateNumChangeCount = letState(0)(x => [stateNumChangeCount, stateNumChangeCount=x]),\n  _ = watch([stateNum], () => ++stateNumChangeCount),\n  slowChangeCount = letState(0)(x => [slowChangeCount, slowChangeCount=x]),\n  watchPropNumSlow = watch.noInit([stateNum], () => ++slowChangeCount),\n  subjectChangeCount = letState(0)(x => [subjectChangeCount, subjectChangeCount=x]),\n  \n  watchPropNumSubject = watch.asSubject([stateNum], () => {\n    return ++subjectChangeCount\n  }),\n\n  truthChange = letState(false)(x => [truthChange, truthChange=x]),\n  truthChangeCount = letState(0)(x => [truthChangeCount, truthChangeCount=x]),\n  watchTruth = watch.truthy([truthChange], () => ++truthChangeCount),\n  \n  truthSubChangeCount = letState(0)(x => [truthSubChangeCount, truthSubChangeCount=x]),\n  \n  watchTruthAsSub = watch.truthy.asSubject([truthChange], () => {\n    ++truthSubChangeCount\n    return truthChange\n  }).pipe(\n    x => {\n      if(x === undefined) {\n        return 'undefined'\n      }      \n\n      return x ? truthSubChangeCount : truthSubChangeCount\n    }\n  ),\n) => html`\n  stateNum:<span id=\"watch-testing-num-display\">${stateNum}</span>\n  <button id=\"watch-testing-num-button\" type=\"button\"\n    onclick=${() => ++stateNum}\n  >++ stateNum</button>\n  <div>\n    <small>stateNumChangeCount:<span id=\"stateNumChangeCount\">${stateNumChangeCount}</span></small>\n  </div>\n  <fieldset>\n    <legend> slowChangeCount</legend> \n    <div>\n      <small>\n        <span id=\"-slowChangeCount\">${slowChangeCount}</span>\n      </small>\n    </div>\n    <div>\n      <small>\n        watchPropNumSlow:<span id=\"-watchPropNumSlow\">${watchPropNumSlow}</span>\n      </small>\n    </div>\n  </fieldset>\n\n  <fieldset>\n    <legend> subjectChangeCount</legend>    \n    <div>\n      <small>\n        <span id=\"-subjectChangeCount\">${subjectChangeCount}</span>\n      </small>\n    </div>\n    <div>\n      <small>\n        (watchPropNumSubject:<span id=\"-watchPropNumSubject\">${watchPropNumSubject}</span>)\n      </small>\n    </div>\n  </fieldset>\n\n  <fieldset>\n    <legend> truthChange</legend>\n    <div>\n      <small>\n        <span id=\"-truthChange\">${truthChange ? 'true' : 'false'}</span>\n      </small>\n    </div>\n    <fieldset>\n      <legend>simple truth</legend>      \n      <div>\n        <small>\n          watchTruth:<span id=\"-watchTruth\">${watchTruth || 'false'}</span>\n        </small>\n      </div>\n      <div>\n        <small>\n          (truthChangeCount:<span id=\"-truthChangeCount\">${truthChangeCount}</span>)\n        </small>\n      </div>\n    </fieldset>\n    <fieldset>\n      <legend>truth subject</legend>      \n      <div>\n        <small>\n        watchTruthAsSub:<span id=\"-watchTruthAsSub\">${watchTruthAsSub}</span>\n        </small>\n      </div>\n      <div>\n        <small>\n          (truthSubChangeCount:<span id=\"-truthSubChangeCount\">${truthSubChangeCount}</span>)\n        </small>\n      </div>\n    </fieldset>\n\n    <button id=\"-truthChange-button\" type=\"button\"\n      onclick=${() => truthChange = !truthChange}\n    >toggle to ${truthChange ? 'true' : 'false'}</button>\n  </fieldset>`\n)\n","import { html, letState, Subject, subject, tag, ValueSubject } from \"taggedjs\"\nimport { renderCountDiv } from \"./renderCount.component.js\"\n\n/** this tag renders only once */\nexport const oneRender = () => tag.oneRender = (\n  counter = new ValueSubject(0),\n  renderCount = letState(0)(x => [renderCount, renderCount = x]), // state can be used but it never updates\n) => {\n  ++renderCount\n\n  const x = Subject.all([0, 'all', 4])\n  \n\n  return html`\n    ${x.pipe(x => JSON.stringify(x))}elias\n    <span><span id=\"-counter-display\">${counter}</span></span>\n    <button type=\"button\" id=\"-counter-button\"\n      onclick=${() => ++counter.value}\n    >++</button>\n    ${renderCountDiv({renderCount, name:'oneRender_tag_ts'})}\n    <hr />\n    ${insideMultiRender()}\n  `\n}\n\n/** this tag renders on every event but should not cause parent to re-render */\nconst insideMultiRender = tag(() => (\n  counter = letState(0)(x => [counter, counter = x]),\n  counter$ = subject(0),\n  renderCount = letState(0)(x => [renderCount, renderCount = x]), // state can be used but it never updates\n) => {\n  ++renderCount\n  return html`\n  <span> sub counter-subject-display:<span id=\"-counter-subject-display\">${counter$}</span></span>\n  <br />\n  <span> sub counter<span id=\"-counter-display\">${counter}</span></span>\n  <br />\n  <button type=\"button\" id=\"-counter-button\"\n    onclick=${() => {\n      counter$.next(++counter)\n    }}\n  >++</button>\n  ${renderCountDiv({renderCount, name:'insideMultiRender'})}\n`\n})\n","import { ElementTargetEvent, InputElementTargetEvent, html, letState, tag } from \"taggedjs\";\nimport { renderCountDiv } from \"./renderCount.component\";\n\nconst main = {\n  function: () => ++main.count,\n  count: 0,\n}\n\nexport default tag(() => (\n  array = letState([] as string[])(x => [array, array = x]),\n  counter = letState(0)(x => [counter, counter = x]),\n  myFunction = () => ++counter,\n  renderCount = letState(0)(x => [renderCount, renderCount = x]),\n  showChild = letState(true)(x => [showChild, showChild = x]),\n  somethingElse = letState('a')(x => [somethingElse, somethingElse = x]),\n  _ = ++renderCount,\n  addArrayItem = (x?: string) => {array = array.map(x => x);array.push(typeof(x) === 'string' ? x : 'push'+array.length)},\n  deleteItem = (item: string) => array = array.filter(x => x !== item)\n) => html`\n  <button id=\"fun-parent-button\" onclick=${myFunction}>++parent</button><span id=\"fun_in_prop_display\">${counter}</span>\n  ${renderCountDiv({renderCount, name:'funInProps_tag_parent'})}\n  <div>\n    <strong>main:</strong><span id=\"main_wrap_state\">${(main.function as any).toCall ? 'taggjedjs-wrapped' : 'nowrap'}</span>:${main.count}\n  </div>\n  <button id=\"toggle-fun-in-child\" type=\"button\" onclick=${() => showChild = !showChild}>toggle child</button>\n  array length: ${array.length}\n  <button onclick=${addArrayItem}>reset add</button>\n  <hr />\n  ${showChild && funInPropsChild({\n    myFunction, array, addArrayItem, deleteItem,\n    child: {myChildFunction: myFunction}\n  }, main, myFunction)}\n  ${addArrayComponent(addArrayItem)}\n`)\n\nconst addArrayComponent = tag((\n  addArrayItem: (x: any) => any\n) => (\n  renderCount = letState(0)(x => [renderCount, renderCount=x]),\n  _ = ++renderCount,\n  handleKeyDown = (e: InputElementTargetEvent & KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n        const value = e.target.value.trim();\n        addArrayItem(value)\n        e.target.value = \"\";\n    }\n  },\n) => html`\n  <input type=\"text\" onkeydown=${handleKeyDown} onchange=${e => {addArrayItem(e.target.value);e.target.value=''}} />\n  <button type=\"button\" onclick=${addArrayItem}>add by outside</button>\n  ${renderCountDiv({renderCount, name:'addArrayComponent'})}\n`)\n\nconst funInPropsChild = tag((\n  {addArrayItem, myFunction, deleteItem, child, array}: {\n    array: unknown[],\n    addArrayItem: (x: any) => any,\n    myFunction: () => any,\n    deleteItem: (x: string) => any,\n    child: {myChildFunction: () => any}\n  },\n  mainProp: typeof main,\n  myFunction3: () => any\n) => (\n  other = letState('other')(x => [other, other = x]),\n  counter = letState(0)(x => [counter, counter = x]),\n  renderCount = letState(0)(x => [renderCount, renderCount = x]),\n  _ = ++renderCount,\n) => html`\n  <div>\n    <strong>mainFunction:</strong>${(mainProp.function as any).toCall ? 'taggjedjs-wrapped' : 'nowrap'}:\n    <span>${mainProp.count}</span>\n  </div>\n  <div>\n    <strong>childFunction:</strong>${(child.myChildFunction as any).toCall ? 'taggjedjs-wrapped' : 'nowrap'}\n  </div>\n  <div>\n    <strong>myFunction:</strong>${(myFunction as any).toCall ? 'taggjedjs-wrapped' : 'nowrap'}\n  </div>\n\n  <button id=\"fun_in_prop1\" onclick=${myFunction}>++object argument</button>\n  <button id=\"fun_in_prop2\" onclick=${child.myChildFunction}>++child.myChildFunction</button>\n  <button id=\"fun_in_prop3\" onclick=${myFunction3}>++argument</button>\n  <button onclick=${main.function}>++main</button>\n  <button onclick=${() => ++counter}>++me</button>\n  \n  <div>\n    child array length: ${array.length}\n    ${array.map(item => arrayFunTag(item, deleteItem).key(item))}\n    <button onclick=${addArrayItem}>addArrayItem</button>\n  </div>\n  \n  <div>\n    counter:<span>${counter}</span>\n  </div>\n  ${renderCountDiv({renderCount, name:'funInProps_tag_child'})}\n`)\n\nconst arrayFunTag = tag((item, deleteItem) => html`\n  <div style=\"border:1px solid black;\">\n    ${item}<button type=\"button\" onclick=${() => deleteItem(item)}>delete</button>\n  </div>\n`)","import { html } from \"taggedjs\";\n\nconst hasValidMin = (value: any, min: any) => {\n    return value.length >= min;\n};\n\nexport function Input({ onSubmit, placeholder, label, defaultValue, onBlur }: any) {\n    const handleBlur = () => {\n        if (onBlur)\n            onBlur();\n    };\n\n    const handleKeyDown = (e: any) => {\n        if (e.key === \"Enter\") {\n            const value = e.target.value.trim();\n\n            if (!hasValidMin(value, 2))\n                return;\n\n            onSubmit(value);\n            e.target.value = \"\";\n        }\n    };\n\n    return html`\n        <div class=\"input-container\">\n            <input class=\"new-todo\" id=\"todo-input\" type=\"text\" data-testid=\"text-input\" placeholder=${placeholder} value=${defaultValue} onblur=${handleBlur} onKeyDown=${handleKeyDown} />\n            <label htmlFor=\"todo-input\" style=\"visibility:hidden\">\n                ${label}\n            </label>\n        </div>\n    `;\n}\n","export const ADD_ITEM = \"ADD_ITEM\";\nexport const UPDATE_ITEM = \"UPDATE_ITEM\";\nexport const REMOVE_ITEM = \"REMOVE_ITEM\";\nexport const TOGGLE_ITEM = \"TOGGLE_ITEM\";\nexport const REMOVE_ALL_ITEMS = \"REMOVE_ALL_ITEMS\";\nexport const TOGGLE_ALL = \"TOGGLE_ALL\";\nexport const REMOVE_COMPLETED_ITEMS = \"REMOVE_COMPLETED_ITEMS\";\n","const classnames = (x: any) => ''\n\nimport { Input } from \"./input\";\n\nimport { TOGGLE_ITEM, REMOVE_ITEM, UPDATE_ITEM } from \"../constants\";\nimport { html, letState, state, tag } from \"taggedjs\";\n\nexport const Item = tag((todo, dispatch, index) => {\n    state('item') // helpful when debugging states\n    let isWritable = letState(false)(x => [isWritable, isWritable = x]);\n    let renderCount = letState(0)(x => [renderCount, renderCount = x]);\n    const { title, completed, id } = todo;\n    \n    const toggleItem = () => dispatch({ type: TOGGLE_ITEM, payload: { id } });\n    const removeItem = () => dispatch({ type: REMOVE_ITEM, payload: { id } });\n    const updateItem = (id: string, title: string) => dispatch({ type: UPDATE_ITEM, payload: { id, title } });\n\n    const handleDoubleClick = () => {\n        isWritable = true\n    };\n\n    const handleBlur = () => isWritable = false;\n\n    const handleUpdate = (title: string) => {\n        if (title.length === 0)\n            removeItem();\n        else\n            updateItem(id, title);\n\n        isWritable = false\n\n        return '44s'\n    };\n\n    ++renderCount\n\n    return html`\n        <li class=${classnames({ completed: todo.completed })} data-testid=\"todo-item\">\n            <div class=\"view\">\n                ${isWritable ?\n                    html`${Input({onSubmit:handleUpdate, label:\"Edit Todo Input\", defaultValue:title, onBlur:handleBlur})} - ${title}` : html`\n                    completed:${completed}\n                    <input class=\"toggle\" type=\"checkbox\" data-testid=\"todo-item-toggle\" checked=${completed} onChange=${toggleItem} />\n                    <label data-testid=\"todo-item-label\" onDblClick=${handleDoubleClick}>\n                        ${title}\n                    </label>\n                    <button class=\"destroy\" data-testid=\"todo-item-button\" onClick=${removeItem}>delete</button>\n                `}\n            </div>\n            item render count: ${renderCount}\n        </li>\n    `;\n});\n","import { Item } from \"./item\";\n\nimport { TOGGLE_ALL } from \"../constants\";\nimport { html, letState, tag, watch } from \"taggedjs\";\n\nconst route = '' as string // active or completed\n\nexport const Main = tag(({todos, dispatch}) => {\n    let renderCount = letState(0)(x => [renderCount, renderCount = x])\n    const toggleAll = (e: any) => dispatch({ type: TOGGLE_ALL, payload: { completed: e.target.checked } })\n    ++renderCount\n    const visibleTodos = watch([todos, route],\n        () => {\n            return todos.filter((todo: any) => {\n            if (route === \"/active\")\n                return !todo.completed;\n\n            if (route === \"/completed\")\n                return todo.completed;\n\n            return todo;\n        })},\n    );\n\n    return html`\n        <main class=\"main\" data-testid=\"main\">\n            main renderCount: ${renderCount} array:${visibleTodos.length} of ${todos.length}\n            <hr />\n            ${JSON.stringify(todos)}\n            <hr />\n            ${visibleTodos.length > 0 && html`\n                <div class=\"toggle-all-container\">\n                    <input class=\"toggle-all\" type=\"checkbox\" data-testid=\"toggle-all\" checked=${visibleTodos.every((todo: any) => todo.completed)} onChange=${toggleAll} />\n                    <label class=\"toggle-all-label\" htmlFor=\"toggle-all\">\n                        Toggle All Input\n                    </label>\n                </div>\n            `}\n            <ul class=\"todo-list\" data-testid=\"todo-list\">\n                ${visibleTodos.map((todo: any, index: number) => html`\n                    ${Item(todo, dispatch, index)}\n                `.key(todo.id))}\n            </ul>\n        </main>\n    `;\n})\n","const classnames = (x: any) => ''\n\n\nimport { REMOVE_COMPLETED_ITEMS } from \"../constants\";\nimport { html, tag } from \"taggedjs\";\n\nconst route = '' as string// TODO\n// const { pathname: route } = useLocation();\n// prettier-ignore\n// TODO: we should be able to do null here instead of html``\n\nexport const Footer = tag((\n    todos, dispatch\n) => (\n    activeTodos = todos.filter((todo: any) => !todo.completed),\n    removeCompleted = () => dispatch({ type: REMOVE_COMPLETED_ITEMS }),\n) => todos.length === 0 ? null : html`\n    <footer class=\"footer\" data-testid=\"footer\">\n        <span class=\"todo-count\">${activeTodos.length} of ${todos.length} ${activeTodos.length === 1 ? \"item\" : \"items\"} left!</span>\n        <ul class=\"filters\" data-testid=\"footer-navigation\">\n            <li>\n                <a class=${classnames({ selected: route === \"/\" })} href=\"#/\">\n                    All\n                </a>\n            </li>\n            <li>\n                <a class=${classnames({ selected: route === \"/active\" })} href=\"#/active\">\n                    Active\n                </a>\n            </li>\n            <li>\n                <a class=${classnames({ selected: route === \"/completed\" })} href=\"#/completed\">\n                    Completed\n                </a>\n            </li>\n        </ul>\n        <button class=\"clear-completed\" disabled=${activeTodos.length === todos.length} onClick=${removeCompleted}>\n            Clear completed\n        </button>\n    </footer>\n`)\n","import { ADD_ITEM, UPDATE_ITEM, REMOVE_ITEM, TOGGLE_ITEM, REMOVE_ALL_ITEMS, TOGGLE_ALL, REMOVE_COMPLETED_ITEMS } from \"./constants\"\n\n/* Borrowed from https://github.com/ai/nanoid/blob/3.0.2/non-secure/index.js\n\nThe MIT License (MIT)\n\nCopyright 2017 Andrey Sitnik <andrey@sitnik.ru>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. */\n\n// This alphabet uses `A-Za-z0-9_-` symbols.\n// The order of characters is optimized for better gzip and brotli compression.\n// References to the same file (works both for gzip and brotli):\n// `'use`, `andom`, and `rict'`\n// References to the brotli default dictionary:\n// `-26T`, `1983`, `40px`, `75px`, `bush`, `jack`, `mind`, `very`, and `wolf`\nlet urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\"\n\nfunction nanoid(size = 21) {\n    let id = \"\"\n    // A compact alternative for `for (var i = 0; i < step; i++)`.\n    let i = size\n    while (i--) {\n        // `| 0` is more compact and faster than `Math.floor()`.\n        id += urlAlphabet[(Math.random() * 64) | 0]\n    }\n    return id\n}\n\nexport const todoReducer = (state: any[], action: any) => {\n    switch (action.type) {\n        case ADD_ITEM:\n            return state.concat({ id: nanoid(), title: action.payload.title, completed: false })\n        case UPDATE_ITEM:\n            return state.map((todo) => (todo.id === action.payload.id ? { ...todo, title: action.payload.title } : todo))\n        case REMOVE_ITEM:\n            return state.filter((todo) => todo.id !== action.payload.id)\n        case TOGGLE_ITEM:\n            return state.map((todo) => (todo.id === action.payload.id ? { ...todo, completed: !todo.completed } : todo))\n        case REMOVE_ALL_ITEMS:\n            return []\n        case TOGGLE_ALL:\n            return state.map((todo) => (todo.completed !== action.payload.completed ? { ...todo, completed: action.payload.completed } : todo))\n        case REMOVE_COMPLETED_ITEMS:\n            return state.filter((todo) => !todo.completed)\n    }\n\n    throw Error(`Unknown action: ${action.type}`)\n};\n","import { Header } from \"./components/header\"\nimport { Main } from \"./components/main\"\nimport { Footer } from \"./components/footer\"\nimport { todoReducer } from \"./reducer\"\nimport { letState, html, tag } from \"taggedjs\"\n\nexport const App = tag(function App() {\n    return (\n        todos = letState([] as any[])(x => [todos, todos = x]),\n        dispatch = (payload: string) => {\n            todos = todoReducer(todos, payload)\n        },\n    ) => html`\n        ${Header(dispatch)}\n        ${Main({todos, dispatch})}\n        ${Footer(todos, dispatch)}\n    `\n})\n","import { Input } from \"./input\";\nimport { ADD_ITEM } from \"../constants\";\nimport { html } from \"taggedjs\";\n\nexport function Header(dispatch: any) {\n    const addItem = (title: string) => dispatch({ type: ADD_ITEM, payload: { title } });\n    return html`\n        <header class=\"header\" data-testid=\"header\">\n            <h1>todos</h1>\n            ${Input({onSubmit:addItem, label:\"New Todo Input\", placeholder:\"What needs to be done?\"})}\n        </header>\n    `;\n}\n","import { watch, letState, html, tag, letProp, state } from \"taggedjs\"\nimport { renderCountDiv } from \"./renderCount.component.js\"\n\nexport const propsDebugMain = tag((_='propsDebugMain') => (\n  syncPropNumber = letState(0)(x => [syncPropNumber, syncPropNumber = x]),\n  propNumber = letState(0)(x => [propNumber, propNumber = x]),\n  renderCount = letState(0)(x => [renderCount, renderCount = x]),\n  propsJson = letState({test:33, x:'y'})(x => [propsJson, propsJson = x]),\n  date = letState(() => new Date())(x => [date, date = x]),\n  json = JSON.stringify(propsJson, null, 2),\n) => html`\n  <div style=\"display:flex;flex-wrap:wrap\" id=\"textareawrap\">\n    <textarea id=\"props-debug-textarea\" wrap=\"off\"\n      onchange=${event => propsJson = JSON.parse(event.target.value)}\n      style=\"height:200px;font-size:0.6em;width:100%;max-width:400px\"\n    >${ json }</textarea>\n    \n    <pre>${ json }</pre>\n  </div>\n  <div><small>(renderCount:${++renderCount})</small></div>\n  \n  <div>\n    <button id=\"propsDebug--0-button\"\n      onclick=${() => ++propNumber}\n    > propNumber ${propNumber}</button>\n    <span id=\"propsDebug--0-display\">${propNumber}</span>\n  </div>\n  \n  <fieldset>\n    <legend>child</legend>\n    ${propsDebug({\n      propNumber,\n      propsJson,\n      propNumberChange: x => {\n        propNumber = x\n      }\n    })}\n  </fieldset>\n\n  <fieldset>\n    <legend>sync props callback</legend>\n     syncPropNumber: <span id=\"sync-prop-number-display\">${syncPropNumber}</span>\n    <button onclick=${() => ++syncPropNumber}> ++</button>\n    ${renderCountDiv({renderCount, name: 'sync_props_callback'})}\n    <hr />\n    ${syncPropDebug({\n      syncPropNumber,\n      propNumberChange: x => syncPropNumber = x,\n      parentTest: x => x\n    })}\n  </fieldset>\n\n  <fieldset>\n    <legend>date prop</legend>\n    date:${date}\n    <input type=\"date\" value=${timestampToValues(date).date} onchange=${event => {\n      const newDateString = event.target.value\n      date = new Date(newDateString)\n    }} />\n    <hr />\n    ${propDateDebug({date})}\n  </fieldset>\n`)\n\nconst propDateDebug = tag(({date}: {date: Date}) => html`date:${date}`)\n\n/** Tests calling a property that is a function immediately which should cause rendering */\nconst syncPropDebug = tag((\n  {\n    syncPropNumber,\n    propNumberChange,\n    parentTest,\n  }: {\n    syncPropNumber: number\n    propNumberChange: (x: number) => any\n    parentTest: <T>(x: T) => T\n  }\n) => {\n  state('string forced')\n  let counter = letState(0)(x => [counter, counter = x])\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n\n  ++renderCount\n\n  if(syncPropNumber % 2 === 1) {\n    propNumberChange(syncPropNumber = syncPropNumber + 1)\n  }\n  \n  return html`<!--syncPropDebug-->\n    <div>\n       child syncPropNumber:<span id=\"sync-prop-child-display\">${syncPropNumber}</span>\n      <button id=\"sync-prop-child-button\" onclick=${() => propNumberChange(++syncPropNumber)}> ++</button>\n    </div>\n    <div>\n      <div>\n        counter:<span id=\"sync-prop-counter-display\">${counter}</span>\n      </div>\n      parentTest<span id=\"nothing-prop-counter-display\">${parentTest(counter)}</span>\n      <button id=\"nothing-prop-counter-button\" onclick=${() => parentTest(++counter)}>++</button>\n    </div>\n    ${renderCountDiv({renderCount, name: 'child_sync_props_callback'})}\n  `\n})\n\nconst propsDebug = tag((\n  {\n    propNumber,\n    propsJson,\n    propNumberChange,\n  }: {\n    propNumber: number,\n    propNumberChange: (x: number) => unknown,\n    propsJson: any\n  }\n) => (\n  renderCount = letState(0)(x => [renderCount, renderCount=x]),\n  propNumberChangeCount = letState(0)(x => [propNumberChangeCount, propNumberChangeCount=x]),\n\n  // poor way to update an argument\n  myPropNumber = letState(propNumber)(x => [myPropNumber, myPropNumber=x]),\n  _ = watch([propNumber], () => myPropNumber = propNumber),\n  watchResults = watch([myPropNumber], () => ++propNumberChangeCount),\n\n  // simple way to locally only update an argument\n  __ = letProp(propNumber)(x => [propNumber, propNumber = x]),\n) => html`<!--propsDebug.js-->\n  <h3>Props Json</h3>\n  <textarea style=\"font-size:0.6em;height:200px;width:100%;;max-width:400px\" wrap=\"off\"\n    onchange=${event=> {\n      const value = JSON.parse(event.target.value)\n      Object.assign(propsJson, value)\n    }}\n  >${ JSON.stringify(propsJson, null, 2) }</textarea>\n  <pre>${ JSON.stringify(propsJson, null, 2) }</pre>\n  <!--\n  <div style=\"display:flex;flex-wrap:wrap\">\n  </div>\n  -->\n  <hr />\n  \n  <h3>Props Number</h3>\n  <textarea style=\"font-size:0.6em;height:200px;width:100%;color:white;\" wrap=\"off\" disabled\n  >${ JSON.stringify(watchResults, null, 2) }</textarea>\n  \n  <div>\n    <button id=\"propsDebug--1-button\" onclick=${() => propNumberChange(++myPropNumber)}\n    >  propNumber ${myPropNumber}</button>\n    <span id=\"propsDebug--1-display\">${myPropNumber}</span>\n  </div>\n\n  <div>\n    <button id=\"propsDebug--2-button\" onclick=${() => ++propNumber}\n    >  local set propNumber ${propNumber}</button>\n    <span id=\"propsDebug--2-display\">${propNumber}</span>\n  </div>\n\n  <button\n    title=\"test of increasing render count and nothing else\"\n    onclick=${() => ++renderCount}\n  >renderCount ${++renderCount}</button>\n  \n  <button onclick=${() => ++myPropNumber}\n    title=\"only changes number locally but if change by parent than that is the number\"\n  >  local set myPropNumber ${myPropNumber}</button>\n  \n  <div>\n    <small>\n      (propNumberChangeCount:<span id=\"propsDebug--change-display\">${propNumberChangeCount}</span>)\n    </small>\n  </div>\n  \n  <hr />\n\n  <h3>Fn update test</h3>\n  ${propFnUpdateTest({\n    propNumber: myPropNumber,\n    callback: () => ++myPropNumber\n  })}    \n`)\n\nconst propFnUpdateTest = tag(({\n  propNumber, callback,\n}: {\n  propNumber: number, callback: Function\n}) => {\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  ++renderCount\n\n  return html`\n    <button id=\"propsOneLevelFunUpdate--button\"\n      onclick=${callback}\n    >  local & 1-parent increase ${propNumber}</button>\n    <span id=\"propsOneLevelFunUpdate--display\">${propNumber}</span>\n    ${renderCountDiv({renderCount, name: 'propFnUpdateTest'})}\n    <small style=\"opacity:.5\">the count here and within parent increases but not in parent parent</small>\n  `\n})\n\nfunction timestampToValues(\n  timestamp: number | Date | string\n) {\n  const date = new Date(timestamp);\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  const hours = String(date.getHours()).padStart(2, '0');\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n\n  return {\n      date: `${year}-${month}-${day}`,\n      time: `${hours}:${minutes}`\n  };\n}\n","import { letState } from './letState.function.js';\nimport { watch } from './watch.function.js';\n/**\n * Enables the ability to maintain a change to a props value until the prop itself changes\n * @param prop typically the name of an existing prop\n * @returns immediately call the returned function: letProp(y)(x => [y, y=x])\n */\nexport function letProp(prop) {\n    return getSetProp => {\n        let myProp = letState(prop)(getSetProp);\n        watch([prop], () => getSetProp(myProp = prop));\n        getSetProp(myProp); // always reset to my value and right await so that the old prop value never slips through\n        return myProp;\n    };\n}\n//# sourceMappingURL=letProp.function.js.map","import { fadeInDown, fadeOutUp } from './animations.js'\nimport { renderCountDiv } from './renderCount.component.js'\nimport {html, state, letState, tag} from 'taggedjs'\n\nconst frameCount = 4\ntype Player = {\n  name: string\n  edit?: boolean\n  scores: any[]\n}\n\nexport const arrayTests = tag(function ArrayTests(){/* ArrayTests */\n  const players: Player[] = state([])\n  let renderCount: number = letState(0)(x => [renderCount, renderCount = x])\n\n  const getNewPlayer = () => ({\n    name: 'Person '+players.length,\n    scores: '0,'.repeat(/*frameCount*/0).split(',').map((_v, index) => ({\n      frame: index + 1,\n      score: Math.floor(Math.random() * 4) + 1\n    }))\n  })\n\n  ++renderCount\n\n  return html`<!--arrayTests.js-->\n    <div style=\"display:flex;flex-wrap:wrap;gap:1em\">\n      ${playersDisplay({players, getNewPlayer})}\n    </div>\n\n    <button id=\"array-test-push-item\" onclick=${() => {\n      players.push(getNewPlayer())\n    }}>push item ${players.length+1}</button>\n\n    <button onclick=${() => {\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n    }}>push 3 items</button>\n\n    <button onclick=${() => {\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n      players.push(getNewPlayer())\n    }}>push 9 items</button>\n\n    ${players.length > 0 && html`\n      <button oninit=${fadeInDown} ondestroy=${fadeOutUp}\n        style=\"--animate-duration: .1s;\"\n        onclick=${() => players.length = 0}\n      >remove all</button>\n    `}\n\n    ${renderCountDiv({renderCount, name: 'arrayTests.ts'})}\n  `\n})\n\nconst scoreData = tag((\n  {score, playerIndex}: {\n    playerIndex: number\n    score:{score: number, frame: number}\n  }\n) => {\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  \n  ++renderCount\n\n  return html`\n    frame:${score.frame}:\n    <button\n      id=${`score-data-${playerIndex}-${score.frame}-inside-button`}\n      onclick=${() => ++score.score}\n    >inner score button ++${score.score}</button>\n    <span id=${`score-data-${playerIndex}-${score.frame}-inside-display`}\n    >${score.score}</span>\n    <button onclick=${() => ++renderCount}>increase renderCount</button>\n    ${renderCountDiv({renderCount, name:'scoreData' + score.frame})}\n  `\n})\n\nconst playersDisplay = tag(({\n  players, getNewPlayer,\n}: {\n  players: Player[]\n  getNewPlayer: () => Player\n}) => {\n  const playersContent = players.map((player,index) => html`\n    <div oninit=${fadeInDown} ondestroy=${fadeOutUp}\n      style=\"background-color:black;--animate-duration: .1s;\"\n    >\n      <div>\n        name:${player.name}\n      </div>\n      <div>\n        index:${index}\n      </div>\n      \n      <div style=\"background-color:purple;padding:.5em\">\n        scores:${player.scores.map((score, playerIndex) => html`\n        <div style=\"border:1px solid white;--animate-duration: .1s;\"\n          oninit=${fadeInDown} ondestroy=${fadeOutUp}\n        >\n          <fieldset>\n            <legend>\n              <button id=${`score-data-${playerIndex}-${score.frame}-outside-button`}\n                onclick=${() => ++score.score}\n              >outer score button ++${score.score}</button>\n              <span id=${`score-data-${playerIndex}-${score.frame}-outside-display`}\n              >${score.score}</span>\n            </legend>\n            ${scoreData({score, playerIndex})}\n          </fieldset>\n        </div>\n      `.key(score))}</div>\n      \n      ${player.edit && html`\n        <button onclick=${() => {\n          players.splice(index,1);\n          player.edit = !player.edit\n        }}>remove</button>\n      `}\n      ${player.edit && html`\n        <button id=${'player-remove-promise-btn-' + index} onclick=${async () => {\n          player.edit = !player.edit\n          players.splice(index,1);\n        }}>remove by promise</button>\n      `}\n      <button id=${'player-edit-btn-' + index} onclick=${() => player.edit = !player.edit}>edit</button>\n      <button onclick=${() => {\n        players.splice(index,0,getNewPlayer())\n      }}>add before</button>\n    </div>\n  `.key(player))\n\n  return html`\n    <!-- playersLoop.js -->\n    ${playersContent}\n    <!-- end:playersLoop.js -->\n  `\n})","import { attributeDebug } from \"./attributeDebug.component\"\nimport { contentDebug } from \"./ContentDebug.component\"\nimport { tableDebug } from \"./tableDebug.component\"\nimport { html, tag, letState, onInit, state, Subject, callbackMaker, onDestroy } from \"taggedjs\"\nimport { tagDebug } from \"./tagJsDebug\"\nimport { tagSwitchDebug } from \"./tagSwitchDebug.component\"\nimport { mirroring } from \"./mirroring.tag\"\nimport { childTests } from \"./childTests\"\nimport { runTests } from \"./tests\"\nimport { renderCountDiv } from \"./renderCount.component\"\nimport { counters } from \"./countersDebug\"\nimport { providerDebugBase } from \"./providerDebug\"\nimport { watchTesting } from \"./watchTesting.tag\"\nimport { oneRender } from \"./oneRender.tag\"\nimport funInPropsTag from \"./funInProps.tag\"\nimport {App as todo} from \"./todo/app\"\nimport { propsDebugMain } from \"./PropsDebug.tag\"\nimport { arrayTests } from \"./arrayTests\"\n\nexport const App = tag(() => {\n  let _firstState = letState('app first state')(x => [_firstState, _firstState=x])\n  let toggleValue = letState(false)(x => [toggleValue, toggleValue=x])\n  let appCounter = letState(0)(x => [appCounter, appCounter=x])\n  let renderCount = letState(0)(x => [renderCount, renderCount=x])\n  let testTimeout = letState(null)(x => [testTimeout, testTimeout=x])\n\n  const toggle = () => {\n    toggleValue = !toggleValue\n  }\n\n  // if I am destroyed before my test runs, prevent test from running\n  onDestroy(() => {\n    clearTimeout(testTimeout as any)\n    testTimeout = null\n  })\n\n  function runTesting(manual = true) {\n    const waitFor = 2000\n    testTimeout = setTimeout(async () => {\n      console.debug(' Running tests...')\n      const result = await runTests()\n\n      if(!manual) {\n        return\n      }\n\n      if(result) {\n        alert(' all app tests passed')\n        return\n      }\n\n      alert(' tests failed. See console for more details')\n\n    }, waitFor) as any // cause delay to be separate from renders\n  }\n\n  ++renderCount\n\n  const callbacks = callbackMaker()\n  const appCounterSubject = state(() => new Subject<number>(appCounter))\n\n  onInit(() => {\n    console.info('1 app init should only run once')\n    \n    runTesting(false)\n\n    appCounterSubject.subscribe(\n      callbacks(y => appCounter = y)\n    )\n  })\n\n  const content = html`<!--app.js-->\n    <h1 id=\"h1-app\"> TaggedJs - ${2+2}</h1>\n\n    <button id=\"toggle-test\" onclick=${toggle}>toggle test ${toggleValue}</button>\n    <button onclick=${runTesting}>run test</button>\n\n    <div>\n      <button id=\"app-counter-subject-button\"\n        onclick=${() => appCounterSubject.set = appCounter + 1}\n      > ++app subject</button>\n      <span>\n         <span id=\"app-counter-subject-display\">${appCounter}</span>\n      </span>\n    </div>\n\n    ${renderCountDiv({name:'app', renderCount},)}\n\n    <div id=\"tagDebug-fx-wrap\">\n      <div style=\"display:flex;flex-wrap:wrap;gap:1em\">\n        <fieldset id=\"counters\" style=\"flex:2 2 20em\">\n          <legend>counters</legend>\n          ${counters({appCounterSubject})}\n        </fieldset>\n\n        <fieldset id=\"counters\" style=\"flex:2 2 20em\">\n          <legend> watch testing</legend>\n          ${watchTesting()}\n        </fieldset>\n\n        <fieldset id=\"provider-debug\" style=\"flex:2 2 20em\">\n          <legend>Provider Debug</legend>\n          ${providerDebugBase(undefined)}\n        </fieldset>\n\n        <fieldset id=\"props-debug\" style=\"flex:2 2 20em\">\n          <legend>Props Debug</legend>\n          ${propsDebugMain(undefined)}\n        </fieldset>\n\n        ${childTests(undefined)}\n\n        <fieldset style=\"flex:2 2 20em\">\n          <legend>Attribute Tests</legend>\n          ${attributeDebug()}\n        </fieldset>\n\n        <fieldset id=\"content-debug\" style=\"flex:2 2 20em\">\n          <legend>Content Debug</legend>\n          ${contentDebug()}\n        </fieldset>\n\n        <fieldset style=\"flex:2 2 20em\">\n          <legend>Tag Switching</legend>\n          ${tagSwitchDebug(undefined)}\n        </fieldset>\n\n        <fieldset style=\"flex:2 2 20em\">\n          <legend>arrays</legend>\n          ${arrayTests()}\n        </fieldset>\n\n        <fieldset style=\"flex:2 2 20em\">\n          <legend>Tag Mirroring</legend>\n          ${mirroring()}\n        </fieldset>\n\n        <fieldset style=\"flex:2 2 20em\">\n          <legend>Table Tests</legend>\n          ${tableDebug()}\n        </fieldset>\n\n        <fieldset style=\"flex:2 2 20em\">\n          <legend>oneRender</legend>\n          ${oneRender()}\n        </fieldset>\n\n        <fieldset style=\"flex:2 2 20em\">\n          <legend>functions in props</legend>\n          ${funInPropsTag()}\n        </fieldset>\n\n        <fieldset style=\"flex:2 2 20em\">\n          <legend>todo</legend>\n          ${todo()}\n        </fieldset>\n      </div>\n\n      ${tagDebug()}\n    </div>\n  `\n\n  return content\n})\n","import { byId, click, html, htmlById } from \"./elmSelectors\"\nimport { execute, expect, it } from \"./expect\"\nimport { expectElmCount, expectMatchedHtml, testCounterElements, testDuelCounterElements } from \"./expect.html\"\n\nexport async function runTests() {\n  const slowCount = html('#-slowChangeCount')\n  // tests can be run multiple times. Only the first time will this expect below work\n  const firstRun = slowCount === '0'\n\n  it('no template tags', () => {\n    const templateTags = document.getElementsByTagName('template')\n    expect(templateTags.length).toBe(0, 'Expected no templates to be on document')\n  })\n  \n  it('elements exists', () => {\n    expect(byId('h1-app')).toBeDefined()\n    const toggleTest = byId('toggle-test')\n    expect(toggleTest).toBeDefined()\n    expect(toggleTest.innerText).toBe('toggle test')    \n  })\n\n  it('toggle test', () => {\n    const toggleTest = byId('toggle-test')\n    toggleTest.click()\n    expect(toggleTest.innerText).toBe('toggle test true')\n    toggleTest.click()\n    expect(toggleTest.innerText).toBe('toggle test')\n    \n    const propsTextarea = byId('props-debug-textarea') as HTMLTextAreaElement\n    expect(propsTextarea.value.replace(/\\s/g,'')).toBe(`{\"test\":33,\"x\":\"y\"}`)\n  })\n\n  await import('./content.test')\n  await import('./counters.test')\n  await import('./props.test')\n  await import('./providers.test')\n  await import('./tagSwitch.test')\n  await import('./child.test')\n  await import('./array.test')  \n  await import('./mirror.test')\n  await import('./watch.test')\n  await import('./oneRender.test')\n  await import('./funInProps.test')\n  await import('./todos.test')\n\n  it('has no templates', () => {\n    expect(document.getElementsByTagName('template').length).toBe(0, 'expected no templates on document')\n  })\n\n  try {\n    const start = Date.now() //performance.now()\n    await execute()\n    const time = Date.now() - start // performance.now() - start\n    console.info(` all tests passed in ${time}ms`)\n    return true\n  } catch (error: unknown) {\n    console.error(' tests failed: ' + (error as Error).message, error)\n    return false\n  }\n}\n","import { childTests } from \"./childTests\"\nimport { Subject, callbackMaker, html, onInit, letState, tag, state } from \"taggedjs\"\nimport { arrayTests } from \"./arrayTests\"\nimport { tagSwitchDebug } from \"./tagSwitchDebug.component\"\nimport { mirroring } from \"./mirroring.tag\"\nimport { propsDebugMain } from \"./PropsDebug.tag\"\nimport { providerDebugBase } from \"./providerDebug\"\nimport { counters } from \"./countersDebug\"\nimport { tableDebug } from \"./tableDebug.component\"\nimport { contentDebug } from \"./ContentDebug.component\"\nimport { watchTesting } from \"./watchTesting.tag\"\nimport { oneRender } from \"./oneRender.tag\"\nimport { renderCountDiv } from \"./renderCount.component\"\nimport funInPropsTag from \"./funInProps.tag\"\nimport {App as todo} from \"./todo/app\"\nimport { runTests } from \"./isolatedApp.test\"\n\nexport enum ViewTypes {\n  Todo = 'todo',\n  FunInPropsTag = 'funInPropsTag',\n  OneRender = 'oneRender',\n  WatchTesting = 'watchTesting',\n  Mirroring = 'mirroring',\n  Content = 'content',\n  Arrays = 'arrays',\n  Counters = 'counters',\n  TableDebug = 'tableDebug',\n  Props = 'props',\n  Child = 'child',\n  TagSwitchDebug = 'tagSwitchDebug',\n  ProviderDebug = 'providerDebug'\n}\nconst viewTypes = Object.values(ViewTypes)\n\nconst storage = getScopedStorage()\n\nfunction getScopedStorage(): {\n  autoTest: boolean, views: ViewTypes[]\n} {\n  const string = localStorage.taggedjs || JSON.stringify({autoTest: true, views: []})\n  return JSON.parse(string)\n}\n\nfunction saveScopedStorage() {\n  localStorage.taggedjs = JSON.stringify(storage)\n}\n\nexport default tag(() => {\n  state('isolated app state')\n  let renderCount = letState(0)(x => [renderCount, renderCount = x])\n  let appCounter = letState(0)(x => [appCounter, appCounter=x])\n  let testTimeout = letState(null)(x => [testTimeout, testTimeout=x])\n  const appCounterSubject = state(() => new Subject(appCounter))\n  const callback = callbackMaker()\n\n  function runTesting(manual = true) {\n    const waitFor = 2000\n\n    testTimeout = setTimeout(async () => {\n      console.debug(' Running tests...')\n      const result = await runTests(storage.views)\n\n      if(!manual) {\n        return\n      }\n\n      if(result) {\n        alert(' all app tests passed')\n        return\n      }\n\n      alert(' tests failed. See console for more details')\n\n    }, waitFor) as any // cause delay to be separate from renders\n  }\n\n  onInit(() => {\n    console.info('1 app init should only run once')    \n\n    appCounterSubject.subscribe(\n      callback(x => {\n        appCounter = x\n      })\n    )\n\n    if(storage.autoTest) {\n      runTesting(false)\n    }\n  })\n\n  function toggleViewType(type: ViewTypes) {\n    if(storage.views.includes(type)) {\n      (storage.views = storage.views.filter(x => x !== type))\n    } else {\n      storage.views.push(type)\n      \n      if(storage.autoTest) {\n        runTesting()\n      }  \n    }\n\n    saveScopedStorage()    \n  }\n\n  function toggleAutoTesting() {\n    storage.autoTest = storage.autoTest = !storage.autoTest\n    saveScopedStorage()\n  }\n\n  ++renderCount\n\n  return html`<!--isolatedApp.js-->\n    <h1 id=\"app\"> TaggedJs - isolated</h1>\n\n    <div>\n      <button id=\"app-counter-subject-button\"\n        onclick=${() => appCounterSubject.set = appCounter + 1}\n      > ++app subject</button>\n      <span>\n         <span id=\"app-counter-subject-display\">${appCounter}</span>\n      </span>\n      auto testing <input type=\"checkbox\" ${storage.autoTest ? 'checked': null} onchange=${toggleAutoTesting} />\n      <button type=\"button\" onclick=${() => runTesting(true)}>run tests</button>\n    </div>\n\n    <div>\n      <h3>Sections</h3>\n      <div style=\"display:flex;gap:1em;flex-wrap:wrap;margin:1em;\">\n        ${viewTypes.map(type => html`\n          <div>\n            <input type=\"checkbox\"\n              id=${'view-type-' + type} name=${'view-type-' + type}\n              ${storage.views.includes(type) && 'checked'}\n              onclick=${() => toggleViewType(type)}\n            />\n            <label for=${'view-type-' + type}>&nbsp;${type}</label>\n          </div>\n        `.key(type))}\n      </div>\n    </div>\n\n    <div id=\"tagDebug-fx-wrap\">\n      <div style=\"display:flex;flex-wrap:wrap;gap:1em\">\n        ${storage.views.includes(ViewTypes.OneRender) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>oneRender</legend>\n            ${oneRender()}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.Props) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>propsDebugMain</legend>\n            ${propsDebugMain(undefined)}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.WatchTesting) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>watchTesting</legend>\n            ${watchTesting()}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.TableDebug) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>tableDebug</legend>\n            ${tableDebug()}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.ProviderDebug) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>providerDebugBase</legend>\n            ${providerDebugBase(undefined)}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.TagSwitchDebug) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>tagSwitchDebug</legend>\n            ${tagSwitchDebug(undefined)}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.Mirroring) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>mirroring</legend>\n            ${mirroring()}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.Arrays) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>arrays</legend>\n            ${arrayTests()}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.Counters) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>counters</legend>\n            ${counters({appCounterSubject})}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.Content) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>content</legend>\n            ${contentDebug()}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.Child) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>Children Tests</legend>\n            ${childTests(undefined)}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.FunInPropsTag) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>funInPropsTag</legend>\n            ${funInPropsTag()}\n          </fieldset>\n        `}\n\n        ${storage.views.includes(ViewTypes.Todo) && html`\n          <fieldset style=\"flex:2 2 20em\">\n            <legend>todo</legend>\n            ${todo()}\n          </fieldset>\n        `}\n\n        ${/*\n          <textarea style=\"font-size:0.6em;min-width:50vw;height:400px\">${ template.string }</textarea>\n          <textarea style=\"font-size:0.6em;min-width:50vw;height:400px\">${ JSON.stringify(template, null, 2) }</textarea>\n          */ false\n        }\n      </div>\n      ${renderCountDiv({renderCount, name:'isolatedApp'})}\n    </div>\n  `\n})\n","import { execute } from \"./expect\"\nimport { ViewTypes } from \"./isolatedApp\"\n\nexport async function runTests(\n  views: ViewTypes[]\n) {\n  if(views.includes(ViewTypes.Content)) {\n    await import('./content.test')\n  }\n\n  if(views.includes(ViewTypes.Counters)) {\n    await import('./counters.test')\n  }\n\n  if(views.includes(ViewTypes.Props)) {\n    await import('./props.test')\n  }\n\n  if(views.includes(ViewTypes.ProviderDebug)) {\n    await import('./providers.test')\n  }\n\n  if(views.includes(ViewTypes.TagSwitchDebug)) {\n    await import('./tagSwitch.test')\n  }\n\n  if(views.includes(ViewTypes.Child)) {\n    await import('./child.test')\n  }\n\n  if(views.includes(ViewTypes.Arrays)) {\n    await import('./array.test')\n  }\n\n  if(views.includes(ViewTypes.Mirroring)) {\n    await import('./mirror.test')\n  }\n\n  if(views.includes(ViewTypes.WatchTesting)) {\n    await import('./watch.test')\n  }\n\n  if(views.includes(ViewTypes.FunInPropsTag)) {\n    await import('./funInProps.test')\n  }\n\n  if(views.includes(ViewTypes.OneRender)) {\n    await import('./oneRender.test')\n  }\n\n  if(views.includes(ViewTypes.Todo)) {\n    await import('./todos.test')\n  }\n\n  try {\n    const start = Date.now() //performance.now()\n    await execute()\n    const time = Date.now() - start // performance.now() - start\n    console.info(` isolated tests passed in ${time}ms`)\n    return true\n  } catch (error: unknown) {\n    console.error(' isolated tests failed: ' + (error as Error).message, error)\n    return false\n  }\n}\n","import { tagElement } from \"taggedjs\"\nimport { App } from \"./app.tag\"\nimport IsolatedApp from \"./isolatedApp\"\n\nexport const app = () => {// app.ts\n  console.info('attaching app to element...')\n  const element = document.getElementsByTagName('app')[0]\n\n  const pathname = window.location.pathname\n  const locationSplit = pathname.split('/').filter(x => x)\n  const location = locationSplit[0]?.toLowerCase()\n  if(location && ['isolated.html','index-static.html'].includes(location)) {\n    const start = Date.now()\n    tagElement(IsolatedApp, element, {test:1})\n    const end = Date.now() - start\n    console.info(` isolated render in ${end}ms`)\n    return\n  }\n\n  const start = Date.now()\n  tagElement(App, element, {test:1})\n  const end = Date.now() - start\n  console.info(` rendered in ${end}ms`)\n}\n"],"names":["it","toBe","insideCount","click","insideElm","insideDisplay","indexValue","innerText","outsideElm","outsideDisplay","outsideValue","Number","toString","async","time","onclick","Promise","res","setTimeout","firstRun","counterInput","toBeDefined","value","onkeyup","target","beforeRenderCount","beforeInnerRenderCount","pipedSubDisplay","subjectCountDisplay","elmCount","selector","document","querySelectorAll","length","query","focus","q","forEach","elm","clickOne","index","html","innerHTML","byId","id","getElementById","htmlById","expectMatchedHtml","queries","elements","reduce","all","push","toBeGreaterThan","lastHtml","pop","every","join","expectHTML","element","expectElmCount","count","message","found","testDuelCounterElements","sets","button0","display0","shift","buttonQuery","ip0","testCounterSelectedElements","elementCountExpected","increase","button1","display1","display1Element","ip1Check","secondIncrease","counterButtons","counterDisplays","counterButtonSelect","counterDisplaySelect","increaseCounter","counterDisplay","body","contains","counterValue","oldCounterValue","testCounterElements","onlyTests","tests","tab","describe","label","run","oldTests","console","debug","repeat","runTests","error","start","Date","now","clearTests","execute","test","err","name","expect","expected","customMessage","Function","JSON","stringify","Error","received","amount","expectNum","isNaN","toBeLessThan","skip","only","counter","propCounter","funUpdateValue","changed","ownerHTML","parentHTML","childHTML","ownerNum","parentNum","childNum","syncCounter","dropdown","onchange","todoInput","onkeydown","key","todoToggle2","checked","event","MouseEvent","bubbles","cancelable","view","window","dispatchEvent","editInput","slowCount","startCount","truthStartCount","newCount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","ValueTypes","isStaticTag","tag","templater","includes","tagJsType","isTagComponent","tagComponent","isTagClass","isSubjectInstance","subject","isSubject","subscribe","isTagArray","Array","x","combineLatest","subjects","output","Subject","subscribeWith","callback","valuesSeen","values","setValue","subscription","clones","subscriptions","map","runPipedMethods","methods","onComplete","cloneMethods","firstMethod","next","newValue","handler","methodResponse","setHandler","onSubscription","subscribers","_value","set","constructor","this","defineValueOn","countSubject","globalSubCount$","unsubscribe","findIndex","sub","splice","removeSubFromArray","add","getSubscription","orgCallback","lastValue","emit","subs","toPromise","toCallback","_subscription","pipe","operations","setMethods","args","arg","static","ValueSubject","super","getSupportInCycle","setUse","memory","stateConfig","tagSupport","use","useMe","beforeRender","beforeRedraw","afterRender","beforeDestroy","tagUse","TagError","details","errorCode","ArrayNoKeyError","StateMismatchError","SyncCallbackError","array","state","config","rearray","stateLength","getStateValue","initState","defaultValue","checkValue","oldState","StateEchoBack","getCallbackValue","wrapper","oldStates","newStates","tagFunction","parentWrap","original","warn","item","syncStates","stateFrom","stateTo","fromValue","getSetMethod","restate","oldValue","initValue","newState","global","newest","result","watch","currentValues","setupWatch","defaultFinally","init","before","final","previous","pastResult","previousValues","defineOnMethod","getWatch","attachTo","setup","oldWatch","firstSupport","method","nowTagSupport","setTo","oldestState","letState","makeStateResult","y","deepClone","makeDeepClone","WeakMap","visited","has","RegExp","clone","isArray","create","getPrototypeOf","i","deepEqual","obj1","obj2","isDeepEqual","fn0","fn1","getTime","isArrayDeepEqual","keys1","keys","keys2","isObjectDeepEqual","newWatch","providers","constructMethod","stateDiffMemory","stateDiff","provider","oldStateCount","instance","owner","children","cm","compareTo","ownerTagSupport","find","msg","isLikeTags","tagSupport0","tagSupport1","templater0","templater1","tag0","tag1","strings0","strings","strings1","string","values0","values1","valuesLengthsMatch","allVarsMatch","isLikeValueSets","runBeforeRender","ownerSupport","runAfterRender","tagClosed$","runBeforeDestroy","deleted","hasLiveElements","childTags","filter","child","oldest","renderTagOnly","newTagSupport","prevSupport","oldRenderCount","renderCount","parentSupport","lastOwnerSupport","runtimeOwnerSupport","lastState","runBeforeRedraw","beforeWithRender","reSupport","variablePrefix","escapeVariable","escapeSearch","Tag","arrayValue","destroyTagMemory","oldTagSupport","destroy","context","insertAfter","newNode","referenceNode","parentNode","insertBefore","nextSibling","isSimpleType","destroyArrayTag","counts","stagger","removed","removeChild","restoreTagMarker","lastSupport","placeholderElm","placeholder","getValueType","type","function","date","tagArray","unknown","cloneValueArray","props","getChildTagsToDestroy","allTags","cTag","TemplaterResult","tagged","madeChildIntoSubject","childSubject","templaterResult","kid","kidsToTagArraySubject","processNewTag","TagSupport","swapInsertBefore","createTextNode","specialAttribute","names","split","style","classList","remove","hasPropChanges","pastCloneProps","castedProps","castedPastProps","compare","subCastedProps","subCompareProps","matched","entries","compareProps","onDelete","compareOriginal","processTagResult","subjectTag","newSupport","updateBy","processTagResultUpdate","buildBeforeElement","processSubjectComponent","options","substring","preClones","renderWithSupport","myClones","fClone","renderSubjectComponent","castProps","stateArray","checkProp","alterProp","newProp","seen","toCall","wrap","callWith","noCycle","allMatched","renderTagSupport","callbackPropOwner","assign","getPropWrap","subValue","afterCheckProp","hasSetter","getOwnPropertyDescriptor","pastValue","destroy$","updateExistingTagComponent","renderUp","oldWrapper","newWrapper","isSameTag","added","hasChanged","newTemplater","propsChanged","propsConfig","latestCloned","propsChanged2","kidsChanged","oldCloneKidValues","lastClonedKidValues","newClonedKidValues","hasKidsChanged","hasTagSupportChanged","newPropsArray","priorPropConfig","priorPropsArray","newArray","syncPriorPropFunction","syncFunctionProps","locked","blocked","isLikeTag","oldestTag","oldInsertBefore","buildNewTag","afterTagRender","priorProp","oldOwnerState","useLocks","runTagCallback","bindTo","findTagToCallback","bind","callbackResult","lastResult","block","checkAfterCallbackPromise","last","renderCallbackSupport","afterTagCallback","then","startRegX","endRegX","isTagVar","search","processAttribute","attrName","scope","howToSet","getContextValueByVarString","processNameValueAttr","processScopedNameValueAttr","attrValue","removeAttribute","processNameOnlyAttr","isSpecialAttr","replace","reverse","isSpecial","action","newAttrValue","oneRender","isChildOverride","subjectFunction","bindSubjectCallback","processAttributeSubjectValue","callbackFun","fun","howToSetAttribute","setAttribute","howToSetInputValue","interpolateAttributes","attrNames","getAttributeNames","nodeName","getAttribute","interpolateReplace","processTag","newTagSupportByTemplater","tagFakeTemplater","getFakeTemplater","fake","isTag","setupNewSupport","processTagArray","lastArray","setPlaceholderElm","runtimeInsertBefore","destroyArrayItem","subTag","tagClass","prevArrayValue","destroyItem","valueA","valueB","areLikeValues","previousSupport","itemSubject","setupNewTemplater","template","getTemplate","processAddTagArrayItem","fragment","createDocumentFragment","newTempElm","createElement","appendChild","updateBeforeTemplate","lastFirstChild","parent","textNode","castTextValue","processRegularValue","castedValue","oldClone","textContent","processFirstSubjectValue","v","oneRenderToTagSupport","processFirstRegularValue","updateExistingValue","valueType","displaySubject","hasLastValue","newType","destroySimpleValue","arraySubject","wasArray","isValueTag","checkDestroyPrevious","subjectSup","newestState","prepareUpdateToComponent","isClass","valueSupport","isTagTemplater","handleStillTag","interpolateTemplate","hasAttribute","variableName","existingSubject","subscribeToTemplate","called","onValue","mutatingCallback","afterElmBuild","textarea","match","dynamic","_elm","_name","scanTextAreaValue","diff","onInitDoubleWrap","oninit","onInitWrap","onInit","elementInitCheck","select","interpolateContentTemplates","tagComponents","subChild","isRenderEndTemplate","nextClones","nextTagComponent","tagName","interpolateElement","container","interpolatedTemplates","interpolation","content","nextTagComponents","processChildrenAttributes","interpolateString","expression","startsWith","interpolateToTemplates","afterInterpolateElement","temporary","firstChild","nextNextSibling","buildClones","prefixSearch","BaseTagSupport","isApp","appElement","clonePropsBy","kidValue","latest","setTagPlaceholder","update","elementContainer","tempDraw","thisTag","updateContext","_string","updateContextItem","processNewValue","tempTag","updateConfig","updateValues","byParent","firstDestroy","destroySubscriptions","subGlobal","mainPromise","checkRestoreTagMarker","promise","destroyClones","resetTagSupport","promises","oldClones","checkCloneRemoval","oldContext","customElm","ondestroy","onDestroyDoubleWrap","onDestroyWrap","onDestroy","elementDestroyCheck","compareClone","version","getAppTagSupport","support","softDestroySupport","destroyUnlikeTags","oldGlobal","moveProviders","placeParent","insertParent","handleProviderChanges","appSupport","tagsWithProvider","getTagsWithProvider","renderExistingTag","oldestSupport","preRenderCount","providersWithChanges","providersChangeCheck","ownerTag","selfPropChange","callbackStateUpdate","maybePromise","finally","innerCallback","a","b","c","e","f","callbackMaker","originalGetter","initMemory","setCurrentTagSupport","childrenCurrentSupport","tags","tagCount","innerTagWrap","lastTagSupport","originalFunction","nowState","valuesValue","getTagWrap","tagIndex","route","routeProps","app","routeTag","oneRenderFunction","appElements","tagElement","appElmIndex","appElm","runWrapper","templateElm","hmr","attributeDebug","selected","isOrange","class","contentDebug","vs0","vs1","utils","willPromise","resolve","tableDebug","showCell","test0interval","test1interval","intervalTester0","intervalCount","intervalId","intervalId2","renderCounter","currentTime","startInterval","info","setInterval","stopInterval","clearInterval","intervalTester1","toggleInterval","animateInit","staggerBy","fxName","opacity","wait","animateDestroy","capturePosition","zIndex","toTop","offsetTop","toLeft","offsetLeft","toWidth","clientWidth","offsetWidth","toHeight","clientHeight","offsetHeight","top","left","width","height","position","captureElementPosition","in","fadeInDown","out","fadeOutUp","fxIn","fxOut","input","createFx","tagDebug","_firstState","showIntervals","renderCountDiv","tagSwitchDebug","_t","selectedTag","tagOutput","title","tag2","tag3","tagOutput2","ternaryPropTest","arraySwitching","mirroring","tagCounter","innerHtmlTest","_props","innerHtmlPropsTest","test22","childTests","_","childAsPropTest","mouseOverTag","mouseOverEditShow","edit","loadStartTime","counters","appCounterSubject","readStartTime","initCounter","callbacks","callbackTestSub","pipedSubject0","increasePropCounter","globalSubs","innerCounters","TagDebugProvider","showDialog","ProviderFunc","tagDebugProvider","upper","upperTagDebugProvider","providerDebugBase","_x","providerClass","showModal","providerDebug","propCounterChange","dialog","funcProvider","upperProvider","showProProps","testProviderAsProps","watchTesting","stateNum","stateNumChangeCount","slowChangeCount","watchPropNumSlow","noInit","subjectChangeCount","watchPropNumSubject","asSubject","truthChange","truthChangeCount","watchTruth","truthy","truthSubChangeCount","watchTruthAsSub","insideMultiRender","counter$","main","myFunction","showChild","somethingElse","addArrayItem","deleteItem","funInPropsChild","myChildFunction","addArrayComponent","handleKeyDown","trim","mainProp","myFunction3","other","arrayFunTag","hasValidMin","min","Input","onSubmit","onBlur","ADD_ITEM","UPDATE_ITEM","REMOVE_ITEM","TOGGLE_ITEM","TOGGLE_ALL","REMOVE_COMPLETED_ITEMS","Item","todo","dispatch","isWritable","completed","removeItem","payload","updateItem","Main","todos","visibleTodos","Footer","activeTodos","removeCompleted","nanoid","size","Math","random","App","concat","todoReducer","Header","propsDebugMain","syncPropNumber","propNumber","propsJson","json","parse","propsDebug","propNumberChange","syncPropDebug","parentTest","timestamp","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","timestampToValues","newDateString","propDateDebug","propNumberChangeCount","myPropNumber","watchResults","__","getSetProp","myProp","letProp","propFnUpdateTest","arrayTests","players","getNewPlayer","scores","_v","frame","score","floor","playersDisplay","scoreData","playerIndex","player","toggleValue","appCounter","testTimeout","runTesting","manual","templateTags","getElementsByTagName","toggleTest","propsTextarea","alert","clearTimeout","ViewTypes","viewTypes","storage","localStorage","taggedjs","autoTest","views","getScopedStorage","saveScopedStorage","Content","Counters","Props","ProviderDebug","TagSwitchDebug","Child","Arrays","Mirroring","WatchTesting","FunInPropsTag","OneRender","Todo","toggleViewType","TableDebug","locationSplit","location","pathname","toLowerCase","end"],"sourceRoot":""}