var t={519:t=>{function e(t){return Promise.resolve().then((()=>{return import(t);throw e.code="MODULE_NOT_FOUND",e}))}e.keys=()=>[],e.resolve=e,e.id=519,t.exports=e},510:(t,e,r)=>{function n(t){const e={beforeRender:t.beforeRender||(()=>{}),beforeRedraw:t.beforeRedraw||(()=>{}),afterRender:t.afterRender||(()=>{}),beforeDestroy:t.beforeDestroy||(()=>{})};n.tagUse.push(e)}function o(t,e){n.tagUse.forEach((r=>r.beforeRedraw(t,e)))}function a(t,e){e.parentNode.insertBefore(t,e)}function s(t,e,r){const n=t.split(".");if("style"===n[0]&&(r.style[n[1]]=e),"class"===n[0])return n.shift(),void(e?n.forEach((t=>r.classList.add(t))):n.forEach((t=>r.classList.remove(t))))}function i(t){return!0===t?.isTemplater}function c(t){return!0===t?.isTag}function u(t){return!(!0!==t?.isSubject&&!t?.subscribe)}function l(t){return t instanceof Array&&t.every((t=>c(t)))}r.r(e),r.d(e,{ArrayValueNeverSet:()=>ct,Tag:()=>ut,escapeSearch:()=>it,escapeVariable:()=>at,variablePrefix:()=>ot}),n.tagUse=[],n.memory={};const p=/^\s*{__tagvar/,g=/}\s*$/;function f(t){return t&&t.search(p)>=0&&t.search(g)>=0}function d(t,e,r,n,o,a){if(f(e))return function(t,e,r,n,o,a){return m(t,h(n,e),r,o,a)}(t,e,r,n,o,a);if(f(t)){let e;const s=h(n,t).subscribe((t=>{!function(t,e,r,n,o){if(e&&e!=t&&("string"==typeof e?r.removeAttribute(e):e instanceof Object&&Object.entries(e).forEach((([t])=>r.removeAttribute(t)))),"string"!=typeof t)t instanceof Object&&Object.entries(t).forEach((([t,e])=>m(t,e,r,n,o)));else{if(!t.length)return;m(t,"",r,n,o)}}(t,e,r,o,a),e=t}));return o.cloneSubs.push(s),void r.removeAttribute(t)}return y(t)?s(t,e,r):void 0}function h(t,e){return t[e.replace("{","").split("").reverse().join("").replace("}","").split("").reverse().join("")]}function m(t,e,r,n,o){const a=y(t);if(e instanceof Function){const n=function(...t){return e(r,t)};r[t].action=n}if(u(e)){r.removeAttribute(t);const i=e=>function(t,e,r,n,o){if(t instanceof Function)return e[r]=function(...r){return t(e,r)},void(e[r].tagFunction=t);if(n)return void s(r,t,e);if(t)return void o(e,r,t);void 0===t||!1===t||null===t?e.removeAttribute(r):o(e,r,t)}(e,r,t,a,o),c=e.subscribe(i);n.cloneSubs.push(c)}else o(r,t,e)}function y(t){return t.search(/^(class|style)(\.)/)>=0}function w(t,e,r){t.setAttribute(e,r)}function b(t,e,r){t[e]=r}function v(t,e,r){const n=t.getAttributeNames();let o=w;n.forEach((n=>{"INPUT"===t.nodeName&&"value"===n&&(o=b),d(n,t.getAttribute(n),t,e,r,o),o=w}))}const S=/(?:<[^>]*?(?:(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^>\s]+)))*\s*)\/?>)|({__tagvar[^}]+})/g;function E(t,e,r,{counts:n,forceElement:o}){const a=e,s=a.tag;if(s&&!o&&s.isLikeTag(t)){if(e instanceof Function){const t=e(s.tagSupport);return s.updateByTag(t),[]}return s.updateByTag(t),[]}const i=t.buildBeforeElement(r,{counts:n,forceElement:o});return a.tag=a.tag||t,i}class T{value;isSubject=!0;subscribers=[];constructor(t){this.value=t}subscribe(t){this.subscribers.push(t),A.globalSubs.push(t);const e=A.globalSubCount$;A.globalSubCount$.set(e.value+1);const r=()=>{r.unsubscribe()};return r.unsubscribe=()=>{C(this.subscribers,t),C(A.globalSubs,t),A.globalSubCount$.set(e.value-1),r.unsubscribe=()=>{}},r}set(t){this.value=t,this.subscribers.forEach((e=>{e.value=t,e(t)}))}next=this.set}function C(t,e){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}const A=T;A.globalSubs=[],A.globalSubCount$=new T,A.globalSubCount$.set(0);class x extends T{value;constructor(t){super(t),this.value=t}subscribe(t){const e=super.subscribe(t);return t(this.value),e}}function j(t){return P(t,new WeakMap)}function P(t,e){if(null===t||"object"!=typeof t)return t;if(e.has(t))return e.get(t);if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));if(e.set(t,r),Array.isArray(t))for(let n=0;n<t.length;n++)r[n]=P(t[n],e);else for(const n in t)t.hasOwnProperty(n)&&(r[n]=P(t[n],e));return r}function F(t,e){return O(t,e,new WeakMap)}function O(t,e,r){if(t===e||(o=e,(n=t)instanceof Function&&o instanceof Function&&n.toString()===o.toString()))return!0;var n,o;if("object"!=typeof t||"object"!=typeof e||null===t||null===e)return!1;const a=Object.keys(t),s=Object.keys(e);if(a.length!==s.length)return!1;if(r.has(t))return!0;r.set(t,0);for(const n of a)if(!s.includes(n)||!O(t[n],e[n],r))return!1;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!O(t[n],e[n],r))return!1}else if(Array.isArray(t)||Array.isArray(e))return!1;return!0}class R extends Error{details;constructor(t,e,r={}){super(t),this.name=R.name,this.details={...r,errorCode:e}}}class V extends R{constructor(t,e){super(t,"array-no-key-error",e),this.name=V.name}}class k extends R{constructor(t,e){super(t,"state-mismatch-error",e),this.name=k.name}}n.memory.stateConfig={array:[],rearray:[]},n({beforeRender:t=>B(t),beforeRedraw:t=>B(t),afterRender:t=>{const e=t.memory.state,r=n.memory.stateConfig;if(r.rearray.length&&r.rearray.length!==r.array.length){const e=`States lengths mismatched ${r.rearray.length} !== ${r.array.length}`;throw new k(e,{oldStates:r.array,newStates:r.rearray,component:t.templater?.wrapper.original})}r.rearray=[],e.newest=[...r.array],r.array=[]}});class N{}function B(t){const e=t.memory.state,r=n.memory.stateConfig;if(r.rearray.length){const n="last array not cleared";throw console.error(n,{config:r,component:t.templater?.wrapper.original,state:e,expectedClearArray:r.rearray}),new k(n,{config:r,component:t.templater?.wrapper.original,state:e,expectedClearArray:r.rearray})}r.rearray=[],e?.newest.length&&r.rearray.push(...e.newest)}function $(t,e){const r=function(t,r){if("object"!=typeof t)return t;const n=t;return Object.entries(n).forEach((([t,r])=>{if(r instanceof Function){if(n[t].original)return;return n[t]=(...t)=>function(t,r){const n=t(...r),o=e.newest,a=o?.ownerTag?.tagSupport;return a.render(),n}(r,t),void(n[t].original=r)}})),n}(c(t)?0:t);return r}class L{templater;children;propsConfig;memory={context:{},state:{newest:[]},providers:[],renderCount:0};updateState(){this.memory.state.newest.forEach((t=>{t.lastValue=function(t){const e=t.callback;if(!e)return t.defaultValue;const r=e(N),[n]=r,[o]=e(n);if(o!==N){const a='State property not used correctly. Second item in array is not setting value as expected.\n\nFor "let" state use `let name = state(default)(x => [name, name = x])`\n\nFor "const" state use `const name = state(default)()`\n\nProblem state:\n'+(e?e.toString():JSON.stringify(t))+"\n";throw console.error(a,{state:t,callback:e,oldState:r,oldValue:n,checkValue:o}),new Error(a)}return n}(t)}))}constructor(t,e,r){this.templater=t,this.children=e;const n=$(r,t);this.propsConfig={latest:r,latestCloned:n,clonedProps:n,lastClonedKidValues:e.value.map((t=>U(t.values)))},c(r)||(this.propsConfig.latestCloned=j(n),this.propsConfig.clonedProps=this.propsConfig.latestCloned)}oldest;newest;mutatingRender(){const t='Tag function "render()" was called in sync but can only be called async';throw console.error(t,{tagSupport:this}),new Error(t)}render(){return++this.memory.renderCount,this.mutatingRender()}}function U(t){return t.map((t=>{const e=t;return c(e)?U(e.values):i(e)?j(e.tagSupport.propsConfig.latestCloned):l(e)?U(e):j(t)}))}function _(t,e){const r=t.lastArray;if(r&&!l(e))return r.forEach((({tag:t})=>M(t,{added:0,removed:0}))),delete t.lastArray,1;const n=t,o=n.tag;if(o){const r=c(e);return c(t.value)&&r?(s=o,((a=e).strings.length!==s.strings.length||!a.strings.every(((t,e)=>s.strings[e]===t))||a.values.length!==s.values.length)&&(W(o,n),2)):!i(e)&&(W(o,n),3)}var a,s;const u=t,p="lastValue"in u,g=u.lastValue;return!(!p||g===e)&&(function(t,e){const r=e.clone,n=r.parentNode;n.insertBefore(t,r),n.removeChild(r),delete e.clone,delete e.lastValue}(u.template,u),4)}function W(t,e){delete e.tag,delete e.tagSupport,t.destroy()}function M(t,e){t.children.forEach((t=>t.destroy({stagger:e.removed++}))),t.destroy({stagger:e.removed})}function D(t,e,r,n,o){const a=n.clones;t.lastArray=t.lastArray||[],t.template=r;let s=0;t.lastArray=t.lastArray.filter(((r,n)=>{const a=e.length-1<n-s,i=e[n-s],c=i?.arrayValue;return!(a||!I(c,r.tag.arrayValue))||(M(t.lastArray[n].tag,o.counts),++s,!1)}));const i=r||r.clone;return e.forEach(((r,s)=>{const c=t.lastArray[s],u=r.tagSupport||c?.tag.tagSupport;r.tagSupport=u||new L({},new x([])),u?u.newest=r:(r.tagSupport.mutatingRender=()=>(n.tagSupport.render(),r),n.children.push(r)),r.ownerTag=n;const l=r.arrayValue;if(l?.isArrayValueNeverSet){const t={template:r.getTemplate().string,array:e,ownerTagContent:n.lastTemplateString},o="Use html`...`.key(item) instead of html`...` to template an Array";throw console.error(o,t),new V(o,t)}if(t.lastArray.length>s)return I(c.tag.arrayValue,r.arrayValue)?(r.tagSupport=r.tagSupport||c.tag.tagSupport,c.tag.updateByTag(r),[]):[];const p=function(t,e,r,n,o){const a={tag:e,index:n};r.lastArray.push(a);const s={added:o.counts.added+n,removed:o.counts.removed},i=t;return e.buildBeforeElement(i,{counts:s,forceElement:o.forceElement})}(i,r,t,s,o);a.push(...p)})),a}function I(t,e){return t===e||!!(t instanceof Array&&e instanceof Array&&t.length==e.length)&&t.every(((t,r)=>t==e[r]))}function q(t,e,r){e.template=r;const n=e.clone||r;e.lastValue=t;const o=function(t,e){const r=e.parentNode;void 0!==t&&!1!==t&&null!==t||(t="");const n=document.createTextNode(t);return r.insertBefore(n,e),r.removeChild(e),n}(t,n);return e.clone=o,[]}var K;function H(t,e,r,a,s){const u=function(t){return i(t)?K.tagComponent:c(t)?K.tag:l(t)?K.tagArray:K.value}(t);switch(u){case K.tag:return J(t,e,r,a,s);case K.tagArray:return D(e,t,r,a,s);case K.tagComponent:return function(t,e,r,a,s){if(!0!==t.tagged){let e=t.wrapper.original.name||t.wrapper.original.constructor?.name;"Function"===e&&(e=void 0);const r=e||t.wrapper.original.toString().substring(0,120);throw new Error(`Not a tag component. Wrap your function with tag(). Example tag(props => html\`\`) on component:\n\n${r}\n\n`)}const i=t;i.insertBefore=r;const c=t.tagSupport;let u=i.newest;return n.memory.providerConfig.ownerTag=a,u&&!s.forceElement||(u?o(c,i.oldest):function(t,e){n.tagUse.forEach((r=>r.beforeRender(t,e)))}(c,a),u=i.renderWithSupport(c,e.tag,a).retag,i.newest=u),a.children.push(u),c.templater=u.tagSupport.templater,E(u,e,r,s)}(t,e,r,a,s)}return q(t,e,r)}function J(t,e,r,n,o){return t.tagSupport||(t.tagSupport=new L({},new x([])),t.tagSupport.mutatingRender=()=>{n.tagSupport.render()},t.tagSupport.oldest=t.tagSupport.oldest||t,n.children.push(t),t.ownerTag=n),e.template=r,E(t,e,r,o)}!function(t){t.tag="tag",t.tagArray="tag-array",t.tagComponent="tag-component",t.value="value"}(K||(K={}));const X=new RegExp('\\s*<template interpolate end id="__tagvar(\\d{1,4})"([^>]*)></template>(\\s*)');function z(t,e,r,n,o){const a=[];if(!t.hasAttribute("end"))return{clones:a};const s=t.getAttribute("id");if(s?.substring(0,ot.length)!==ot)return{clones:a};const c=e[s];return i(c.value)?{clones:a,tagComponent:{ownerTag:r,subject:c,insertBefore:t}}:(G(t,c,r,a,n,{isForceElement:o.forceElement}),{clones:a})}function G(t,e,r,n,o,{isForceElement:a}){const s=e.subscribe((s=>{const i=e.clone;i&&(t=i);const c=H(s,e,t,r,{counts:{...o},forceElement:a});a&&(a=!1),n.push(...c)}));return r.cloneSubs.push(s),n}function Q(t,e,r,n){if(!t.getAttribute)return;"TEXTAREA"===t.nodeName&&function(t,e,r){const n=t.value;if(n.search(X)>=0){const o=n.match(/__tagvar(\d{1,4})/),a="{"+(o?o[0]:"")+"}";t.value="",t.setAttribute("text-var-value",a);const s=(e,r,n)=>t.value=n;d("text-var-value",a,t,e,r,s)}}(t,r,n);let o=e.counts.added;e.forceElement||(o=function(t,e){const r=t.oninit;if(!r)return e.added;const n=r.tagFunction;if(!n)return e.added;const o=n.tagFunction;return o?(o({target:t,stagger:e.added}),++e.added):e.added}(t,e.counts)-o),t.children&&(e.counts.added,e.counts.removed,new Array(...t.children).forEach(((t,o)=>Q(t,{...e,counts:e.counts},r,n))))}function Y(t,e,r,n,o){if(!o||"TEMPLATE"===t.tagName)return{clones:[],tagComponents:[]};const a=n.counts,s=[],i=[];return new Array(...o).forEach((t=>{const{clones:o,tagComponent:c}=z(t,e,r,a,n);s.push(...o),c?i.push(c):t.children&&new Array(...t.children).forEach(((t,o)=>{if(function(t){return"TEMPLATE"===t.tagName&&void 0!==t.getAttribute("interpolate")&&void 0!==t.getAttribute("end")}(t)){const{tagComponent:o}=z(t,e,r,a,n);o&&i.push(o)}const{clones:c,tagComponents:u}=Y(t,e,r,n,t.children);s.push(...c),i.push(...u)}))})),{clones:s,tagComponents:i}}function Z(t,e,r,n,o){const a=[],s=[],i=r.interpolation,c=t.children[0].content.children;if(i.keys.length){const{clones:r,tagComponents:i}=Y(t,e,n,o,c);a.push(...r),s.push(...i)}return v(t,e,n),tt(c,e,n),{clones:a,tagComponents:s}}function tt(t,e,r){new Array(...t).forEach((t=>{v(t,e,r),t.children&&tt(t.children,e,r)}))}function et(t,e){if(t.isChildOverride)return t;const r=(r,n)=>function(t,e,r,n){const o=e.tagSupport,a=o?o.memory.renderCount:0,s=t.bind(r)(...n),i=a===o.memory.renderCount;if(!o||i)return o.render(),s instanceof Promise?s.then((()=>(o.render(),"promise-no-data-ever"))):"no-data-ever"}(t,e,r,n);return r.tagFunction=t,r}function rt(t,e,r){t.redraw=()=>{const n=e.tag,o=n?.tagSupport||t.tagSupport,{retag:a}=t.renderWithSupport(o,n,r);return e.set(t),a}}function nt(t,e,r){const a=t.value,s=t,p=t,g=s.isChildSubject,f=i(e);if(g&&(e=e.value),_(t,e),f)return function(t,e,r,n){let o=r.tag;if(!o)return rt(e,r,t),void e.redraw();const a=o.tagSupport.templater.wrapper,s=e.wrapper;let i=!1;a&&s&&(i=a.original===s.original);const u=e.tagSupport.propsConfig.latest,l=o.tagSupport;if(l.propsConfig.latest=u,i){const t=n?.tagSupport;let r=t.props;if(c(t.props)||(r=j(t.props)),o&&!function(t,e){if(t===e)throw new Error("something here");const r=t.propsConfig.latest;if(function(t,e,r){if(void 0===t&&t===r)return!1;let n=t,o=e;if("object"==typeof t){if(!e)return!0;if(n={...t},o={...e||{}},!Object.entries(n).every((([t,e])=>{let r=o[t];return!(e instanceof Function)||r instanceof Function&&(r.original&&(r=r.original),e.original&&(e=e.original),e.toString()===r.toString()&&(delete n[t],delete o[t],!0))})))return!0}return!F(e,t)}(e.propsConfig.latest,t.propsConfig.latestCloned,r))return!0;return function(t,e){const r=t.propsConfig.lastClonedKidValues,n=e.propsConfig.lastClonedKidValues;return!r.every(((t,e)=>{const r=n[e];return t.every(((t,e)=>t===r[e]))}))}(t,e)}(l,e.tagSupport))return}else W(o,r);rt(e,r,t),l.templater=e;const p=e.redraw();o.isLikeTag(p)||(o.destroy(),r.tagSupport=p.tagSupport,r.tag=p,l.oldest=p),l.newest=p,l.propsConfig={...e.tagSupport.propsConfig}}(r,e,p,a);const d=p.tag;if(d)!function(t,e,r,a){const s=t.tagSupport.templater.wrapper,i=r?.wrapper,c=s&&i&&s?.original===i?.original,u=r&&t.lastTemplateString===r.lastTemplateString,l=r&&r.getTemplate&&t.isLikeTag(r);if(u||l)return J(r,e,e.template,a,{counts:{added:0,removed:0}});if(c)return function(t,e,r){const a=e.tagSupport,s=a.oldest;a.newest,o(s.tagSupport,s);const i=t.wrapper(a);return t.newest=i,a.newest=i,function(t,e){n.tagUse.forEach((r=>r.afterRender(t,e)))}(s.tagSupport,s),e.updateByTag(i),r.set(t),[]}(r,t,e);q(r,e,e.template)}(d,t,e,r);else if(l(e)){const n=D(t,e,s.template||p.tag?.tagSupport.templater.insertBefore,r,{counts:{added:0,removed:0}});r.clones.push(...n)}else e instanceof Function?p.set(et(e,r)):u(e)?p.set(e.value):p.set(e)}const ot="__tagvar",at="--"+ot+"--",st=new RegExp(ot,"g"),it=new RegExp(at,"g");class ct{isArrayValueNeverSet=!0}class ut{strings;values;isTag=!0;clones=[];cloneSubs=[];children=[];tagSupport;ownerTag;appElement;arrayValue=new ct;constructor(t,e){this.strings=t,this.values=e}key(t){return this.arrayValue=t,this}async destroy(t={stagger:0,byParent:!1}){var e,r;!!this.tagSupport&&(e=this.tagSupport,r=this,n.tagUse.forEach((t=>t.beforeDestroy(e,r)))),this.destroySubscriptions();const o=this.children.map((e=>e.destroy({...t,byParent:!0})));return this.children.length=0,this.ownerTag&&(this.ownerTag.children=this.ownerTag.children.filter((t=>t!==this))),t.byParent||(t.stagger=await this.destroyClones(t)),await Promise.all(o),t.stagger}destroySubscriptions(){this.cloneSubs.forEach((t=>t.unsubscribe())),this.cloneSubs.length=0}async destroyClones({stagger:t}={stagger:0}){let e=!1;const r=this.clones.reverse().map(((r,n)=>{let o;r.ondestroy&&(o=function(t,e){const r=t.ondestroy;if(!r)return;const n=r.tagFunction;if(!n)return;const o=n.tagFunction;return o?o({target:t,stagger:e}):void 0}(r,t));const a=()=>{r.parentNode?.removeChild(r);const t=this.ownerTag;t&&(t.clones=t.clones.filter((t=>t!==r)))};return o instanceof Promise?(e=!0,o.then(a)):a(),o}));return this.clones.length=0,e&&await Promise.all(r),t}updateByTag(t){this.updateConfig(t.strings,t.values),this.tagSupport.templater=t.tagSupport.templater,this.tagSupport.propsConfig={...t.tagSupport.propsConfig},this.tagSupport.newest=t,this.tagSupport.templater.newest=t}lastTemplateString=void 0;updateConfig(t,e){this.strings=t,this.updateValues(e)}getTemplate(){const t=function(t){const e=function(t){const e=[];return{string:t.replace(S,((t,r)=>{if(t.startsWith("<"))return t;const n=r.substring(1,r.length-1);return e.push(n),`<template interpolate end id="${n}"></template>`})),keys:e}}(t);return e.string=e.string.replace(it,ot),e}(this.strings.map(((t,e)=>(t.replace(st,at)+(this.values.length>e?`{${ot}${e}}`:"")).replace(/>\s*/g,">").replace(/\s*</g,"<"))).join(""));return this.lastTemplateString=t.string,{interpolation:t,string:t.string,strings:this.strings,values:this.values,context:this.tagSupport?.memory.context||{}}}isLikeTag(t){const{string:e}=t.getTemplate();if(!this.lastTemplateString)throw new Error("no template here");return e===this.lastTemplateString&&t.values.length===this.values.length&&!!t.values.every(((t,e)=>{const r=this.values[e];return!(t instanceof Function&&r instanceof Function)||!(t.toString()!==r.toString())}))}update(){return this.updateContext(this.tagSupport.memory.context)}updateValues(t){return this.values=t,this.updateContext(this.tagSupport.memory.context)}updateContext(t){const e=[];return this.strings.map(((r,n)=>{const o=ot+n,a=this.values.length>n,s=this.values[n],l=o in t;if(e.push(o),l)return nt(t[o],s,this);!function(t,e,r,n,o){if(i(e))rt(e,r[n]=new x(e),o);else if(e instanceof Function)r[n]=function(t,e){return new x(et(t,e))}(e,o);else if(t)c(e)?(e.ownerTag=o,o.children.push(e),r[n]=new x(e)):u(e)?r[n]=e:r[n]=new x(e)}(a,s,t,o,this)})),Object.entries(t).forEach((([t,r])=>{e.includes(t)||_(r,void 0)})),t}getAppElement(){let t=this;for(;t.ownerTag;)t=t.ownerTag;return t}rebuild(){const t=this.tagSupport.templater.insertBefore;if(!t){const t=new Error("Cannot rebuild. Previous insertBefore element is not defined on tag");throw t.tag=this,t}this.buildBeforeElement(t,{forceElement:!0,counts:{added:0,removed:0}})}buildBeforeElement(t,e={forceElement:!1,counts:{added:0,removed:0}}){this.tagSupport.templater.insertBefore=t;const r=this.update(),n=this.getTemplate(),o=document.createElement("div");o.id="tag-temp-holder",o.innerHTML=`<template id="temp-template-tag-wrap">${n.string}</template>`;const{clones:a,tagComponents:s}=Z(o,r,n,this,{forceElement:e.forceElement,counts:e.counts});this.clones.length=0,lt(o,t,this,a),this.clones.forEach((t=>Q(t,e,r,this)));let i=e.forceElement;return s.forEach((r=>{G(r.insertBefore,r.subject,r.ownerTag,a,e.counts,{isForceElement:i}),lt(o,t,this,a)})),a}}function lt(t,e,r,n,o,s){const i=function(t,e){const r=[];let n=t.children[0].content.firstChild;for(;n;){const t=n.nextSibling;a(n,e),r.push(n),n=t}return r}(t,e);r.clones.push(...i),n.length&&(r.clones=r.clones.filter((t=>!n.find((e=>e===t)))))}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const{variablePrefix:t}=r(510);function e(t){[...document.querySelectorAll("app")].forEach(t)}async function n(){const t=[...document.querySelectorAll("[tag]")].map((async t=>{const e=t.getAttribute("url"),n=t.getAttribute("name"),o=await r(519)(`${e}?${Date.now()}`);try{const t=o[n]();return{newApp:o,newTemplater:t,tagName:n}}catch(t){throw console.error(`Could not load tag by name ${n}`,{newApp:o,url:e}),t}}));return await Promise.all(t)}!function t(){const r=new WebSocket("ws://localhost:3000");r.addEventListener("error",(t=>{console.error("WebSocket error:",t)})),r.addEventListener("open",(t=>{console.info("WebSocket connection opened:",t)})),r.addEventListener("message",(async t=>{console.info("Message from server:",t.data,t.data),"Connected to the WebSocket endpoint"!==t.data?e((t=>{!async function(t){const e=a,r=t.setUse;(await n()).forEach((async t=>{const{newApp:n,newTemplater:c}=t,{redrawTag:u}=n.hmr,l=c.wrapper.original.tags,p=c.wrapper.original.setUse;r.tagUse=p.tagUse,Object.assign(r.memory,p.memory),p.memory=r.memory;const g=e.reduce(((t,e,r)=>{let n=l.find((t=>t.toString()===e.toString()));if(!n){const r=e.tagIndex;void 0!==r&&(n=l[r]),t.push({oldTag:e,newTag:n})}return t}),[]);g.length||console.warn("No old tags changed",{newTags:l,oldTags:e});const f=e.length===l.length;if(l.forEach(((t,r)=>{let n=e.find((e=>t.toString()===e.toString())),o=null;if(!n&&g[0].newTag&&(o=t.tagIndex,f&&(n=e[o])),!n){if(g[0].newTag){const r="HMR has two tags";throw console.warn(r,{first:g[0].newTag,second:t,equal:t===g[0].newTag,oldTags:e,newTags:l,tagIndex:o}),new Error(r)}g[0].newTag=t}})),g.length){const t=g[0].oldTag,e=o.tagSupport.templater,r=e.wrapper.original===t,n=e.wrapper.original.toString()===t.toString();if(r||n){const t=g[0].newTag;return o.tagSupport.templater.wrapper.original=t,await o.destroy(),o=await s(o,u),void(a=l)}const c=await i(o,g[0],u);c<=0?console.warn("✋ No components were updated",g[0]):console.debug(`✅ Replaced and update components ${c}`,g[0])}a=l,console.info("✅ ✅ ✅ rebuilt")}))}(t)})):e((t=>{n().then((e=>{e.forEach((({newApp:e,tagName:r})=>{const{tagElement:n}=e.hmr,s=n(e[r],t,{test:1});return a=s.tags,o=s.tag,s}))}))}))})),r.addEventListener("close",(e=>{console.info("WebSocket connection closed:",e),t()}))}();let o,a=[];async function s(t,e,r){const{retag:n}=e(t.tagSupport,t.tagSupport.templater,t,r);return n.tagSupport.templater.insertBefore=t.tagSupport.templater.insertBefore,n.rebuild(),t.ownerTag&&n.ownerTag.children.push(n),n}async function i(e,{oldTag:r,newTag:n},o){let a=0;const c=e.values.map((async(i,c)=>{if(!i||!i.isTemplater)return;const u=i.wrapper.original===r,l=i.wrapper.original.toString()===r.toString();if(u||l){const r=e.tagSupport.memory.context[t+c];return i.wrapper.original=n,r.tag.tagSupport.templater.wrapper.original=n,await r.tag.destroy(),r.tag=await s(r.tag,o,e),void++a}}));await Promise.all(c);const u=e.children.map((async t=>{a+=await i(t,{oldTag:r,newTag:n},o)}));return await Promise.all(u),a}})();