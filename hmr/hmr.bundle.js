var e={519:e=>{function t(e){return Promise.resolve().then((()=>{return import(e);throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=519,e.exports=t},284:(e,t,r)=>{r.r(t),r.d(t,{Tag:()=>s,escapeSearch:()=>a,escapeVariable:()=>o,variablePrefix:()=>n});const n="__tagvar",o="--"+n+"--",a=new RegExp(o,"g");class s{strings;values;isTagClass=!0;memory={};templater;constructor(e,t){this.strings=e,this.values=t}key(e){return this.memory.arrayValue=e,this}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{let e;const{variablePrefix:t}=r(284);function n(e){[...document.querySelectorAll("app")].forEach(e)}async function o(){const e=[...document.querySelectorAll("[tag]")].map((async e=>{const t=e.getAttribute("url"),n=e.getAttribute("name"),o=await r(519)(`${t}?${Date.now()}`);try{const e=o[n]();return{newApp:o,newTemplater:e,tagName:n}}catch(e){throw console.error(`Could not load tag by name ${n}`,{newApp:o,url:t}),e}}));return await Promise.all(e)}!function t(){const r=new WebSocket("ws://localhost:3000");r.addEventListener("error",(e=>{console.error("WebSocket error:",e)})),r.addEventListener("open",(e=>{console.info("WebSocket connection opened:",e)})),r.addEventListener("message",(async t=>{console.info("Message from server:",t.data,t.data),"Connected to the WebSocket endpoint"!==t.data?n((t=>{!async function(t){const r=a,n=t.setUse;(await o()).forEach((async t=>{const{newApp:o,newTemplater:i}=t,l=o.hmr,{renderWithSupport:c,renderTagSupport:p}=l,g=i.wrapper.original.tags,d=i.wrapper.original.setUse;n.tagUse.length=0,n.tagUse.push(...d.tagUse),Object.assign(n.memory,d.memory),d.memory=n.memory;const u=r.reduce(((e,t)=>{let r=g.find((e=>e.toString()===t.toString()));if(!r){const n=t.tagIndex;void 0!==n&&(r=g[n]),e.push({oldTag:t,newTag:r})}return e}),[]);u.length||console.warn("No old tags changed",{newTags:g,oldTags:r});const w=r.length===g.length;if(g.forEach((e=>{let t=r.find((t=>e.toString()===t.toString())),n=null;if(!t&&u[0].newTag&&(n=e.tagIndex,w&&(t=r[n])),!t){if(u[0].newTag){const t="HMR has two tags";throw console.warn(t,{first:u[0].newTag,second:e,equal:e===u[0].newTag,oldTags:r,newTags:g,tagIndex:n}),new Error(t)}u[0].newTag=e}})),u.length){const{oldTag:t,newTag:r}=u[0],n=e.templater,o=n.wrapper.original===t,i=n.wrapper.original.toString()===t.toString();if(o||i)return e.templater.wrapper.original=r,e.ownerTagSupport={clones:[],childTags:[]},e.rebuild().then((t=>e=t)),void(a=g);const l=await s(e,u[0],{renderWithSupport:c,renderTagSupport:p});l<=0?console.warn("✋ No components were updated",u[0]):console.debug(`✅ Replaced and update components ${l}`,u[0])}a=g,console.info("✅ ✅ ✅ rebuilt")}))}(t)})):n((t=>{o().then((r=>{r.forEach((({newApp:r,tagName:n})=>{const{tagElement:o}=r.hmr;t.destroy&&t.destroy();const s=o(r[n],t,{test:1});return a=s.tags,e=s.tagSupport,s}))}))}))})),r.addEventListener("close",(e=>{console.info("WebSocket connection closed:",e),t()}))}();let a=[];async function s(e,{oldTag:r,newTag:n},{renderWithSupport:o,renderTagSupport:a}){let i=0;const l=e.templater.tag.values.map((async(o,s)=>{if(!o||!o.isTemplater)return;const l=o.wrapper.original===r,c=o.wrapper.original.toString()===r.toString();if(l||c){const l=e.global.context[t+s];return o.wrapper.original=n,async function(e,t,r,n){const o=e.tagSupport,a=o.global.oldest,s=o.global.newest;o.templater.wrapper.original=t,s.templater.wrapper.original=t,a.templater.wrapper.original=t,r.original=t,await n(a,!1)}(l,n,r,a),void++i}}));await Promise.all(l);const c=e.childTags.map((async e=>{i+=await s(e,{oldTag:r,newTag:n},{renderWithSupport:o,renderTagSupport:a})}));return await Promise.all(c),i}})();