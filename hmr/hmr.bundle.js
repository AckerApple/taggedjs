var e={519:e=>{function t(e){return Promise.resolve().then((()=>{return import(e);throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=519,e.exports=t},284:(e,t,r)=>{r.r(t),r.d(t,{Tag:()=>s,escapeSearch:()=>n,escapeVariable:()=>a,variablePrefix:()=>o});const o="__tagvar",a="--"+o+"--",n=new RegExp(a,"g");class s{strings;values;isTagClass=!0;memory={};templater;constructor(e,t){this.strings=e,this.values=t}key(e){return this.memory.arrayValue=e,this}}}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const{variablePrefix:e}=r(284);function t(e){[...document.querySelectorAll("app")].forEach(e)}async function o(){const e=[...document.querySelectorAll("[tag]")].map((async e=>{const t=e.getAttribute("url"),o=e.getAttribute("name"),a=await r(519)(`${t}?${Date.now()}`);try{const e=a[o]();return{newApp:a,newTemplater:e,tagName:o}}catch(e){throw console.error(`Could not load tag by name ${o}`,{newApp:a,url:t}),e}}));return await Promise.all(e)}!function e(){const r=new WebSocket("ws://localhost:3000");r.addEventListener("error",(e=>{console.error("WebSocket error:",e)})),r.addEventListener("open",(e=>{console.info("WebSocket connection opened:",e)})),r.addEventListener("message",(async e=>{console.info("Message from server:",e.data,e.data),"Connected to the WebSocket endpoint"!==e.data?t((e=>{!async function(e){const t=n,r=e.setUse;(await o()).forEach((async e=>{const{newApp:o,newTemplater:l}=e,{redrawTag:c}=o.hmr,g=l.wrapper.original.tags,p=l.wrapper.original.setUse;r.tagUse=p.tagUse,Object.assign(r.memory,p.memory),p.memory=r.memory;const d=t.reduce(((e,t,r)=>{let o=g.find((e=>e.toString()===t.toString()));if(!o){const r=t.tagIndex;void 0!==r&&(o=g[r]),e.push({oldTag:t,newTag:o})}return e}),[]);d.length||console.warn("No old tags changed",{newTags:g,oldTags:t});const u=t.length===g.length;if(g.forEach(((e,r)=>{let o=t.find((t=>e.toString()===t.toString())),a=null;if(!o&&d[0].newTag&&(a=e.tagIndex,u&&(o=t[a])),!o){if(d[0].newTag){const r="HMR has two tags";throw console.warn(r,{first:d[0].newTag,second:e,equal:e===d[0].newTag,oldTags:t,newTags:g,tagIndex:a}),new Error(r)}d[0].newTag=e}})),d.length){const e=d[0].oldTag,t=a.tagSupport.templater,r=t.wrapper.original===e,o=t.wrapper.original.toString()===e.toString();if(r||o){const e=d[0].newTag;return a.tagSupport.templater.wrapper.original=e,await a.destroy(),a=await s(a,c),void(n=g)}const l=await i(a,d[0],c);l<=0?console.warn("✋ No components were updated",d[0]):console.debug(`✅ Replaced and update components ${l}`,d[0])}n=g,console.info("✅ ✅ ✅ rebuilt")}))}(e)})):t((e=>{o().then((t=>{t.forEach((({newApp:t,tagName:r})=>{const{tagElement:o}=t.hmr,s=o(t[r],e,{test:1});return n=s.tags,a=s.tag,s}))}))}))})),r.addEventListener("close",(t=>{console.info("WebSocket connection closed:",t),e()}))}();let a,n=[];async function s(e,t,r){const{retag:o}=t(e.tagSupport,e.tagSupport.templater,e,r);return o.tagSupport.templater.insertBefore=e.tagSupport.templater.insertBefore,o.rebuild(),e.ownerTag&&o.ownerTag.children.push(o),o}async function i(t,{oldTag:r,newTag:o},a){let n=0;const l=t.values.map((async(i,l)=>{if(!i||!i.isTemplater)return;const c=i.wrapper.original===r,g=i.wrapper.original.toString()===r.toString();if(c||g){const r=t.tagSupport.memory.context[e+l];return i.wrapper.original=o,r.tag.tagSupport.templater.wrapper.original=o,await r.tag.destroy(),r.tag=await s(r.tag,a,t),void++n}}));await Promise.all(l);const c=t.children.map((async e=>{n+=await i(e,{oldTag:r,newTag:o},a)}));return await Promise.all(c),n}})();